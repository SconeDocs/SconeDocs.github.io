
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Scone Documentation - Secure Containers">
      
      
        <meta name="author" content="Christof Fetzer">
      
      
        <link rel="canonical" href="https://sconedocs.github.io/hello_world_kubernetes/">
      
      <link rel="icon" href="../img/scone-favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-8.2.4">
    
    
      
        <title>Hello World Kubernetes - Confidential Computing</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"PT Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="../css/tooltips.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#scone-on-kubernetes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Confidential Computing" class="md-header__button md-logo" aria-label="Confidential Computing" data-md-component="logo">
      
  <img src="../img/SCONE-logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Confidential Computing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Hello World Kubernetes
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../news/" class="md-tabs__link">
        News and Overview
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../scone_mesh_tutorial/" class="md-tabs__link">
        Quick Start
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../k8s_concepts/" class="md-tabs__link md-tabs__link--active">
        Kubernetes
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../CASOverview/" class="md-tabs__link">
        Configuration & Attestation
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../helm/" class="md-tabs__link">
        SconeApps
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../operations/" class="md-tabs__link">
        DevOps Workflows
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../aks/" class="md-tabs__link">
        Azure Kubernetes Services
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../usecases/" class="md-tabs__link">
        Use Cases
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../registry/" class="md-tabs__link">
        Sign up
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../iexec_sconify_image/" class="md-tabs__link">
        More
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Confidential Computing" class="md-nav__button md-logo" aria-label="Confidential Computing" data-md-component="logo">
      
  <img src="../img/SCONE-logo-white.png" alt="logo">

    </a>
    Confidential Computing
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          News and Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="News and Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          News and Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../news/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cc-telenovela/" class="md-nav__link">
        CC Soap Opera
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cc-university/" class="md-nav__link">
        CC University
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vm_vs_enclave/" class="md-nav__link">
        Confidential Computing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../advantages/" class="md-nav__link">
        Advantages of SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../whyscone/" class="md-nav__link">
        SCONE vs Intel SGX SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../technical_summary/" class="md-nav__link">
        Technical summary of SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../buildingApps/" class="md-nav__link">
        (No) Cross-Compilation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../curated_images/" class="md-nav__link">
        Curated Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../community_version/" class="md-nav__link">
        Community Version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Quick Start
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Quick Start" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Quick Start
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          sconectl
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="sconectl" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          sconectl
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_mesh_tutorial/" class="md-nav__link">
        Hello World
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconectl/" class="md-nav__link">
        sconectl cli
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install_sconectl/" class="md-nav__link">
        install sconectl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../service.html" class="md-nav__link">
        openAPI description service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mesh.html" class="md-nav__link">
        openAPI description mesh
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java_mesh_tutorial/" class="md-nav__link">
        Java Hello World
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Overview" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflows/" class="md-nav__link">
        Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify_hw_k8s/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lean_deployment/" class="md-nav__link">
        kubectl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify/" class="md-nav__link">
        Sconify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify_filetypes/" class="md-nav__link">
        File Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ee_sconify_image/" class="md-nav__link">
        Sconify Image SE
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multi-stakeholder-workflow/" class="md-nav__link">
        Multi-Stakeholder Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example_policy/" class="md-nav__link">
        Policy Update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microservices-demo/" class="md-nav__link">
        Boutique Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq_sconify/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_7" type="checkbox" id="__nav_3_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_7">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_7">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hostexample/" class="md-nav__link">
        Host Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dockerinstall/" class="md-nav__link">
        Installing docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sgxinstall/" class="md-nav__link">
        Installing Intel SGX driver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeinstall/" class="md-nav__link">
        Installing SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microcode/" class="md-nav__link">
        Updating CPU microcode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../windows10/" class="md-nav__link">
        Windows 10
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_8" type="checkbox" id="__nav_3_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_8">
          Workshop
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Workshop" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          Workshop
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/setup/" class="md-nav__link">
        getting access
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/details/" class="md-nav__link">
        background
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/hands_on_1/" class="md-nav__link">
        hands on 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/hands_on_2/" class="md-nav__link">
        hands on 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/next_steps/" class="md-nav__link">
        next steps
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_9" type="checkbox" id="__nav_3_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_9">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorial" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_9">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercises/" class="md-nav__link">
        Assignments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise0/" class="md-nav__link">
        Assignment 0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise1/" class="md-nav__link">
        Assignment 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise2/" class="md-nav__link">
        Assignment 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise3/" class="md-nav__link">
        Assignment 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise4/" class="md-nav__link">
        Assignment 4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise5/" class="md-nav__link">
        Assignment 5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/section_otp/" class="md-nav__link">
        Section 2 OTP
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_10" type="checkbox" id="__nav_3_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_10">
          SCONE Execution Modes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SCONE Execution Modes" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_10">
          <span class="md-nav__icon md-icon"></span>
          SCONE Execution Modes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../outline/" class="md-nav__link">
        Execution Modes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firstcontainer/" class="md-nav__link">
        Simulation Mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardwaremode/" class="md-nav__link">
        Hardware Mode
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kubernetes" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s_concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          SCONE Operator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SCONE Operator" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          SCONE Operator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1_scone_operator/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2_operator_installation/" class="md-nav__link">
        Reconciliation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../5_kubectl/" class="md-nav__link">
        Deploying CAS and Vault
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3_resource_definitions/" class="md-nav__link">
        Custom Resource Definitions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_3">
          Helm Charts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Helm Charts" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Helm Charts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_sgxdevplugin/" class="md-nav__link">
        Kubernetes SGX Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_cas/" class="md-nav__link">
        CAS Deploy & Attest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_las/" class="md-nav__link">
        LAS Deploy & Platforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_mariadb/" class="md-nav__link">
        MariaDB Deploy & Attest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_teemon/" class="md-nav__link">
        TEEMon Deployment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4">
          Dashboards
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Dashboards" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Dashboards
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_dashboard/" class="md-nav__link">
        Helm Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s_dashboard/" class="md-nav__link">
        Kubernetes Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubeapps/" class="md-nav__link">
        Kubeapps
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_5">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Hello World Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Hello World Kubernetes
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-you-begin" class="md-nav__link">
    Before you begin
  </a>
  
    <nav class="md-nav" aria-label="Before you begin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-kubernetes-cluster-and-a-separate-namespace" class="md-nav__link">
    A Kubernetes cluster and a separate namespace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-sgx-device-plugin" class="md-nav__link">
    Install SGX device plugin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-yourself-a-workspace" class="md-nav__link">
    Set yourself a workspace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-a-configuration-and-attestation-service-cas" class="md-nav__link">
    Set a Configuration and Attestation Service (CAS)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    Hello World!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-with-remote-attestation" class="md-nav__link">
    Run with remote attestation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tls-with-certificates-auto-generated-by-cas" class="md-nav__link">
    TLS with certificates auto-generated by CAS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encrypt-your-source-code" class="md-nav__link">
    Encrypt your source code
  </a>
  
    <nav class="md-nav" aria-label="Encrypt your source code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#encrypt-the-source-code-and-filesystem" class="md-nav__link">
    Encrypt the source code and filesystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-the-new-image" class="md-nav__link">
    Build the new image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-in-kubernetes" class="md-nav__link">
    Run in Kubernetes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clean-up" class="md-nav__link">
    Clean up
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../azure/scone-pyspark/" class="md-nav__link">
        PySpark on Azure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Configuration & Attestation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration & Attestation" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Configuration & Attestation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CASOverview/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas_intro/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_session_lang_0_3/" class="md-nav__link">
        Policy Language
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          Policy Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Policy Examples" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Policy Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../auditLog/" class="md-nav__link">
        Audit Log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas_blender_example/" class="md-nav__link">
        Posting Policies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_cli-intro/" class="md-nav__link">
        CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../envcas/" class="md-nav__link">
        envcas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../platform_attestation/" class="md-nav__link">
        Platform-based attestation
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_6" type="checkbox" id="__nav_5_4_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_6">
          Secure Arguments
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Secure Arguments" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_4_6">
          <span class="md-nav__icon md-icon"></span>
          Secure Arguments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../print-arg-env/" class="md-nav__link">
        Part 1 - print arguments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../print-arg-env-p2/" class="md-nav__link">
        Part 2 - session hash
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../encrypted_vol/" class="md-nav__link">
        Encrypted Volume
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone-signer-example/" class="md-nav__link">
        Binary Translation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../host_arguments/" class="md-nav__link">
        Host Arguments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../otp_demo/" class="md-nav__link">
        One-time Passwords
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../EncryptedWordCount/" class="md-nav__link">
        Encrypted Code and Input
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../namespace/" class="md-nav__link">
        Namespaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network_shield/" class="md-nav__link">
        Network Shield
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_5">
          Alternative CAS deployments
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Alternative CAS deployments" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          Alternative CAS deployments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_production/" class="md-nav__link">
        CAS with helm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_for_development/" class="md-nav__link">
        CAS with docker compose
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas-backup-controller/" class="md-nav__link">
        CAS Backup Controller for Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas-backup-controller-quick-start/" class="md-nav__link">
        CAS Backup Controller Quick Start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_config/" class="md-nav__link">
        CAS Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../public-CAS/" class="md-nav__link">
        Public CAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../LASIntro/" class="md-nav__link">
        Starting LAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../self-provisioned-cas/" class="md-nav__link">
        Self-Provisioned CAS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          SconeApps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SconeApps" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          SconeApps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/" class="md-nav__link">
        SconeApps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_database/" class="md-nav__link">
        database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_maxscale/" class="md-nav__link">
        maxscale
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_memcached/" class="md-nav__link">
        memcached
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_nginx/" class="md-nav__link">
        nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_openvino/" class="md-nav__link">
        openvino
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_pytorch/" class="md-nav__link">
        pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_spark/" class="md-nav__link">
        spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_tensorflow/" class="md-nav__link">
        tensorflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_tensorflowlite/" class="md-nav__link">
        tensorflowlite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_zookeeper/" class="md-nav__link">
        zookeeper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          DevOps Workflows
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DevOps Workflows" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          DevOps Workflows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/" class="md-nav__link">
        Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mitigation/" class="md-nav__link">
        Attack mitigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sadvisories/" class="md-nav__link">
        Security advisories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software_updates/" class="md-nav__link">
        Software updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone-signer/" class="md-nav__link">
        Signing of enclaves
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../edmm/" class="md-nav__link">
        EDMM support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_semantic_versioning/" class="md-nav__link">
        SCONE versioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../attestation_by_client/" class="md-nav__link">
        Attestation by client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../technotes/" class="md-nav__link">
        Technotes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Azure Kubernetes Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Azure Kubernetes Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Azure Kubernetes Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks/" class="md-nav__link">
        Confidential AKS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../azure/scone-playground/" class="md-nav__link">
        SCONE Playground on Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks/flask_demo/" class="md-nav__link">
        Flask Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_images/" class="md-nav__link">
        Python Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_integration/" class="md-nav__link">
        AKS Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MicrosoftAzureIntegrations/" class="md-nav__link">
        AKS Integration Tutorial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_charts/" class="md-nav__link">
        AKS Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_setup/" class="md-nav__link">
        AKS Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Use Cases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Use Cases" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Use Cases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usecases/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secure_document_management/" class="md-nav__link">
        Confidential Document Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../federated_machine_learning/" class="md-nav__link">
        Federated Machine Learning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shared_source_code/" class="md-nav__link">
        Confidential Code Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blender/" class="md-nav__link">
        Blender
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pyspark/" class="md-nav__link">
        PySpark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow/" class="md-nav__link">
        TensorFlow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflowlite/" class="md-nav__link">
        TensorFlow Lite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openvino/" class="md-nav__link">
        OpenVino
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vault/" class="md-nav__link">
        Vault
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone-use-case-overview/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secure_remote_execution/" class="md-nav__link">
        Secure Remote Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dockerfileexample/" class="md-nav__link">
        Dockerfile Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multistagebuild/" class="md-nav__link">
        Multi-stage build
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../groupcacheUseCase/" class="md-nav__link">
        GO example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../memory_dump/" class="md-nav__link">
        Finding Secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dapps/" class="md-nav__link">
        Trusted DApps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flask_demo/" class="md-nav__link">
        Flask Demo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Sign up
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Sign up" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Sign up
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../registry/" class="md-nav__link">
        Scontain Registy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          More
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="More" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          More
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_1" type="checkbox" id="__nav_11_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_1">
          Client Docu
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Client Docu" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_1">
          <span class="md-nav__icon md-icon"></span>
          Client Docu
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../iexec_sconify_image/" class="md-nav__link">
        iExec Sconify Image
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_2" type="checkbox" id="__nav_11_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_2">
          Language Support
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Language Support" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_2">
          <span class="md-nav__icon md-icon"></span>
          Language Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../C/" class="md-nav__link">
        C
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mono/" class="md-nav__link">
        C#
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../C%2B%2B/" class="md-nav__link">
        C++
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Fortran/" class="md-nav__link">
        Fortran
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../GO/" class="md-nav__link">
        GO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Java/" class="md-nav__link">
        Java
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Running_Java_Applications_in_Scone_with_remote_attestation/" class="md-nav__link">
        Java with remote attestation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Python/" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pypyscone/" class="md-nav__link">
        PyPy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mono/" class="md-nav__link">
        Mono
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Nodejs/" class="md-nav__link">
        Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node-example/" class="md-nav__link">
        Node example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/" class="md-nav__link">
        R
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Rust/" class="md-nav__link">
        Rust
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_3" type="checkbox" id="__nav_11_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_3">
          IDE Integration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IDE Integration" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_3">
          <span class="md-nav__icon md-icon"></span>
          IDE Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../eclipse/" class="md-nav__link">
        Eclipse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_vscode/" class="md-nav__link">
        Visual Studio Code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_4" type="checkbox" id="__nav_11_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_4">
          Command Line Interface
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command Line Interface" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_4">
          <span class="md-nav__icon md-icon"></span>
          Command Line Interface
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_cli/" class="md-nav__link">
        CLI Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_Fileshield/" class="md-nav__link">
        scone fspf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../binary_fs/" class="md-nav__link">
        scone binary fs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_ENV/" class="md-nav__link">
        environment variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MrEnclave/" class="md-nav__link">
        MrEnclave
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_affinity/" class="md-nav__link">
        affinity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_5" type="checkbox" id="__nav_11_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_5">
          Performance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Performance" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_5">
          <span class="md-nav__icon md-icon"></span>
          Performance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../teemon/" class="md-nav__link">
        Monitoring tool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_6" type="checkbox" id="__nav_11_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_6">
          Background
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Background" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_6">
          <span class="md-nav__icon md-icon"></span>
          Background
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appsecurity/" class="md-nav__link">
        Application-Oriented Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../background/" class="md-nav__link">
        SCONE Background
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_7" type="checkbox" id="__nav_11_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_7">
          Security
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Security" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_7">
          <span class="md-nav__icon md-icon"></span>
          Security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../S1_threat_model/" class="md-nav__link">
        Threat Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../S2_random_numbers/" class="md-nav__link">
        Random numbers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../S3_governance/" class="md-nav__link">
        Governance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../S4_attestation/" class="md-nav__link">
        Attestation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../S5_debug_mode/" class="md-nav__link">
        Debug Mode
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_Publications/" class="md-nav__link">
        Publications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aboutScone/" class="md-nav__link">
        About
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_11" type="checkbox" id="__nav_11_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_11">
          Releases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Releases" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_11">
          <span class="md-nav__icon md-icon"></span>
          Releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.8/" class="md-nav__link">
        SCONE 5.8.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.7/" class="md-nav__link">
        SCONE 5.7.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.6/" class="md-nav__link">
        SCONE 5.6.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.5/" class="md-nav__link">
        SCONE 5.5.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.4/" class="md-nav__link">
        SCONE 5.4.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-you-begin" class="md-nav__link">
    Before you begin
  </a>
  
    <nav class="md-nav" aria-label="Before you begin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-kubernetes-cluster-and-a-separate-namespace" class="md-nav__link">
    A Kubernetes cluster and a separate namespace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-sgx-device-plugin" class="md-nav__link">
    Install SGX device plugin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-yourself-a-workspace" class="md-nav__link">
    Set yourself a workspace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-a-configuration-and-attestation-service-cas" class="md-nav__link">
    Set a Configuration and Attestation Service (CAS)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    Hello World!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-with-remote-attestation" class="md-nav__link">
    Run with remote attestation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tls-with-certificates-auto-generated-by-cas" class="md-nav__link">
    TLS with certificates auto-generated by CAS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encrypt-your-source-code" class="md-nav__link">
    Encrypt your source code
  </a>
  
    <nav class="md-nav" aria-label="Encrypt your source code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#encrypt-the-source-code-and-filesystem" class="md-nav__link">
    Encrypt the source code and filesystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-the-new-image" class="md-nav__link">
    Build the new image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-in-kubernetes" class="md-nav__link">
    Run in Kubernetes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clean-up" class="md-nav__link">
    Clean up
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="scone-on-kubernetes">SCONE on Kubernetes</h1>
<p>This tutorial shows how to deploy confidential applications with the help of SCONE in a  Kubernetes cluster.</p>
<p>The tutorial is organized as follows:</p>
<ol>
<li><a href="#before-you-begin">Before you begin</a></li>
<li><a href="#hello-world">Hello World!</a></li>
<li><a href="#run-with-remote-attestation">Hello World! with remote attestation</a></li>
<li><a href="#tls-with-certificates-auto-generated-by-cas">Hello World! with TLS certificates auto-generated by CAS</a></li>
<li><a href="#encrypt-your-source-code">Encrypt your source code</a></li>
</ol>
<h3 id="before-you-begin">Before you begin</h3>
<h5 id="a-kubernetes-cluster-and-a-separate-namespace">A Kubernetes cluster and a separate namespace</h5>
<p>This tutorial assumes that you have access to a Kubernetes cluster (through <code>kubectl</code>), and that you are deploying everything to a separate namespace, called <code>hello-scone</code>. Namespaces are a good way to separate resources, not to mention how it makes the clean-up process a lot easier at the end:</p>
<div class="highlight"><pre><span></span><code>kubectl create namespace hello-scone
</code></pre></div>
<p>Don't forget to specify it by adding <code>-n hello-scone</code> to your <code>kubectl</code> commands.</p>
<h5 id="install-sgx-device-plugin">Install SGX device plugin</h5>
<p>SGX applications need access to the Intel SGX driver, a char device located at the host machine. The device name might differ depending on the driver implementation, but the most common ones are <code>/dev/sgx/enclave</code> (DCAP) and <code>/dev/isgx</code> (IAS/out-of-tree). Starting on 5.11, the Linux kernel includes the SGX devices at <code>/dev/sgx_enclave</code> and <code>/dev/sgx_provision</code>. If you are in a cluster context, you need the right device mounted into the container. NOTE: For IAS drivers, it can be quite difficult to get SGX to run: Please use DCAP-capable servers instead.</p>
<p>We provide an SGX device plugin for Kubernetes, which lets you request the SGX driver through the <code>resource.limits</code> field (just like CPU or RAM). The device plugin handles different driver names transparently, and also allows your applications to run unprivileged (which is always good for security).</p>
<p>The SGX device plugin can be easily installed with the help of Helm:</p>
<div class="highlight"><pre><span></span><code>helm install sgxdevplugin sconeapps/sgxdevplugin
</code></pre></div>
<p>Please refer to <a href="https://sconedocs.github.io/helm_sgxdevplugin/">Kubernetes SGX plugin documentation</a> for more details and Helm setup instructions.</p>
<p>This tutorial assumes that you have the SGX device plugin running on your cluster.</p>
<blockquote>
<p><strong>NOTE</strong>: If you don't have Intel SGX in your cluster, you can run SCONE in simulated mode by setting the environment variable <code>SCONE_MODE=sim</code>. Intel SGX security guarantees do not apply in this case.</p>
</blockquote>
<h5 id="set-yourself-a-workspace">Set yourself a workspace</h5>
<p>A lot of files are created through this tutorial, and they have to be somewhere. Choose whatever directory you want to run the commands below, but it might be a good idea to create a temporary one:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> <span class="k">$(</span>mktemp -d<span class="k">)</span>
</code></pre></div>
<p>We use the following base image:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">BASE_IMAGE</span><span class="o">=</span>registry.scontain.com/sconecuratedimages/kubernetes:python-3.7.3-alpine3.10-scone5.6.0
</code></pre></div>
<p>Have fun!</p>
<h5 id="set-a-configuration-and-attestation-service-cas">Set a Configuration and Attestation Service (CAS)</h5>
<p>When remote attestation enters the scene, you will need a CAS to provide attestation, configuration and secrets. Export now the address of your CAS. If you don't have your own CAS, use our <a href="https://sconedocs.github.io/public-CAS/">public one</a> at scone-cas.cf:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">SCONE_CAS_ADDR</span><span class="o">=</span>scone-cas.cf
</code></pre></div>
<p>Now, generate client certificates (needed to submit a new policy (a.k.a. session) to CAS):</p>
<div class="highlight"><pre><span></span><code>mkdir -p conf
<span class="k">if</span> <span class="o">[[</span> ! -f conf/client.crt <span class="o">||</span> ! -f conf/client-key.key  <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
    openssl req -x509 -newkey rsa:4096 -out conf/client.crt -keyout conf/client-key.key  -days <span class="m">31</span> -nodes -sha256 -subj <span class="s2">&quot;/C=US/ST=Dresden/L=Saxony/O=Scontain/OU=Org/CN=www.scontain.com&quot;</span> -reqexts SAN -extensions SAN -config &lt;<span class="o">(</span>cat /etc/ssl/openssl.cnf <span class="se">\</span>
&lt;<span class="o">(</span><span class="nb">printf</span> <span class="s1">&#39;[SAN]\nsubjectAltName=DNS:www.scontain.com&#39;</span><span class="o">))</span>
<span class="k">fi</span>
</code></pre></div>
<p>Create a <a href="https://sconedocs.github.io/namespace/">CAS namespace</a> for your sessions.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">NS</span><span class="o">=</span>HelloWorld-<span class="nv">$RANDOM</span>-<span class="nv">$RANDOM</span>
cat &gt; namespace.yaml <span class="s">&lt;&lt;EOF</span>
<span class="s">name: $NS</span>
<span class="s">version: &quot;0.3&quot;</span>

<span class="s">access_policy:</span>
<span class="s">  read:</span>
<span class="s">   - CREATOR</span>
<span class="s">  update:</span>
<span class="s">   - CREATOR</span>
<span class="s">  create_sessions:</span>
<span class="s">   - CREATOR</span>

<span class="s">EOF</span>
curl -k -s --cert conf/client.crt --key conf/client-key.key --data-binary @namespace.yaml -X POST https://<span class="nv">$SCONE_CAS_ADDR</span>:8081/v1/sessions
</code></pre></div>
<h3 id="hello-world">Hello World!</h3>
<p>Let's start by writing a simple Python webserver: it only returns the message <code>Hello World!</code> and the value of the environment variable <code>GREETING</code>.</p>
<div class="highlight"><pre><span></span><code>mkdir -p app
cat &gt; app/server.py <span class="s">&lt;&lt; EOF</span>
<span class="s">from http.server import HTTPServer</span>
<span class="s">from http.server import BaseHTTPRequestHandler</span>
<span class="s">import os</span>


<span class="s">class HTTPHelloWorldHandler(BaseHTTPRequestHandler):</span>
<span class="s">    def do_GET(self):</span>
<span class="s">        &quot;&quot;&quot;say &quot;Hello World!&quot; and the value of \`GREETING\` env. variable.&quot;&quot;&quot;</span>
<span class="s">        self.send_response(200)</span>
<span class="s">        self.end_headers()</span>
<span class="s">        self.wfile.write(b&#39;Hello World!\n\$GREETING is: %s\n&#39; % (os.getenv(&#39;GREETING&#39;, &#39;no greeting :(&#39;).encode()))</span>


<span class="s">httpd = HTTPServer((&#39;0.0.0.0&#39;, 8080), HTTPHelloWorldHandler)</span>

<span class="s">print(&quot;Starting server&quot;)</span>

<span class="s">httpd.serve_forever()</span>
<span class="s">EOF</span>
</code></pre></div>
<p>To build this application with SCONE, simply use our Python 3.7 curated image as base. The Python interpreter will run inside of an enclave!</p>
<div class="highlight"><pre><span></span><code>cat &gt; Dockerfile <span class="s">&lt;&lt; EOF</span>
<span class="s">FROM $BASE_IMAGE</span>
<span class="s">EXPOSE 8080</span>
<span class="s">COPY app /app</span>
<span class="s">CMD [ &quot;python3&quot;, &quot;/app/server.py&quot; ]</span>
<span class="s">EOF</span>
</code></pre></div>
<p>Set the name of the image. <strong>You must have push permissions to the choosen repo!</strong> If you already have an image, skip the building process.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">IMAGE</span><span class="o">=</span>registry.scontain.com/sconecuratedimages/kubernetes:hello-k8s-scone0.1
docker build --pull . -t <span class="nv">$IMAGE</span> <span class="o">&amp;&amp;</span> docker push <span class="nv">$IMAGE</span>
</code></pre></div>
<p>Deploying the application with Kubernetes is also simple: we just need a deployment and a service exposing it.</p>
<p>Write the Kubernetes manifests:</p>
<div class="highlight"><pre><span></span><code>cat &gt; app.yaml <span class="s">&lt;&lt; EOF</span>
<span class="s">apiVersion: apps/v1</span>
<span class="s">kind: Deployment</span>
<span class="s">metadata:</span>
<span class="s">  name: hello-world</span>
<span class="s">spec:</span>
<span class="s">  selector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      run: hello-world</span>
<span class="s">  replicas: 1</span>
<span class="s">  template:</span>
<span class="s">    metadata:</span>
<span class="s">      labels:</span>
<span class="s">        run: hello-world</span>
<span class="s">    spec:</span>
<span class="s">      containers:</span>
<span class="s">      - name: hello-world</span>
<span class="s">        image: $IMAGE</span>
<span class="s">        imagePullPolicy: Always</span>
<span class="s">        ports:</span>
<span class="s">        - containerPort: 8080</span>
<span class="s">        env:</span>
<span class="s">        - name: GREETING</span>
<span class="s">          value: howdy!</span>
<span class="s">        resources:</span>
<span class="s">          limits:</span>
<span class="s">            sgx.intel.com/enclave: 1</span>
<span class="s">---</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Service</span>
<span class="s">metadata:</span>
<span class="s">  name: hello-world</span>
<span class="s">  labels:</span>
<span class="s">    run: hello-world</span>
<span class="s">spec:</span>
<span class="s">  ports:</span>
<span class="s">  - port: 8080</span>
<span class="s">    protocol: TCP</span>
<span class="s">  selector:</span>
<span class="s">    run: hello-world</span>
<span class="s">EOF</span>
</code></pre></div>
<p>Now, submit the manifests to the Kubernetes API, using <code>kubectl</code> command:</p>
<div class="highlight"><pre><span></span><code>kubectl create -f app.yaml -n hello-scone
</code></pre></div>
<p>Now that everything is deployed, you can access your Python app running on your cluster. Forward your local <code>8080</code> port to the service port:</p>
<div class="highlight"><pre><span></span><code>kubectl port-forward svc/hello-world <span class="m">8080</span>:8080 -n hello-scone
</code></pre></div>
<p>The application will be available at your <a href="http://localhost:8080">http://localhost:8080</a>:</p>
<div class="highlight"><pre><span></span><code>$ curl localhost:8080
Hello World!
<span class="nv">$GREETING</span> is: howdy!
</code></pre></div>
<h3 id="run-with-remote-attestation">Run with remote attestation</h3>
<p>SCONE provides a remote attestation feature, so you make sure your application is running unmodified. It's also possible to have secrets and configuration delivered directly to the attested enclave!</p>
<p>The remote attestation is provided by two components: LAS (local attestation service, runs on the cluster) and CAS (a trusted service that runs elsewhere. We provide a public one in scone-cas.cf).</p>
<p>You can deploy LAS to your cluster through our LAS Helm chart:</p>
<div class="highlight"><pre><span></span><code>helm install las sconeapps/las
</code></pre></div>
<p>To setup remote attestation, you will need a session file and the <code>MRENCLAVE</code>, which is a unique signature of your application. Extract <code>MRENCLAVE</code> of your application by running its container with the environment variable <code>SCONE_HASH</code> set to <code>1</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">MRENCLAVE</span><span class="o">=</span><span class="k">$(</span>docker run -i --rm -e <span class="s2">&quot;SCONE_HASH=1&quot;</span> <span class="nv">$IMAGE</span><span class="k">)</span>
</code></pre></div>
<p>Then create a session file. Please note that we are also defining a secret <code>GREETING</code>. Only the <code>MRENCLAVES</code> registered in this session file will be allowed to see such secret.</p>
<div class="highlight"><pre><span></span><code>cat &gt; session.yaml <span class="s">&lt;&lt; EOF</span>
<span class="s">name: $NS/hello-k8s-scone</span>
<span class="s">version: &quot;0.3&quot;</span>

<span class="s">security:</span>
<span class="s">  attestation:</span>
<span class="s">    tolerate: [debug-mode, hyperthreading, outdated-tcb, software-hardening-needed]</span>
<span class="s">    ignore_advisories: &quot;*&quot;</span>

<span class="s">services:</span>
<span class="s">   - name: application</span>
<span class="s">     mrenclaves: [$MRENCLAVE]</span>
<span class="s">     command: python3 /app/server.py</span>
<span class="s">     pwd: /</span>
<span class="s">     environment:</span>
<span class="s">        GREETING: hello from SCONE!!!</span>
<span class="s">EOF</span>
</code></pre></div>
<p>Now, <a href="https://sconedocs.github.io/cas_blender_example/">post the session file</a> to your CAS of choice:</p>
<div class="highlight"><pre><span></span><code>curl -k -s --cert conf/client.crt --key conf/client-key.key --data-binary @session.yaml -X POST https://<span class="nv">$SCONE_CAS_ADDR</span>:8081/v1/sessions
</code></pre></div>
<p>Once you submit the session file, you just need to inject the CAS address into your Deployment manifest. To showcase that, we're creating a new Deployment:</p>
<div class="highlight"><pre><span></span><code>cat &gt; attested-app.yaml <span class="s">&lt;&lt; EOF</span>
<span class="s">apiVersion: apps/v1</span>
<span class="s">kind: Deployment</span>
<span class="s">metadata:</span>
<span class="s">  name: attested-hello-world</span>
<span class="s">spec:</span>
<span class="s">  selector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      run: attested-hello-world</span>
<span class="s">  replicas: 1</span>
<span class="s">  template:</span>
<span class="s">    metadata:</span>
<span class="s">      labels:</span>
<span class="s">        run: attested-hello-world</span>
<span class="s">    spec:</span>
<span class="s">      containers:</span>
<span class="s">      - name: attested-hello-world</span>
<span class="s">        image: $IMAGE</span>
<span class="s">        imagePullPolicy: Always</span>
<span class="s">        ports:</span>
<span class="s">        - containerPort: 8080</span>
<span class="s">        env:</span>
<span class="s">        - name: SCONE_CAS_ADDR</span>
<span class="s">          value: $SCONE_CAS_ADDR</span>
<span class="s">        - name: SCONE_CONFIG_ID</span>
<span class="s">          value: $NS/hello-k8s-scone/application</span>
<span class="s">        - name: SCONE_LAS_ADDR</span>
<span class="s">          valueFrom:</span>
<span class="s">            fieldRef:</span>
<span class="s">              fieldPath: status.hostIP</span>
<span class="s">        resources:</span>
<span class="s">          limits:</span>
<span class="s">            sgx.intel.com/enclave: 1</span>
<span class="s">---</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Service</span>
<span class="s">metadata:</span>
<span class="s">  name: attested-hello-world</span>
<span class="s">  labels:</span>
<span class="s">    run: attested-hello-world</span>
<span class="s">spec:</span>
<span class="s">  ports:</span>
<span class="s">  - port: 8080</span>
<span class="s">    protocol: TCP</span>
<span class="s">  selector:</span>
<span class="s">    run: attested-hello-world</span>
<span class="s">EOF</span>
</code></pre></div>
<p><strong>NOTE</strong>: The environment defined in the Kubernetes manifest won't be considered once your app is attested. The environment will be retrieved from your session file.</p>
<p>Deploy your attested app:</p>
<div class="highlight"><pre><span></span><code>kubectl create -f attested-app.yaml -n hello-scone
</code></pre></div>
<p>Once again, forward your local port 8082 to the service port:</p>
<div class="highlight"><pre><span></span><code>kubectl port-forward svc/attested-hello-world <span class="m">8082</span>:8080 -n hello-scone
</code></pre></div>
<p>The attested application will be available at your <a href="http://localhost:8082">http://localhost:8082</a>:</p>
<div class="highlight"><pre><span></span><code>$ curl localhost:8082
Hello World!
<span class="nv">$GREETING</span> is: hello from SCONE!!!
</code></pre></div>
<h3 id="tls-with-certificates-auto-generated-by-cas">TLS with certificates auto-generated by CAS</h3>
<p>The CAS service can also generate secrets and certificates automatically. Combined with access policies, it means that such auto-generated secrets and certificates will be seen only by certain applications. No human (e.g. a system operator) will ever see them: they only exist inside of SGX enclaves.</p>
<p>To showcase such feature, let's use the same application as last example. But now, we serve the traffic over TLS, and we let CAS generate the server certificates.</p>
<p>Start by rewriting our application to serve with TLS:</p>
<div class="highlight"><pre><span></span><code>cat &gt; app/server-tls.py <span class="s">&lt;&lt; EOF</span>
<span class="s">from http.server import HTTPServer</span>
<span class="s">from http.server import BaseHTTPRequestHandler</span>
<span class="s">import os</span>
<span class="s">import socket</span>
<span class="s">import ssl</span>


<span class="s">class HTTPHelloWorldHandler(BaseHTTPRequestHandler):</span>
<span class="s">    def do_GET(self):</span>
<span class="s">        &quot;&quot;&quot;say &quot;Hello World!&quot; and the value of \`GREETING\` env. variable.&quot;&quot;&quot;</span>
<span class="s">        self.send_response(200)</span>
<span class="s">        self.end_headers()</span>
<span class="s">        self.wfile.write(b&#39;Hello World!\n\$GREETING is: %s\n&#39; % (os.getenv(&#39;GREETING&#39;, &#39;no greeting :(&#39;).encode()))</span>


<span class="s">httpd = HTTPServer((&#39;0.0.0.0&#39;, 4443), HTTPHelloWorldHandler)</span>


<span class="s">httpd.socket = ssl.wrap_socket(httpd.socket,</span>
<span class="s">                               keyfile=&quot;/app/key.pem&quot;,</span>
<span class="s">                               certfile=&quot;/app/cert.pem&quot;,</span>
<span class="s">                               server_side=True)</span>

<span class="s">print(&quot;Starting server&quot;)</span>

<span class="s">httpd.serve_forever()</span>
<span class="s">EOF</span>
</code></pre></div>
<p>Our updated Dockerfile looks like this:</p>
<div class="highlight"><pre><span></span><code>cat &gt; Dockerfile <span class="s">&lt;&lt; EOF</span>
<span class="s">FROM $BASE_IMAGE</span>
<span class="s">EXPOSE 4443</span>
<span class="s">COPY app /app</span>
<span class="s">CMD [ &quot;python3&quot; ]</span>
<span class="s">EOF</span>
</code></pre></div>
<p>Build the updated image:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">IMAGE</span><span class="o">=</span>registry.scontain.com/sconecuratedimages/kubernetes:hello-k8s-scone0.2
docker build --pull . -t <span class="nv">$IMAGE</span> <span class="o">&amp;&amp;</span> docker push <span class="nv">$IMAGE</span>
</code></pre></div>
<p>The magic is done in the session file. First, extract the <code>MRENCLAVE</code> again:</p>
<div class="highlight"><pre><span></span><code><span class="nv">MRENCLAVE</span><span class="o">=</span><span class="k">$(</span>docker run -i --rm -e <span class="s2">&quot;SCONE_HASH=1&quot;</span> <span class="nv">$IMAGE</span><span class="k">)</span>
</code></pre></div>
<p>Now, create a Session file to be submitted to CAS. The certificates are defined in the <code>secrets</code> field, and are injected into the filesystem through <code>images.injection_files</code>:</p>
<div class="highlight"><pre><span></span><code>cat &gt; session-tls-certs.yaml <span class="s">&lt;&lt; EOF</span>
<span class="s">name: $NS/hello-k8s-scone-tls-certs</span>
<span class="s">version: &quot;0.3&quot;</span>

<span class="s">security:</span>
<span class="s">  attestation:</span>
<span class="s">    tolerate: [debug-mode, hyperthreading, outdated-tcb, software-hardening-needed]</span>
<span class="s">    ignore_advisories: &quot;*&quot;</span>

<span class="s">services:</span>
<span class="s">   - name: application</span>
<span class="s">     image_name: application_image</span>
<span class="s">     mrenclaves: [$MRENCLAVE]</span>
<span class="s">     command: python3 /app/server-tls.py</span>
<span class="s">     pwd: /</span>
<span class="s">     environment:</span>
<span class="s">        GREETING: hello from SCONE with TLS and auto-generated certs!!!</span>

<span class="s">images:</span>
<span class="s">   - name: application_image</span>
<span class="s">     injection_files:</span>
<span class="s">       - path:  /app/cert.pem</span>
<span class="s">         content: \$\$SCONE::SERVER_CERT:crt\$\$</span>
<span class="s">       - path: /app/key.pem</span>
<span class="s">         content: \$\$SCONE::SERVER_CERT:privatekey\$\$</span>

<span class="s">secrets:</span>
<span class="s">   - name: SERVER_KEY</span>
<span class="s">     kind: private-key</span>
<span class="s">   - name: SERVER_CERT</span>
<span class="s">     kind: x509</span>
<span class="s">     private_key: SERVER_KEY</span>
<span class="s">EOF</span>
</code></pre></div>
<p><a href="https://sconedocs.github.io/cas_blender_example/">Post the session file</a> to your CAS of choice:</p>
<div class="highlight"><pre><span></span><code>curl -k -s --cert conf/client.crt --key conf/client-key.key --data-binary @session-tls-certs.yaml -X POST https://<span class="nv">$SCONE_CAS_ADDR</span>:8081/session
</code></pre></div>
<p>The steps to run your app are similar to before: let's create a Kubernetes manifest and submit it.</p>
<div class="highlight"><pre><span></span><code>cat &gt; attested-app-tls-certs.yaml <span class="s">&lt;&lt; EOF</span>
<span class="s">apiVersion: apps/v1</span>
<span class="s">kind: Deployment</span>
<span class="s">metadata:</span>
<span class="s">  name: attested-hello-world-tls-certs</span>
<span class="s">spec:</span>
<span class="s">  selector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      run: attested-hello-world-tls-certs</span>
<span class="s">  replicas: 1</span>
<span class="s">  template:</span>
<span class="s">    metadata:</span>
<span class="s">      labels:</span>
<span class="s">        run: attested-hello-world-tls-certs</span>
<span class="s">    spec:</span>
<span class="s">      containers:</span>
<span class="s">      - name: attested-hello-world-tls-certs</span>
<span class="s">        image: $IMAGE</span>
<span class="s">        imagePullPolicy: Always</span>
<span class="s">        ports:</span>
<span class="s">        - containerPort: 4443</span>
<span class="s">        env:</span>
<span class="s">        - name: SCONE_CAS_ADDR</span>
<span class="s">          value: $SCONE_CAS_ADDR</span>
<span class="s">        - name: SCONE_CONFIG_ID</span>
<span class="s">          value: $NS/hello-k8s-scone-tls-certs/application</span>
<span class="s">        - name: SCONE_LAS_ADDR</span>
<span class="s">          valueFrom:</span>
<span class="s">            fieldRef:</span>
<span class="s">              fieldPath: status.hostIP</span>
<span class="s">        resources:</span>
<span class="s">          limits:</span>
<span class="s">            sgx.intel.com/enclave: 1</span>
<span class="s">---</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Service</span>
<span class="s">metadata:</span>
<span class="s">  name: attested-hello-world-tls-certs</span>
<span class="s">  labels:</span>
<span class="s">    run: attested-hello-world-tls-certs</span>
<span class="s">spec:</span>
<span class="s">  ports:</span>
<span class="s">  - port: 4443</span>
<span class="s">    protocol: TCP</span>
<span class="s">  selector:</span>
<span class="s">    run: attested-hello-world-tls-certs</span>
<span class="s">EOF</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl create -f attested-app-tls-certs.yaml -n hello-scone
</code></pre></div>
<p>Now it's time to access your app. Again, forward the traffic to its service:</p>
<div class="highlight"><pre><span></span><code>kubectl port-forward svc/attested-hello-world-tls-certs <span class="m">8083</span>:4443 -n hello-scone
</code></pre></div>
<p>And send a request:</p>
<div class="highlight"><pre><span></span><code>$ curl -k https://localhost:8083
Hello World!
<span class="nv">$GREETING</span> is: hello from SCONE with TLS and auto-generated certs!!!
</code></pre></div>
<h3 id="encrypt-your-source-code">Encrypt your source code</h3>
<p>Moving further, you can run the exact same application, but now the server source code will be encrypted using SCONE's <a href="https://sconedocs.github.io/SCONE_Fileshield/">file protection</a> feature, and only the Python interpreter that you register will be able to read them (after being attested by CAS).</p>
<h5 id="encrypt-the-source-code-and-filesystem">Encrypt the source code and filesystem</h5>
<p>Let's encrypt the source code using SCONE's Fileshield. Run a SCONE CLI container with access to the files:</p>
<div class="highlight"><pre><span></span><code>docker run -it --rm -e <span class="nv">SCONE_MODE</span><span class="o">=</span>sim -v <span class="nv">$PWD</span>:/tutorial <span class="nv">$BASE_IMAGE</span> sh
</code></pre></div>
<p>Inside the container, create an encrypted region <code>/app</code> and add all the files in <code>/tutorial/app</code> (the plain files) to it. Lastly, encrypt the key itself.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> /tutorial
rm -rf app_image <span class="o">&amp;&amp;</span> mkdir -p app_image/app
<span class="nb">cd</span> app_image
scone fspf create fspf.pb
scone fspf addr fspf.pb / --not-protected --kernel /
scone fspf addr fspf.pb /app --encrypted --kernel /app
scone fspf addf fspf.pb /app /tutorial/app /tutorial/app_image/app
scone fspf encrypt fspf.pb &gt; /tutorial/app/keytag
</code></pre></div>
<p>The contents of <code>/tutorial/app_image/app</code> are now encrypted. Try to <code>cat</code> them from inside the container:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">cd</span> /tutorial/app_image/app <span class="o">&amp;&amp;</span> ls
server-tls.py
$ cat server-tls.py
$<span class="o">(</span>E@
IdZg3ucmZ.$__!<span class="o">)</span>S<span class="o">(</span> XW<span class="o">{</span>$<span class="p">|</span>H!<span class="p">;</span><span class="m">2</span>&gt;@z4-h3ist7&lt;&gt;H4:<span class="o">(</span><span class="nv">9</span><span class="o">=</span>a<span class="o">)</span>j?pq3<span class="o">}</span>Ha<span class="p">|</span>w-q96o9Evv*$TU/vGT1&lt;C#p<span class="p">|</span>iA_!6Fw@
                   CJ+818
</code></pre></div>
<h5 id="build-the-new-image">Build the new image</h5>
<p>You can now exit the container. Let's build the server image with our files, now encrypted:</p>
<div class="highlight"><pre><span></span><code>cat &gt; Dockerfile <span class="s">&lt;&lt; EOF</span>
<span class="s">FROM $BASE_IMAGE</span>
<span class="s">EXPOSE 4443</span>
<span class="s">COPY app_image /</span>
<span class="s">CMD [ &quot;python3&quot; ]</span>
<span class="s">EOF</span>
</code></pre></div>
<p>Choose the new image name and build it:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">IMAGE</span><span class="o">=</span>registry.scontain.com/sconecuratedimages/kubernetes:hello-k8s-scone0.3
docker build --pull . -t <span class="nv">$IMAGE</span> <span class="o">&amp;&amp;</span> docker push <span class="nv">$IMAGE</span>
</code></pre></div>
<h5 id="run-in-kubernetes">Run in Kubernetes</h5>
<p>Time to deploy our server to Kubernetes. Let's setup the attestation first, so we make sure that only our application (identified by its <code>MRENCLAVE</code>) will have access to the secrets to read the encrypted filesystem, as well as our secret greeting.</p>
<p>Extract the <code>MRENCLAVE</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">MRENCLAVE</span><span class="o">=</span><span class="k">$(</span>docker run -i --rm -e <span class="s2">&quot;SCONE_HASH=1&quot;</span> <span class="nv">$IMAGE</span><span class="k">)</span>
</code></pre></div>
<p>Extract <code>SCONE_FSPF_KEY</code> and <code>SCONE_FSPF_TAG</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">SCONE_FSPF_KEY</span><span class="o">=</span><span class="k">$(</span>cat app/keytag <span class="p">|</span> awk <span class="s1">&#39;{print $11}&#39;</span><span class="k">)</span>
<span class="nb">export</span> <span class="nv">SCONE_FSPF_TAG</span><span class="o">=</span><span class="k">$(</span>cat app/keytag <span class="p">|</span> awk <span class="s1">&#39;{print $9}&#39;</span><span class="k">)</span>
<span class="nb">export</span> <span class="nv">SCONE_FSPF</span><span class="o">=</span>/fspf.pb
</code></pre></div>
<p>Create a session file:</p>
<div class="highlight"><pre><span></span><code>cat &gt; session-tls.yaml <span class="s">&lt;&lt; EOF</span>
<span class="s">name: $NS/hello-k8s-scone-tls</span>
<span class="s">version: &quot;0.3&quot;</span>

<span class="s">security:</span>
<span class="s">  attestation:</span>
<span class="s">    tolerate: [debug-mode, hyperthreading, outdated-tcb, software-hardening-needed]</span>
<span class="s">    ignore_advisories: &quot;*&quot;</span>

<span class="s">services:</span>
<span class="s">   - name: application</span>
<span class="s">     image_name: application_image</span>
<span class="s">     mrenclaves: [$MRENCLAVE]</span>
<span class="s">     command: python3 /app/server-tls.py</span>
<span class="s">     pwd: /</span>
<span class="s">     environment:</span>
<span class="s">        GREETING: hello from SCONE with encrypted source code and auto-generated certs!!!</span>
<span class="s">     fspf_path: $SCONE_FSPF</span>
<span class="s">     fspf_key: $SCONE_FSPF_KEY</span>
<span class="s">     fspf_tag: $SCONE_FSPF_TAG</span>

<span class="s">images:</span>
<span class="s">   - name: application_image</span>
<span class="s">     injection_files:</span>
<span class="s">       - path:  /app/cert.pem</span>
<span class="s">         content: \$\$SCONE::SERVER_CERT:crt\$\$</span>
<span class="s">       - path: /app/key.pem</span>
<span class="s">         content: \$\$SCONE::SERVER_CERT:privatekey\$\$</span>

<span class="s">secrets:</span>
<span class="s">   - name: SERVER_KEY</span>
<span class="s">     kind: private-key</span>
<span class="s">   - name: SERVER_CERT</span>
<span class="s">     kind: x509</span>
<span class="s">     private_key: SERVER_KEY</span>
<span class="s">EOF</span>
</code></pre></div>
<p><a href="https://sconedocs.github.io/cas_blender_example/">Post the session file</a> to your CAS of choice:</p>
<div class="highlight"><pre><span></span><code>curl -k -s --cert conf/client.crt --key conf/client-key.key --data-binary @session-tls.yaml -X POST https://<span class="nv">$SCONE_CAS_ADDR</span>:8081/session
</code></pre></div>
<p>Create the manifest and submit it to your Kubernetes cluster:</p>
<div class="highlight"><pre><span></span><code>cat &gt; attested-app-tls.yaml <span class="s">&lt;&lt; EOF</span>
<span class="s">apiVersion: apps/v1</span>
<span class="s">kind: Deployment</span>
<span class="s">metadata:</span>
<span class="s">  name: attested-hello-world-tls</span>
<span class="s">spec:</span>
<span class="s">  selector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      run: attested-hello-world-tls</span>
<span class="s">  replicas: 1</span>
<span class="s">  template:</span>
<span class="s">    metadata:</span>
<span class="s">      labels:</span>
<span class="s">        run: attested-hello-world-tls</span>
<span class="s">    spec:</span>
<span class="s">      containers:</span>
<span class="s">      - name: attested-hello-world-tls</span>
<span class="s">        image: $IMAGE</span>
<span class="s">        imagePullPolicy: Always</span>
<span class="s">        ports:</span>
<span class="s">        - containerPort: 4443</span>
<span class="s">        env:</span>
<span class="s">        - name: SCONE_CAS_ADDR</span>
<span class="s">          value: $SCONE_CAS_ADDR</span>
<span class="s">        - name: SCONE_CONFIG_ID</span>
<span class="s">          value: $NS/hello-k8s-scone-tls/application</span>
<span class="s">        - name: SCONE_LAS_ADDR</span>
<span class="s">          valueFrom:</span>
<span class="s">            fieldRef:</span>
<span class="s">              fieldPath: status.hostIP</span>
<span class="s">        resources:</span>
<span class="s">          limits:</span>
<span class="s">            sgx.intel.com/enclave: 1</span>
<span class="s">---</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Service</span>
<span class="s">metadata:</span>
<span class="s">  name: attested-hello-world-tls</span>
<span class="s">  labels:</span>
<span class="s">    run: attested-hello-world-tls</span>
<span class="s">spec:</span>
<span class="s">  ports:</span>
<span class="s">  - port: 4443</span>
<span class="s">    protocol: TCP</span>
<span class="s">  selector:</span>
<span class="s">    run: attested-hello-world-tls</span>
<span class="s">EOF</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl create -f attested-app-tls.yaml -n hello-scone
</code></pre></div>
<p>Time to access your app. Forward the traffic to its service:</p>
<div class="highlight"><pre><span></span><code>kubectl port-forward svc/attested-hello-world-tls <span class="m">8084</span>:4443 -n hello-scone
</code></pre></div>
<p>And send a request:</p>
<div class="highlight"><pre><span></span><code>$ curl -k https://localhost:8084
Hello World!
<span class="nv">$GREETING</span> is: hello from SCONE with encrypted <span class="nb">source</span> code and auto-generated certs!!!
</code></pre></div>
<h3 id="clean-up">Clean up</h3>
<p>To clean up all the resources created in this tutorial, simply delete the namespace:</p>
<div class="highlight"><pre><span></span><code>kubectl delete namespace hello-scone
</code></pre></div>
<p>&copy; <a href="http://www.scontain.com">scontain.com</a>, 2020-2022. <a href="mailto:info@scontain.com">Questions or Suggestions?</a></p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../kubeapps/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Kubeapps" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Kubeapps
            </div>
          </div>
        </a>
      
      
        
        <a href="../azure/scone-pyspark/" class="md-footer__link md-footer__link--next" aria-label="Next: PySpark on Azure" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              PySpark on Azure
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright Scontain &copy; 2018-2023
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.5413a266.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
      
        <script src="../css/extra.js"></script>
      
        <script src="../search/main.js"></script>
      
    
  </body>
</html>