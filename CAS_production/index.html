
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Scone Documentation - Secure Containers">
      
      
        <meta name="author" content="Christof Fetzer">
      
      
        <link rel="canonical" href="https://sconedocs.github.io/CAS_production/">
      
      <link rel="icon" href="../img/scone-favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-8.2.4">
    
    
      
        <title>CAS production setup - Confidential Computing</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"PT Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="../css/tooltips.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#scone-cas-in-production" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Confidential Computing" class="md-header__button md-logo" aria-label="Confidential Computing" data-md-component="logo">
      
  <img src="../img/SCONE-logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Confidential Computing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CAS production setup
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../news/" class="md-tabs__link">
        News and Overview
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../scone_mesh_tutorial/" class="md-tabs__link">
        Quick Start
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../k8s_concepts/" class="md-tabs__link">
        Kubernetes
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../CASOverview/" class="md-tabs__link md-tabs__link--active">
        Configuration & Attestation
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../helm/" class="md-tabs__link">
        SconeApps
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../operations/" class="md-tabs__link">
        DevOps Workflows
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../aks/" class="md-tabs__link">
        Azure Kubernetes Services
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../usecases/" class="md-tabs__link">
        Use Cases
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../registry/" class="md-tabs__link">
        Sign up
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../iexec_sconify_image/" class="md-tabs__link">
        More
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Confidential Computing" class="md-nav__button md-logo" aria-label="Confidential Computing" data-md-component="logo">
      
  <img src="../img/SCONE-logo-white.png" alt="logo">

    </a>
    Confidential Computing
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          News and Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="News and Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          News and Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../news/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cc-telenovela/" class="md-nav__link">
        CC Soap Opera
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cc-university/" class="md-nav__link">
        CC University
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vm_vs_enclave/" class="md-nav__link">
        Confidential Computing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../advantages/" class="md-nav__link">
        Advantages of SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../whyscone/" class="md-nav__link">
        SCONE vs Intel SGX SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../technical_summary/" class="md-nav__link">
        Technical summary of SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../buildingApps/" class="md-nav__link">
        (No) Cross-Compilation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../curated_images/" class="md-nav__link">
        Curated Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../community_version/" class="md-nav__link">
        Community Version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Quick Start
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Quick Start" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Quick Start
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          sconectl
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="sconectl" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          sconectl
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_mesh_tutorial/" class="md-nav__link">
        Hello World
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconectl/" class="md-nav__link">
        sconectl cli
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install_sconectl/" class="md-nav__link">
        install sconectl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../service.html" class="md-nav__link">
        openAPI description service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mesh.html" class="md-nav__link">
        openAPI description mesh
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Overview" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflows/" class="md-nav__link">
        Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify_hw_k8s/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lean_deployment/" class="md-nav__link">
        kubectl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify/" class="md-nav__link">
        Sconify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify_filetypes/" class="md-nav__link">
        File Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ee_sconify_image/" class="md-nav__link">
        Sconify Image SE
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multi-stakeholder-workflow/" class="md-nav__link">
        Multi-Stakeholder Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example_policy/" class="md-nav__link">
        Policy Update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microservices-demo/" class="md-nav__link">
        Boutique Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq_sconify/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_7" type="checkbox" id="__nav_3_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_7">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_7">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hostexample/" class="md-nav__link">
        Host Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dockerinstall/" class="md-nav__link">
        Installing docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sgxinstall/" class="md-nav__link">
        Installing Intel SGX driver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeinstall/" class="md-nav__link">
        Installing SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microcode/" class="md-nav__link">
        Updating CPU microcode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../windows10/" class="md-nav__link">
        Windows 10
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_8" type="checkbox" id="__nav_3_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_8">
          Workshop
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Workshop" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          Workshop
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/setup/" class="md-nav__link">
        getting access
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/details/" class="md-nav__link">
        background
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/hands_on_1/" class="md-nav__link">
        hands on 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/hands_on_2/" class="md-nav__link">
        hands on 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/next_steps/" class="md-nav__link">
        next steps
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_9" type="checkbox" id="__nav_3_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_9">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorial" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_9">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercises/" class="md-nav__link">
        Assignments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise0/" class="md-nav__link">
        Assignment 0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise1/" class="md-nav__link">
        Assignment 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise2/" class="md-nav__link">
        Assignment 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise3/" class="md-nav__link">
        Assignment 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise4/" class="md-nav__link">
        Assignment 4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise5/" class="md-nav__link">
        Assignment 5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/section_otp/" class="md-nav__link">
        Section 2 OTP
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_10" type="checkbox" id="__nav_3_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_10">
          SCONE Execution Modes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SCONE Execution Modes" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_10">
          <span class="md-nav__icon md-icon"></span>
          SCONE Execution Modes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../outline/" class="md-nav__link">
        Execution Modes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firstcontainer/" class="md-nav__link">
        Simulation Mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardwaremode/" class="md-nav__link">
        Hardware Mode
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kubernetes" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s_concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          SCONE Operator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SCONE Operator" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          SCONE Operator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1_scone_operator/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2_operator_installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3_resource_definitions/" class="md-nav__link">
        Custom Resource Definitions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_3">
          Helm Charts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Helm Charts" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Helm Charts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_sgxdevplugin/" class="md-nav__link">
        Kubernetes SGX Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_cas/" class="md-nav__link">
        CAS Deploy & Attest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_las/" class="md-nav__link">
        LAS Deploy & Platforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_mariadb/" class="md-nav__link">
        MariaDB Deploy & Attest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_teemon/" class="md-nav__link">
        TEEMon Deployment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4">
          Dashboards
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Dashboards" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Dashboards
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubeapps/" class="md-nav__link">
        Kubeapps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s_dashboard/" class="md-nav__link">
        Kubernetes Dashboard
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_5">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hello_world_kubernetes/" class="md-nav__link">
        Hello World Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../azure/scone-pyspark/" class="md-nav__link">
        PySpark on Azure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Configuration & Attestation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration & Attestation" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Configuration & Attestation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CASOverview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_session_lang_0_3/" class="md-nav__link">
        Policy Language 0.3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_session_lang_0_2/" class="md-nav__link">
        Policy Language 0.2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas_intro/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_for_development/" class="md-nav__link">
        Starting CAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_config/" class="md-nav__link">
        CAS Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../auditLog/" class="md-nav__link">
        Audit Log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../public-CAS/" class="md-nav__link">
        Public CAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../LASIntro/" class="md-nav__link">
        Starting LAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas_blender_example/" class="md-nav__link">
        Posting Policies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_cli-intro/" class="md-nav__link">
        CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../envcas/" class="md-nav__link">
        envcas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../print-arg-env/" class="md-nav__link">
        Secure Arguments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../encrypted_vol/" class="md-nav__link">
        Encrypted Volume
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone-signer-example/" class="md-nav__link">
        Binary Translation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../host_arguments/" class="md-nav__link">
        Host Arguments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../otp_demo/" class="md-nav__link">
        One-time Passwords
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../EncryptedWordCount/" class="md-nav__link">
        Encrypted Code and Input
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node-example/" class="md-nav__link">
        Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../namespace/" class="md-nav__link">
        Namespaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network_shield/" class="md-nav__link">
        Network Shield
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          CAS production setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        CAS production setup
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#platform-requirements" class="md-nav__link">
    Platform requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-cas" class="md-nav__link">
    Deploying CAS
  </a>
  
    <nav class="md-nav" aria-label="Deploying CAS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetes-via-helm" class="md-nav__link">
    Kubernetes via Helm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operating-cas" class="md-nav__link">
    Operating CAS
  </a>
  
    <nav class="md-nav" aria-label="Operating CAS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provisioning" class="md-nav__link">
    Provisioning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-cas" class="md-nav__link">
    Using CAS
  </a>
  
    <nav class="md-nav" aria-label="Using CAS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-hello-world-in-python-debug-enclave" class="md-nav__link">
    Example 1: Hello World in Python (debug enclave)
  </a>
  
    <nav class="md-nav" aria-label="Example 1: Hello World in Python (debug enclave)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-policies" class="md-nav__link">
    Creating policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-and-attest-the-application" class="md-nav__link">
    Deploy and attest the application
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-redis-production-enclave" class="md-nav__link">
    Example 2: Redis (production enclave)
  </a>
  
    <nav class="md-nav" aria-label="Example 2: Redis (production enclave)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-policies_1" class="md-nav__link">
    Creating policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-and-attest-redis" class="md-nav__link">
    Deploy and attest Redis
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas-backup-controller/" class="md-nav__link">
        CAS Backup Controller for Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas-backup-controller-quick-start/" class="md-nav__link">
        CAS Backup Controller Quick Start
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          SconeApps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SconeApps" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          SconeApps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/" class="md-nav__link">
        SconeApps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_database/" class="md-nav__link">
        database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_maxscale/" class="md-nav__link">
        maxscale
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_memcached/" class="md-nav__link">
        memcached
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_nginx/" class="md-nav__link">
        nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_openvino/" class="md-nav__link">
        openvino
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_pytorch/" class="md-nav__link">
        pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_spark/" class="md-nav__link">
        spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_tensorflow/" class="md-nav__link">
        tensorflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_tensorflowlite/" class="md-nav__link">
        tensorflowlite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_zookeeper/" class="md-nav__link">
        zookeeper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          DevOps Workflows
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DevOps Workflows" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          DevOps Workflows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/" class="md-nav__link">
        Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mitigation/" class="md-nav__link">
        Attack mitigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sadvisories/" class="md-nav__link">
        Security advisories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software_updates/" class="md-nav__link">
        Software updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone-signer/" class="md-nav__link">
        Signing of enclaves
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../edmm/" class="md-nav__link">
        EDMM support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_semantic_versioning/" class="md-nav__link">
        SCONE versioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../attestation_by_client/" class="md-nav__link">
        Attestation by client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../technotes/" class="md-nav__link">
        Technotes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Azure Kubernetes Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Azure Kubernetes Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Azure Kubernetes Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks/" class="md-nav__link">
        Confidential AKS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../azure/scone-playground/" class="md-nav__link">
        SCONE Playground on Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks/flask_demo/" class="md-nav__link">
        Flask Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_images/" class="md-nav__link">
        Python Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_integration/" class="md-nav__link">
        AKS Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MicrosoftAzureIntegrations/" class="md-nav__link">
        AKS Integration Tutorial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_charts/" class="md-nav__link">
        AKS Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_setup/" class="md-nav__link">
        AKS Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Use Cases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Use Cases" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Use Cases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usecases/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secure_document_management/" class="md-nav__link">
        Confidential Document Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../federated_machine_learning/" class="md-nav__link">
        Federated Machine Learning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shared_source_code/" class="md-nav__link">
        Confidential Code Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blender/" class="md-nav__link">
        Blender
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pyspark/" class="md-nav__link">
        PySpark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow/" class="md-nav__link">
        TensorFlow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflowlite/" class="md-nav__link">
        TensorFlow Lite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openvino/" class="md-nav__link">
        OpenVino
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vault/" class="md-nav__link">
        Vault
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone-use-case-overview/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secure_remote_execution/" class="md-nav__link">
        Secure Remote Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dockerfileexample/" class="md-nav__link">
        Dockerfile Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multistagebuild/" class="md-nav__link">
        Multi-stage build
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../groupcacheUseCase/" class="md-nav__link">
        GO example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../memory_dump/" class="md-nav__link">
        Finding Secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dapps/" class="md-nav__link">
        Trusted DApps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flask_demo/" class="md-nav__link">
        Flask Demo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Sign up
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Sign up" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Sign up
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../registry/" class="md-nav__link">
        Scontain Registy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          More
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="More" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          More
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_1" type="checkbox" id="__nav_11_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_1">
          Client Docu
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Client Docu" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_1">
          <span class="md-nav__icon md-icon"></span>
          Client Docu
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../iexec_sconify_image/" class="md-nav__link">
        iExec Sconify Image
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_2" type="checkbox" id="__nav_11_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_2">
          Language Support
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Language Support" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_2">
          <span class="md-nav__icon md-icon"></span>
          Language Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../C/" class="md-nav__link">
        C
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mono/" class="md-nav__link">
        C#
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../C%2B%2B/" class="md-nav__link">
        C++
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Fortran/" class="md-nav__link">
        Fortran
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../GO/" class="md-nav__link">
        GO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Java/" class="md-nav__link">
        Java
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Running_Java_Applications_in_Scone_with_remote_attestation/" class="md-nav__link">
        Java with remote attestation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Python/" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pypyscone/" class="md-nav__link">
        PyPy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mono/" class="md-nav__link">
        Mono
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Nodejs/" class="md-nav__link">
        Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/" class="md-nav__link">
        R
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Rust/" class="md-nav__link">
        Rust
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_3" type="checkbox" id="__nav_11_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_3">
          IDE Integration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IDE Integration" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_3">
          <span class="md-nav__icon md-icon"></span>
          IDE Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../eclipse/" class="md-nav__link">
        Eclipse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_vscode/" class="md-nav__link">
        Visual Studio Code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_4" type="checkbox" id="__nav_11_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_4">
          Command Line Interface
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command Line Interface" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_4">
          <span class="md-nav__icon md-icon"></span>
          Command Line Interface
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_cli/" class="md-nav__link">
        CLI Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_Fileshield/" class="md-nav__link">
        scone fspf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../binary_fs/" class="md-nav__link">
        scone binary fs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_ENV/" class="md-nav__link">
        environment variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MrEnclave/" class="md-nav__link">
        MrEnclave
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_affinity/" class="md-nav__link">
        affinity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_5" type="checkbox" id="__nav_11_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_5">
          Performance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Performance" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_5">
          <span class="md-nav__icon md-icon"></span>
          Performance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../teemon/" class="md-nav__link">
        Monitoring tool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_6" type="checkbox" id="__nav_11_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_6">
          Background
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Background" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_6">
          <span class="md-nav__icon md-icon"></span>
          Background
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appsecurity/" class="md-nav__link">
        Application-Oriented Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../background/" class="md-nav__link">
        SCONE Background
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_Publications/" class="md-nav__link">
        Publications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aboutScone/" class="md-nav__link">
        About
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_10" type="checkbox" id="__nav_11_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_10">
          Releases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Releases" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_10">
          <span class="md-nav__icon md-icon"></span>
          Releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.7/" class="md-nav__link">
        SCONE 5.7.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.6/" class="md-nav__link">
        SCONE 5.6.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.5/" class="md-nav__link">
        SCONE 5.5.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.4/" class="md-nav__link">
        SCONE 5.4.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#platform-requirements" class="md-nav__link">
    Platform requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-cas" class="md-nav__link">
    Deploying CAS
  </a>
  
    <nav class="md-nav" aria-label="Deploying CAS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetes-via-helm" class="md-nav__link">
    Kubernetes via Helm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operating-cas" class="md-nav__link">
    Operating CAS
  </a>
  
    <nav class="md-nav" aria-label="Operating CAS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provisioning" class="md-nav__link">
    Provisioning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-cas" class="md-nav__link">
    Using CAS
  </a>
  
    <nav class="md-nav" aria-label="Using CAS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-hello-world-in-python-debug-enclave" class="md-nav__link">
    Example 1: Hello World in Python (debug enclave)
  </a>
  
    <nav class="md-nav" aria-label="Example 1: Hello World in Python (debug enclave)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-policies" class="md-nav__link">
    Creating policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-and-attest-the-application" class="md-nav__link">
    Deploy and attest the application
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-redis-production-enclave" class="md-nav__link">
    Example 2: Redis (production enclave)
  </a>
  
    <nav class="md-nav" aria-label="Example 2: Redis (production enclave)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-policies_1" class="md-nav__link">
    Creating policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-and-attest-redis" class="md-nav__link">
    Deploy and attest Redis
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="scone-cas-in-production">SCONE CAS in production</h1>
<p>The Configuration and Attestation Service, or CAS, is a key component in the SCONE framework. It is responsible for managing security policies used to attest services and platforms, and to manage and generate secrets, keys and certificates securely.</p>
<h2 id="platform-requirements">Platform requirements</h2>
<p>To run CAS in production, the following platform requirements must be met:</p>
<p><strong>For DCAP systems</strong></p>
<p>At least one of:</p>
<ul>
<li>Hardware is registered within Intel and a valid subscription key; OR</li>
<li>A Quoting Provider Library (QPL) that is able to fetch PCK certificates for the platform.</li>
</ul>
<p><strong>For EPID systems</strong></p>
<ul>
<li>A valid set of IAS credentials.</li>
</ul>
<h2 id="deploying-cas">Deploying CAS</h2>
<p>SCONE CAS can be deployed in the following ways:</p>
<ul>
<li><a href="#kubernetes-via-helm">As a Kubernetes StatefulSet via Helm</a></li>
</ul>
<h3 id="kubernetes-via-helm">Kubernetes via Helm</h3>
<p>To install the SCONE CAS Helm chart to a Kubernetes cluster, make sure to <a href="https://sconedocs.github.io/helm/">add the Helm repository <code>sconeapps</code></a> first. Check the <a href="https://github.com/scontain/sconeapps/tree/master/charts/cas">Helm chart documentation</a> to learn more about the supported parameters.</p>
<p>Example (Azure):</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Get latest chart versions.</span>
helm repo update

<span class="c1"># Create an imagePullSecret named &quot;sconeapps&quot; so you can pull private images from Scontain&#39;s registry.</span>
<span class="nb">export</span> <span class="nv">SCONE_HUB_USERNAME</span><span class="o">=</span><span class="s2">&quot;&lt;GitLab username&gt;&quot;</span>
<span class="nb">export</span> <span class="nv">SCONE_HUB_ACCESS_TOKEN</span><span class="o">=</span><span class="s2">&quot;&lt;GitLab token&gt;&quot;</span>
<span class="nb">export</span> <span class="nv">SCONE_HUB_EMAIL</span><span class="o">=</span><span class="s2">&quot;&lt;GitLab email&gt;&quot;</span>
kubectl create secret docker-registry sconeapps --docker-server<span class="o">=</span>registry.scontain.com:5050 --docker-username<span class="o">=</span><span class="nv">$SCONE_HUB_USERNAME</span> --docker-password<span class="o">=</span><span class="nv">$SCONE_HUB_ACCESS_TOKEN</span> --docker-email<span class="o">=</span><span class="nv">$SCONE_HUB_EMAIL</span>

<span class="c1"># Install LAS for Azure.</span>
helm install las sconeapps/las <span class="se">\</span>
    --set <span class="nv">image</span><span class="o">=</span><span class="s2">&quot;registry.scontain.com:5050/sconecuratedimages/kubernetes:las.microsoft-azure-scone5.7.0&quot;</span> <span class="se">\</span>
    --set <span class="nv">useSGXDevPlugin</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span>

<span class="c1"># Set the CAS image.</span>
<span class="nv">CAS_PROD_IMAGE</span><span class="o">=</span><span class="s2">&quot;&lt;production CAS image&gt;&quot;</span>

<span class="c1"># Install CAS to cluster: configure the production image, persistence using Azure &quot;managed&quot;</span>
<span class="c1"># storage class, the Azure SGX device plugin and with a load balancer exposing this CAS</span>
<span class="c1"># to the external world.</span>
helm install cas sconeapps/cas <span class="se">\</span>
    --set <span class="nv">image</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_PROD_IMAGE</span><span class="s2">&quot;</span> <span class="se">\</span>
    --set persistence.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
    --set persistence.storageClass<span class="o">=</span><span class="s2">&quot;managed&quot;</span> <span class="se">\</span>
    --set <span class="nv">useSGXDevPlugin</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span> <span class="se">\</span>
    --set service.type<span class="o">=</span><span class="s2">&quot;LoadBalancer&quot;</span>
</code></pre></div>
<h2 id="operating-cas">Operating CAS</h2>
<p>This section shows to provision a production CAS. Provisioning allows the CAS owner to claim ownership and to provide the initial configuration for CAS. Check our documentation to learn more about <a href="https://sconedocs.github.io/CAS_config/">CAS configuration</a> and <a href="https://sconedocs.github.io/CAS_cli-intro/#cas-provisioning-and-configuration">how to operate CAS</a>.</p>
<h3 id="provisioning">Provisioning</h3>
<ul>
<li>Specify your DCAP subscription key.</li>
</ul>
<p><img alt="💡" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/1f4a1.svg" title=":bulb:" /> This sample uses the LAS image crafted for Azure. This image ships with a QPL that is able to fetch the required PCK certificates correctly. In this scenario, a valid DCAP subscription key is not required, and you can specify a dummy one:</p>
<div class="highlight"><pre><span></span><code><span class="nv">DCAP_SUBSCRIPTION_KEY</span><span class="o">=</span><span class="s2">&quot;00000000000000000000000000000000&quot;</span>
</code></pre></div>
<ul>
<li>Retrieve the relevant CAS information for remote attestation: MrEnclave, MrSigner, ISVSVN and ISVPRODID.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nv">CAS_MRENCLAVE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>docker run -t --rm -e <span class="nv">SCONE_HASH</span><span class="o">=</span><span class="m">1</span> <span class="nv">$CAS_PROD_IMAGE</span> <span class="p">|</span> grep -oe <span class="s2">&quot;[0-9a-f]\{64\}&quot;</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="nv">CAS_MRSIGNER</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>docker run -t --rm --entrypoint bash <span class="nv">$CAS_PROD_IMAGE</span> -c <span class="s2">&quot;scone-signer info /usr/local/bin/cas | grep MRSIGNER&quot;</span> <span class="p">|</span> grep -oe <span class="s2">&quot;[0-9a-f]\{64\}&quot;</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="nv">CAS_ISVPRODID</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>docker run -t --rm --entrypoint bash <span class="nv">$CAS_PROD_IMAGE</span> -c <span class="s2">&quot;scone-signer info /usr/local/bin/cas&quot;</span> <span class="p">|</span> grep <span class="s2">&quot;ISV Product ID&quot;</span> <span class="p">|</span> awk <span class="s1">&#39; { print $4 } &#39;</span> <span class="p">|</span> grep -oe <span class="s2">&quot;[0-9]\{5\}&quot;</span> -m <span class="m">1</span> <span class="k">)</span><span class="s2">&quot;</span>
<span class="nv">CAS_ISVSVN</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>docker run -t --rm --entrypoint bash <span class="nv">$CAS_PROD_IMAGE</span> -c <span class="s2">&quot;scone-signer info /usr/local/bin/cas&quot;</span> <span class="p">|</span> grep <span class="s2">&quot;ISV SVN&quot;</span> <span class="p">|</span> awk <span class="s1">&#39; { print $3 } &#39;</span> <span class="p">|</span> grep -oe <span class="o">[</span><span class="m">0</span>-9<span class="o">]</span> -m <span class="m">1</span><span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>
<ul>
<li>Retrieve the CAS key hash and provisioning token from the CAS pod logs.</li>
</ul>
<p><img alt="⚠️" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/26a0.svg" title=":warning:" /> The following commands assume that the CAS pod is named <code>cas-0</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">CAS_KEY_HASH</span><span class="o">=</span><span class="k">$(</span>kubectl logs cas-0 <span class="p">|</span> grep <span class="s2">&quot;CAS key hash&quot;</span> <span class="p">|</span> awk <span class="s1">&#39; { print $7 } &#39;</span><span class="k">)</span>
<span class="nb">export</span> <span class="nv">CAS_PROVISIONING_TOKEN</span><span class="o">=</span><span class="k">$(</span>kubectl logs cas-0 <span class="p">|</span> grep <span class="s2">&quot;CAS provisioning token&quot;</span> <span class="p">|</span> awk <span class="s1">&#39; { print $7 } &#39;</span><span class="k">)</span>
<span class="nb">export</span> <span class="nv">SCONE_CAS_ADDR</span><span class="o">=</span><span class="k">$(</span>kubectl get svc --namespace default cas --template <span class="s2">&quot;{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}&quot;</span><span class="k">)</span>
mkdir -p owner-config
cat &gt; owner-config/config.toml <span class="s">&lt;&lt;EOF</span>
<span class="s">[api_identity]</span>
<span class="s">common_name = &quot;mycas&quot;</span>
<span class="s">alt_names = [&quot;mycas&quot;, &quot;cas&quot;, &quot;cas.default&quot;, &quot;localhost&quot;, &quot;$SCONE_CAS_ADDR&quot;]</span>

<span class="s">[dcap]</span>
<span class="s">subscription_key = &quot;$DCAP_SUBSCRIPTION_KEY&quot;</span>
<span class="s">EOF</span>
</code></pre></div>
<ul>
<li>The CAS owner is identified by a PKCS#8 private key. This identity gives the owner powers to upgrade and perform backups. The key must be protected, and can be generated as follows:</li>
</ul>
<div class="highlight"><pre><span></span><code>mkdir -p identity
openssl genrsa -out identity/keypair.pem <span class="m">2048</span>
openssl pkcs8 -topk8 -inform PEM -outform PEM -nocrypt -in identity/keypair.pem -out identity/pkcs8.key
</code></pre></div>
<ul>
<li>Start a SCONE CLI container locally to provision CAS and create policies.</li>
</ul>
<div class="highlight"><pre><span></span><code>docker run -it --rm <span class="se">\</span>
    --network<span class="o">=</span>host <span class="se">\</span>
    -v <span class="nv">$PWD</span>/identity:/identity <span class="se">\</span>
    -v <span class="nv">$PWD</span>/owner-config:/owner-config <span class="se">\</span>
    -e <span class="nv">SCONE_CLI_CONFIG</span><span class="o">=</span><span class="s2">&quot;/identity/config.json&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_KEY_HASH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_KEY_HASH</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_PROVISIONING_TOKEN</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_PROVISIONING_TOKEN</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_MRENCLAVE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_MRENCLAVE</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_MRSIGNER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_MRSIGNER</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_ISVSVN</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_ISVSVN</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_ISVPRODID</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_ISVPRODID</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">SCONE_CAS_ADDR</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_CAS_ADDR</span><span class="s2">&quot;</span> <span class="se">\</span>
    registry.scontain.com:5050/sconecuratedimages/sconecli:alpine3.10-scone5
</code></pre></div>
<ul>
<li>Inside of the SCONE CLI container, provision CAS. The owner identity and CLI configuration will be persisted to your local machine (at <code>./identity/config.json</code>).</li>
</ul>
<div class="highlight"><pre><span></span><code>$ scone cas provision <span class="nv">$SCONE_CAS_ADDR</span> <span class="se">\</span>
    -c <span class="nv">$CAS_KEY_HASH</span> <span class="se">\</span>
    --token <span class="nv">$CAS_PROVISIONING_TOKEN</span> <span class="se">\</span>
    --config-file /owner-config/config.toml <span class="se">\</span>
    with-attestation -CS --mrenclave <span class="nv">$CAS_MRENCLAVE</span> --mrsigner <span class="nv">$CAS_MRSIGNER</span> --isvprodid <span class="nv">$CAS_ISVPRODID</span> --isvsvn <span class="nv">$CAS_ISVSVN</span>
This <span class="nb">command</span> will provision and claim ownership of a CAS.
    The ownership will be bound to the cryptographic identity used during this provisioning.
    Holding the owner identity is necessary to change CAS settings, register backups and upgrade to new CAS versions.
    Please be sure to store the owner identity securely.
    Note: If no identity is specified on the <span class="nb">command</span> line, the identity stored <span class="k">in</span> the CLI configuration file is used.
This tool seems to run inside of a container.
    Please be extra careful that the owner identity is not lost when when the container is removed!
CAS owner configuration contains DCAP API credentials. Going to attempt to attest CAS using DCAP quote.
CAS localhost at https://localhost:8081/ is trustworthy
Done, CAS configuration was successfully provisioned. You are now owner of the CAS.
</code></pre></div>
<h2 id="using-cas">Using CAS</h2>
<p>This section shows how to use CAS with a sample applications. We submit policies to CAS and then run the applications with remote attestation on Kubernetes.</p>
<p>Examples:</p>
<ul>
<li><a href="#example-1-hello-world-in-python-debug-enclave">Example 1: Hello World in Python (debug enclave)</a></li>
<li><a href="#example-2-redis-production-enclave">Example 2: Redis (production enclave)</a></li>
</ul>
<h3 id="example-1-hello-world-in-python-debug-enclave">Example 1: Hello World in Python (debug enclave)</h3>
<h4 id="creating-policies">Creating policies</h4>
<ul>
<li>Retrieve the MrEnclave of the application.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nv">IMAGE</span><span class="o">=</span><span class="s2">&quot;registry.scontain.com:5050/examples/quickstart/hello-world-python:scone5.7.0&quot;</span>
<span class="nv">MRENCLAVE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>docker run -it --rm -e <span class="nv">SCONE_HASH</span><span class="o">=</span><span class="m">1</span> <span class="nv">$IMAGE</span> <span class="p">|</span> grep -oe <span class="s2">&quot;[0-9a-f]\{64\}&quot;</span><span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>
<ul>
<li>Create a policy file.</li>
</ul>
<div class="highlight"><pre><span></span><code>mkdir -p policies client
<span class="nv">USER_ID</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$RANDOM$RANDOM</span><span class="s2">&quot;</span>
cat &gt; policies/hello-world.yaml <span class="s">&lt;&lt;EOF</span>
<span class="s">name: hello-world-python-$USER_ID</span>
<span class="s">version: &quot;0.3&quot;</span>

<span class="s">security:</span>
<span class="s">  attestation:</span>
<span class="s">    tolerate: [debug-mode, hyperthreading, outdated-tcb, software-hardening-needed]</span>
<span class="s">    ignore_advisories: &quot;*&quot;</span>

<span class="s">services:</span>
<span class="s">   - name: application</span>
<span class="s">     mrenclaves: [$MRENCLAVE]</span>
<span class="s">     command: python3 /app/hello-world.py</span>
<span class="s">     pwd: /</span>
<span class="s">     environment:</span>
<span class="s">        SECRET: &quot;s3cr3t-from-policy&quot;</span>
<span class="s">        SCONE_LOG: &quot;error&quot;</span>
<span class="s">EOF</span>
</code></pre></div>
<ul>
<li>Submit a policy to CAS.</li>
</ul>
<div class="highlight"><pre><span></span><code>docker run -it --rm <span class="se">\</span>
    --network<span class="o">=</span>host <span class="se">\</span>
    -v <span class="nv">$PWD</span>/policies:/policies <span class="se">\</span>
    -v <span class="nv">$PWD</span>/client:/root/.cas <span class="se">\</span>
    -e <span class="nv">SCONE_CAS_ADDR</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_CAS_ADDR</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_MRENCLAVE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_MRENCLAVE</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_MRSIGNER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_MRSIGNER</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_ISVPRODID</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_ISVPRODID</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_ISVSVN</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_ISVSVN</span><span class="s2">&quot;</span> <span class="se">\</span>
    registry.scontain.com:5050/sconecuratedimages/sconecli:alpine3.10-scone5
</code></pre></div>
<p>Inside of the SCONE CLI container, run:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Attest CAS.</span>
scone cas attest -CS <span class="nv">$SCONE_CAS_ADDR</span> --mrenclave <span class="nv">$CAS_MRENCLAVE</span> --mrsigner <span class="nv">$CAS_MRSIGNER</span> --isvprodid <span class="nv">$CAS_ISVPRODID</span> --isvsvn <span class="nv">$CAS_ISVSVN</span>
<span class="c1"># Create policy.</span>
scone session create /policies/hello-world.yaml
</code></pre></div>
<p>Exit the SCONE CLI container.</p>
<h4 id="deploy-and-attest-the-application">Deploy and attest the application</h4>
<ul>
<li>Run the application.</li>
</ul>
<div class="highlight"><pre><span></span><code>cat &gt; hello-world.yaml <span class="s">&lt;&lt;EOF</span>
<span class="s">apiVersion: batch/v1</span>
<span class="s">kind: Job</span>
<span class="s">metadata:</span>
<span class="s">  name: hello-world</span>
<span class="s">spec:</span>
<span class="s">  template:</span>
<span class="s">    spec:</span>
<span class="s">      restartPolicy: Never</span>
<span class="s">      imagePullSecrets:</span>
<span class="s">      - name: sconeapps</span>
<span class="s">      containers:</span>
<span class="s">      - name: hello-world</span>
<span class="s">        image: $IMAGE</span>
<span class="s">        imagePullPolicy: Always</span>
<span class="s">        env:</span>
<span class="s">        - name: SECRET</span>
<span class="s">          value: s3cr3t-from-untrusted-k8s</span>
<span class="s">        - name: SCONE_CAS_ADDR</span>
<span class="s">          value: $SCONE_CAS_ADDR</span>
<span class="s">        - name: SCONE_CONFIG_ID</span>
<span class="s">          value: hello-world-python-$USER_ID/application</span>
<span class="s">        - name: SCONE_LAS_ADDR</span>
<span class="s">          valueFrom:</span>
<span class="s">            fieldRef:</span>
<span class="s">              fieldPath: status.hostIP</span>
<span class="s">        resources:</span>
<span class="s">          limits:</span>
<span class="s">            sgx.intel.com/enclave: 1</span>
<span class="s">EOF</span>

<span class="c1"># Deploy to Kubernetes.</span>
kubectl apply -f hello-world.yaml

<span class="c1"># Check application logs.</span>
kubectl logs job/hello-world
</code></pre></div>
<p>You should expect the following logs:</p>
<div class="highlight"><pre><span></span><code>Hello Confidential World with SCONE!
The value of the env. var. SECRET is: <span class="s1">&#39;s3cr3t-from-policy&#39;</span>
</code></pre></div>
<p>Notice that the value of <code>SECRET</code> is <code>s3cret-from-policy</code> as defined in the policy. The value defined in the Kubernetes manifest <code>s3cr3t-from-untrusted-k8s</code> is ignored, since the Kubernetes cluster is potentially untrusted.</p>
<h3 id="example-2-redis-production-enclave">Example 2: Redis (production enclave)</h3>
<h4 id="creating-policies_1">Creating policies</h4>
<ul>
<li>Retrieve the MrEnclave of the application.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nv">IMAGE</span><span class="o">=</span><span class="s2">&quot;registry.scontain.com:5050/cicd/redis:latest&quot;</span>
<span class="nv">MRENCLAVE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>docker run -it --rm -e <span class="nv">SCONE_HASH</span><span class="o">=</span><span class="m">1</span> <span class="nv">$IMAGE</span> <span class="p">|</span> grep -oe <span class="s2">&quot;[0-9a-f]\{64\}&quot;</span><span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>
<ul>
<li>Create a policy file.</li>
</ul>
<div class="highlight"><pre><span></span><code>mkdir -p policies
<span class="nv">USER_ID</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$RANDOM$RANDOM</span><span class="s2">&quot;</span>
cat &gt; policies/redis.yaml <span class="s">&lt;&lt;EOF</span>
<span class="s">name: redis-$USER_ID</span>
<span class="s">version: &quot;0.3&quot;</span>

<span class="s">security:</span>
<span class="s">  attestation:</span>
<span class="s">    tolerate: [hyperthreading, outdated-tcb, software-hardening-needed]</span>

<span class="s">services:</span>
<span class="s">   - name: server</span>
<span class="s">     mrenclaves: [$MRENCLAVE]</span>
<span class="s">     command: redis-server</span>
<span class="s">     pwd: /</span>
<span class="s">     environment:</span>
<span class="s">        SCONE_LOG: &quot;error&quot;</span>
<span class="s">EOF</span>
</code></pre></div>
<ul>
<li>Submit a policy to CAS.</li>
</ul>
<div class="highlight"><pre><span></span><code>docker run -it --rm <span class="se">\</span>
    --network<span class="o">=</span>host <span class="se">\</span>
    -v <span class="nv">$PWD</span>/policies:/policies <span class="se">\</span>
    -v <span class="nv">$PWD</span>/client:/root/.cas <span class="se">\</span>
    -e <span class="nv">SCONE_CAS_ADDR</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_CAS_ADDR</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_MRENCLAVE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_MRENCLAVE</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_MRSIGNER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_MRSIGNER</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_ISVPRODID</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_ISVPRODID</span><span class="s2">&quot;</span> <span class="se">\</span>
    -e <span class="nv">CAS_ISVSVN</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_ISVSVN</span><span class="s2">&quot;</span> <span class="se">\</span>
    registry.scontain.com:5050/sconecuratedimages/sconecli:alpine3.10-scone5
</code></pre></div>
<p>Inside of the SCONE CLI container, run:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Attest CAS.</span>
scone cas attest -CS <span class="nv">$SCONE_CAS_ADDR</span> --mrenclave <span class="nv">$CAS_MRENCLAVE</span> --mrsigner <span class="nv">$CAS_MRSIGNER</span> --isvprodid <span class="nv">$CAS_ISVPRODID</span> --isvsvn <span class="nv">$CAS_ISVSVN</span>
<span class="c1"># Create policy.</span>
scone session create /policies/redis.yaml
</code></pre></div>
<p>Exit the SCONE CLI container.</p>
<h4 id="deploy-and-attest-redis">Deploy and attest Redis</h4>
<ul>
<li>Run the application.</li>
</ul>
<div class="highlight"><pre><span></span><code>cat &gt; redis.yaml <span class="s">&lt;&lt;EOF</span>
<span class="s">apiVersion: apps/v1</span>
<span class="s">kind: Deployment</span>
<span class="s">metadata:</span>
<span class="s">  name: redis</span>
<span class="s">spec:</span>
<span class="s">  selector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      run: redis</span>
<span class="s">  replicas: 1</span>
<span class="s">  template:</span>
<span class="s">    metadata:</span>
<span class="s">      labels:</span>
<span class="s">        run: redis</span>
<span class="s">    spec:</span>
<span class="s">      imagePullSecrets:</span>
<span class="s">        - name: sconeapps</span>
<span class="s">      containers:</span>
<span class="s">      - name: redis</span>
<span class="s">        image: $IMAGE</span>
<span class="s">        imagePullPolicy: Always</span>
<span class="s">        ports:</span>
<span class="s">        - containerPort: 6379</span>
<span class="s">        env:</span>
<span class="s">        - name: SCONE_LOG</span>
<span class="s">          value: error</span>
<span class="s">        - name: SCONE_CAS_ADDR</span>
<span class="s">          value: $SCONE_CAS_ADDR</span>
<span class="s">        - name: SCONE_CONFIG_ID</span>
<span class="s">          value: redis-$USER_ID/server</span>
<span class="s">        - name: SCONE_LAS_ADDR</span>
<span class="s">          valueFrom:</span>
<span class="s">            fieldRef:</span>
<span class="s">              fieldPath: status.hostIP</span>
<span class="s">        resources:</span>
<span class="s">          limits:</span>
<span class="s">            sgx.intel.com/enclave: 1</span>
<span class="s">---</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Service</span>
<span class="s">metadata:</span>
<span class="s">  name: redis</span>
<span class="s">  labels:</span>
<span class="s">    run: redis</span>
<span class="s">spec:</span>
<span class="s">  ports:</span>
<span class="s">  - port: 6379</span>
<span class="s">    protocol: TCP</span>
<span class="s">  selector:</span>
<span class="s">    run: redis</span>

<span class="s">EOF</span>

<span class="c1"># Deploy to Kubernetes.</span>
kubectl apply -f redis.yaml

<span class="c1"># Check application logs.</span>
kubectl logs deploy/redis -f
</code></pre></div>
<p>You should expect the Redis server to be up:</p>
<div class="highlight"><pre><span></span><code>1:C 03 Aug 2022 16:43:35.565 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
1:C 03 Aug 2022 16:43:35.565 # Redis version=6.2.7, bits=64, commit=00000000, modified=0, pid=1, just started
1:C 03 Aug 2022 16:43:35.565 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
1:M 03 Aug 2022 16:43:35.566 # You requested maxclients of 10000 requiring at least 10032 max file descriptors.
1:M 03 Aug 2022 16:43:35.566 # Server can&#39;t set maximum open files to 10032 because of OS error: Operation not permitted.
1:M 03 Aug 2022 16:43:35.566 # Current maximum open files is 4096. maxclients has been reduced to 4064 to compensate for low ulimit. If you need higher maxclients increase &#39;ulimit -n&#39;.
1:M 03 Aug 2022 16:43:35.566 * monotonic clock: POSIX clock_gettime
1:M 03 Aug 2022 16:43:35.568 # A key &#39;__redis__compare_helper&#39; was added to Lua globals which is not on the globals allow list nor listed on the deny list.
1:M 03 Aug 2022 16:43:35.568 * Running mode=standalone, port=6379.
1:M 03 Aug 2022 16:43:35.569 # Server initialized
1:M 03 Aug 2022 16:43:35.606 * Ready to accept connections
</code></pre></div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../network_shield/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Network Shield" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Network Shield
            </div>
          </div>
        </a>
      
      
        
        <a href="../cas-backup-controller/" class="md-footer__link md-footer__link--next" aria-label="Next: CAS Backup Controller for Kubernetes" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              CAS Backup Controller for Kubernetes
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright Scontain &copy; 2018-2022
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.5413a266.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
      
        <script src="../css/extra.js"></script>
      
        <script src="../search/main.js"></script>
      
    
  </body>
</html>