



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Scone Documentation - Secure Containers">
      
      
        <link rel="canonical" href="https://sconedocs.github.io/dapps/">
      
      
        <meta name="author" content="Christof Fetzer">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching pages">
      
        <meta name="lang:search.result.one" content="1 matching page">
      
        <meta name="lang:search.result.other" content="# matching page">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/scone-favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.3">
    
    
      
        <title>Trusted DApps - SCONE Confidential Computing</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,400,400i,700|">
        <style>body,input{font-family:"PT Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="../css/tooltips.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="purple">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#trusted-dapps-with-scone-and-iexec" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://sconedocs.github.io" title="SCONE Confidential Computing" class="md-header-nav__button md-logo">
          
            <img src="../img/logo-yellow-square.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                SCONE Confidential Computing
              </span>
              <span class="md-header-nav__topic">
                Trusted DApps
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search this site" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching this site
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://sconedocs.github.io" title="SCONE Confidential Computing" class="md-nav__button md-logo">
      
        <img src="../img/logo-yellow-square.png" width="48" height="48">
      
    </a>
    SCONE Confidential Computing
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Executive summary" class="md-nav__link">
      Executive summary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cc-telenovela/" title="CC Soap Opera" class="md-nav__link">
      CC Soap Opera
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cc-university/" title="CC University" class="md-nav__link">
      CC University
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../vm_vs_enclave/" title="Confidential Computing" class="md-nav__link">
      Confidential Computing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../advantages/" title="Advantages of SCONE" class="md-nav__link">
      Advantages of SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../whyscone/" title="SCONE vs Intel SGX SDK" class="md-nav__link">
      SCONE vs Intel SGX SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../technical_summary/" title="Technical summary of SCONE" class="md-nav__link">
      Technical summary of SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../buildingApps/" title="(No) Cross-Compilation" class="md-nav__link">
      (No) Cross-Compilation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../registry/" title="Scontain Registy" class="md-nav__link">
      Scontain Registy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../curated_images/" title="Curated Images" class="md-nav__link">
      Curated Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../community_version/" title="Community Version" class="md-nav__link">
      Community Version
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Kubernetes SCONE CC
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Kubernetes SCONE CC
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../k8s_concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/" title="SconeApps" class="md-nav__link">
      SconeApps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_sgxdevplugin/" title="Kubernetes SGX Plugin" class="md-nav__link">
      Kubernetes SGX Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kubeapps/" title="Kubeapps" class="md-nav__link">
      Kubeapps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../k8s_dashboard/" title="Kubernetes Dashboard" class="md-nav__link">
      Kubernetes Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_cas/" title="CAS Deploy & Attest" class="md-nav__link">
      CAS Deploy & Attest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_las/" title="LAS Deploy & Platforms" class="md-nav__link">
      LAS Deploy & Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_mariadb/" title="MariaDB Deploy & Attest" class="md-nav__link">
      MariaDB Deploy & Attest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_teemon/" title="TEEMon Deployment" class="md-nav__link">
      TEEMon Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_vscode/" title="Visual Studio Code" class="md-nav__link">
      Visual Studio Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hello_world_kubernetes/" title="Hello World Kubernetes" class="md-nav__link">
      Hello World Kubernetes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Azure Kubernetes Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Azure Kubernetes Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../aks/" title="Confidential AKS" class="md-nav__link">
      Confidential AKS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconify_image/" title="Sconify Image" class="md-nav__link">
      Sconify Image
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ee_sconify_image/" title="Sconify Image SE" class="md-nav__link">
      Sconify Image SE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks/flask_demo/" title="Flask Demo" class="md-nav__link">
      Flask Demo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python_images/" title="Python Images" class="md-nav__link">
      Python Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks_setup/" title="AKS Setup" class="md-nav__link">
      AKS Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks_charts/" title="AKS Applications" class="md-nav__link">
      AKS Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secure_document_management/" title="Confidential Document Management" class="md-nav__link">
      Confidential Document Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../scone-use-case-overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secure_remote_execution/" title="Secure Remote Execution" class="md-nav__link">
      Secure Remote Execution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dockerfileexample/" title="Dockerfile Example" class="md-nav__link">
      Dockerfile Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multistagebuild/" title="Multi-stage build" class="md-nav__link">
      Multi-stage build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../groupcacheUseCase/" title="GO example" class="md-nav__link">
      GO example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../memory_dump/" title="Finding Secrets" class="md-nav__link">
      Finding Secrets
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Trusted DApps
      </label>
    
    <a href="./" title="Trusted DApps" class="md-nav__link md-nav__link--active">
      Trusted DApps
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cli" title="CLI" class="md-nav__link">
    CLI
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trusted-dapp" title="Trusted DApp" class="md-nav__link">
    Trusted DApp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scone-platform" title="SCONE Platform" class="md-nav__link">
    SCONE Platform
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trusted-copy-dapp" title="Trusted copy DApp" class="md-nav__link">
    Trusted copy DApp
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encrypted-volumes" title="Encrypted Volumes" class="md-nav__link">
    Encrypted Volumes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-and-tag-management" title="Key and Tag Management" class="md-nav__link">
    Key and Tag Management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attesting-cas" title="Attesting CAS" class="md-nav__link">
    Attesting CAS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sessions" title="Sessions" class="md-nav__link">
    Sessions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-an-dapp" title="Building an DApp" class="md-nav__link">
    Building an DApp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" title="Testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" title="SETUP" class="md-nav__link">
    SETUP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1" title="Step 1" class="md-nav__link">
    Step 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2" title="Step 2" class="md-nav__link">
    Step 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3" title="Step 3" class="md-nav__link">
    Step 3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clis" title="CLIs" class="md-nav__link">
    CLIs
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../flask_demo/" title="Flask Demo" class="md-nav__link">
      Flask Demo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secure_doc_management/" title="Secure Document Management Demo" class="md-nav__link">
      Secure Document Management Demo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Configuration & Attestation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Configuration & Attestation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../CASOverview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cas_intro/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_for_development/" title="Starting CAS" class="md-nav__link">
      Starting CAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_config/" title="CAS Configuration" class="md-nav__link">
      CAS Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../public-CAS/" title="Public CAS" class="md-nav__link">
      Public CAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../LASIntro/" title="Starting LAS" class="md-nav__link">
      Starting LAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cas_blender_example/" title="Posting Sessions" class="md-nav__link">
      Posting Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_cli-intro/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_cli/" title="CLI Reference" class="md-nav__link">
      CLI Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_session_lang_0_2/" title="Policy Language 0.2" class="md-nav__link">
      Policy Language 0.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_session_lang_0_3/" title="Policy Language 0.3" class="md-nav__link">
      Policy Language 0.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../print-arg-env/" title="Secure Arguments" class="md-nav__link">
      Secure Arguments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../EncryptedWordCount/" title="Encrypted Code and Input" class="md-nav__link">
      Encrypted Code and Input
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../node-example/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../namespace/" title="Namespaces" class="md-nav__link">
      Namespaces
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Use Cases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Use Cases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../usecases/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../blender/" title="Blender" class="md-nav__link">
      Blender
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pyspark/" title="PySpark" class="md-nav__link">
      PySpark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tensorflow/" title="TensorFlow" class="md-nav__link">
      TensorFlow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tensorflowlite/" title="TensorFlow Lite" class="md-nav__link">
      TensorFlow Lite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../openvino/" title="OpenVino" class="md-nav__link">
      OpenVino
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vault/" title="Vault" class="md-nav__link">
      Vault
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Execution Modes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Execution Modes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../outline/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../firstcontainer/" title="Simulation Mode" class="md-nav__link">
      Simulation Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hardwaremode/" title="Hardware Mode" class="md-nav__link">
      Hardware Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hostexample/" title="Host Execution" class="md-nav__link">
      Host Execution
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Installation overview" class="md-nav__link">
      Installation overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dockerinstall/" title="Installing docker" class="md-nav__link">
      Installing docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sgxinstall/" title="Installing Intel SGX driver" class="md-nav__link">
      Installing Intel SGX driver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeinstall/" title="Installing SCONE" class="md-nav__link">
      Installing SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../microcode/" title="Updating CPU microcode" class="md-nav__link">
      Updating CPU microcode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../windows10/" title="Windows 10" class="md-nav__link">
      Windows 10
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Continuous Integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Continuous Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../scone_semantic_versioning/" title="Scone Semantic Versioning" class="md-nav__link">
      Scone Semantic Versioning
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Language Support
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        Language Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../C/" title="C" class="md-nav__link">
      C
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mono/" title="C#" class="md-nav__link">
      C#
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../C++/" title="C++" class="md-nav__link">
      C++
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fortran/" title="Fortran" class="md-nav__link">
      Fortran
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GO/" title="GO" class="md-nav__link">
      GO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Java/" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Running_Java_Applications_in_Scone_with_remote_attestation/" title="Java with remote attestation" class="md-nav__link">
      Java with remote attestation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pypyscone/" title="PyPy" class="md-nav__link">
      PyPy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mono/" title="Mono" class="md-nav__link">
      Mono
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Nodejs/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../R/" title="R" class="md-nav__link">
      R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Rust/" title="Rust" class="md-nav__link">
      Rust
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      IDE Integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        IDE Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../eclipse/" title="Eclipse" class="md-nav__link">
      Eclipse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_vscode/" title="Visual Studio Code" class="md-nav__link">
      Visual Studio Code
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Command Line Interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Command Line Interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_CLI/" title="SCONE CLI" class="md-nav__link">
      SCONE CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_toolchain/" title="SCONE SGX toolchain" class="md-nav__link">
      SCONE SGX toolchain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Curated_Images/" title="SCONE Curated Images" class="md-nav__link">
      SCONE Curated Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_TUTORIAL/" title="SCONE Static vs Dynamic" class="md-nav__link">
      SCONE Static vs Dynamic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_GENERATE_IMAGE/" title="SCONE Create Image" class="md-nav__link">
      SCONE Create Image
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Dockerfile/" title="SCONE Dockerfile" class="md-nav__link">
      SCONE Dockerfile
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17">
    
    <label class="md-nav__link" for="nav-17">
      Manuals
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        Manuals
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Fileshield/" title="scone fspf" class="md-nav__link">
      scone fspf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../binary_fs/" title="scone binary fs" class="md-nav__link">
      scone binary fs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_ENV/" title="environment variables" class="md-nav__link">
      environment variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../MrEnclave/" title="MrEnclave" class="md-nav__link">
      MrEnclave
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scone_affinity/" title="affinity" class="md-nav__link">
      affinity
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-18" type="checkbox" id="nav-18">
    
    <label class="md-nav__link" for="nav-18">
      Performance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-18">
        Performance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../performance/" title="Applications" class="md-nav__link">
      Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../teemon/" title="Monitoring tool" class="md-nav__link">
      Monitoring tool
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-19" type="checkbox" id="nav-19">
    
    <label class="md-nav__link" for="nav-19">
      Background
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-19">
        Background
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../appsecurity/" title="Application-Oriented Security" class="md-nav__link">
      Application-Oriented Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../background/" title="SCONE Background" class="md-nav__link">
      SCONE Background
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-20" type="checkbox" id="nav-20">
    
    <label class="md-nav__link" for="nav-20">
      Operational Aspects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-20">
        Operational Aspects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../operations/" title="Issues" class="md-nav__link">
      Issues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mitigation/" title="Attack mitigation" class="md-nav__link">
      Attack mitigation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sadvisories/" title="Security advisories" class="md-nav__link">
      Security advisories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../software_updates/" title="Software updates" class="md-nav__link">
      Software updates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scone-signer/" title="Signing of enclaves" class="md-nav__link">
      Signing of enclaves
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../SCONE_Publications/" title="Publications" class="md-nav__link">
      Publications
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../aboutScone/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cli" title="CLI" class="md-nav__link">
    CLI
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trusted-dapp" title="Trusted DApp" class="md-nav__link">
    Trusted DApp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scone-platform" title="SCONE Platform" class="md-nav__link">
    SCONE Platform
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trusted-copy-dapp" title="Trusted copy DApp" class="md-nav__link">
    Trusted copy DApp
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encrypted-volumes" title="Encrypted Volumes" class="md-nav__link">
    Encrypted Volumes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-and-tag-management" title="Key and Tag Management" class="md-nav__link">
    Key and Tag Management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attesting-cas" title="Attesting CAS" class="md-nav__link">
    Attesting CAS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sessions" title="Sessions" class="md-nav__link">
    Sessions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-an-dapp" title="Building an DApp" class="md-nav__link">
    Building an DApp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" title="Testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" title="SETUP" class="md-nav__link">
    SETUP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1" title="Step 1" class="md-nav__link">
    Step 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2" title="Step 2" class="md-nav__link">
    Step 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3" title="Step 3" class="md-nav__link">
    Step 3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clis" title="CLIs" class="md-nav__link">
    CLIs
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="trusted-dapps-with-scone-and-iexec">Trusted DApps with SCONE and iExec</h1>
<p>This tutorial shows how to build a <strong>trusted DApp</strong> for the <a href="https://iex.ec/"><strong>iExec platform</strong></a>. A <a href="https://en.wikipedia.org/wiki/Decentralized_application"><strong>DApp</strong></a> is a decentralized application that can be executed on hosts of a decentralized network. To learn about basic terminology and concepts of SCONE,  we recommend that you read the preceding tutorial pages first. Note that SCONE supports most common programming languages: please have a look at our examples for <a href="../C/">C</a>, <a href="../C++/">C++</a>, <a href="../Fortran/">Fortran</a>, <a href="../GO/">GO</a>, <a href="../Rust/">Rust</a>, <a href="../Python/">Python</a>, <a href="../Java/">Java</a>, and <a href="../Nodejs/">JavaScript/Node.js</a>. In this tutorial, we show how to build a trusted DApp using C.</p>
<div class="admonition info">
<p class="admonition-title">The <em>transfer service</em> used by this use case is not operational anymore</p>
<p>To try this example, you would need to replace the the "transfer service" by a more reliable
way to transfer files. Eventually, we will rework this example to use a reliable service
to transfer files. For now, we leave it online since it demonstrate some of the features of SCONE.
Also, maybe somebody will send us a pull request for using <code>github</code> instead of <code>tansfer.sh</code>?</p>
</div>
<h2 id="cli">CLI</h2>
<h3 id="trusted-dapp">Trusted DApp</h3>
<p>SCONE helps developers to protect the <strong>integrity</strong> as well as the <strong>confidentiality</strong> not only of data at rest (i.e., on disk) and data being transmitted but also <strong>all data stored in main memory</strong>. Note
that any root user can easily dump the main memory of any application and in this
way might gain secrets like the keys used to encrypt the data at rest.  </p>
<p><center>
<img alt="Protection Goals" src="../img/DApp-overview.svg#fullwidth" />
</center></p>
<p>By <strong>trusted DApp</strong>, we refer to a DApp that executes inside a <a href="https://en.wikipedia.org/wiki/Trusted_execution_environment"><strong>trusted execution environment (TEE)</strong></a> in
such a way that not even an attacker with root rights can access the data of the application. SCONE simplifies to run applications inside of TEEs as well as to
transparently encrypt and decrypt files.
SCONE is designed to be independent of the actual TEE implementation. Right now -- since there is a lack of appropriate hardware alternatives -- SCONE supports only <a href="https://en.wikipedia.org/wiki/Software_Guard_Extensions">Intel SGX</a>.</p>
<h3 id="scone-platform">SCONE Platform</h3>
<p>The SCONE platform helps to run DApps inside of TEEs without source code modifications. In this tutorial, we</p>
<ul>
<li>
<p>describe how to build a simple application to run with SCONE inside of an <strong>enclave</strong>, i.e., inside an Intel SGX TEE,</p>
</li>
<li>
<p>show how to compile the simple trusted DApp with the help of an Alpine container,</p>
</li>
<li>
<p>how to deploy and execute inside of an Alpine container,</p>
</li>
<li>
<p>introduce the workflow of where and how data is encrypted, pushed to the application and then decrypted</p>
</li>
<li>
<p>explain how keys are managed and passed to a trusted DApp, and</p>
</li>
<li>
<p>show how to test this application on your own infrastructure.</p>
</li>
</ul>
<h3 id="trusted-copy-dapp">Trusted <strong>copy</strong> DApp</h3>
<p>We show how to implement a simple <strong>copy</strong> command as
a trusted DApp. This is of course not a realistic DApp but it helps us to show all
steps necessary to build and run trusted DApps.</p>
<p>The <strong>copy</strong> DApp copies files located in an input directory <strong>/INPUTS</strong> to an output directory <strong>/OUTPUTS</strong> of the client the machine.</p>
<p><center>
<img alt="**copy DApps**" src="../img/simpledapp.svg" />
</center></p>
<p>With the help of SCONE, this <strong>copy</strong> DApp actually copies
encrypted files such that the SCONE <strong>transparently decrypts</strong> and <strong>checks the integrity</strong> of files that are read by the application. This protects the <strong>confidentiality</strong> and <strong>integrity</strong> of the files without any need to change the application itself. Also, SCONE encrypts and integrity protects the files that are written by the application. Each file is encrypted with a random key generated and managed by SCONE inside the enclave.</p>
<p><center>
<img alt="**copy DApps**" src="../img/copydapp.svg" />
</center></p>
<p>With the help of a CLI (command line interface deployed in a container, see below in <a href="./#clis">CLIs</a>, a client can encrypt
and push files stored on its client machine  to the copy DApp. The copy DApp copies the files. The CLI can decrypt the files after the execution of the DApp.</p>
<p><center>
<img alt="**workflow DApps**" src="../img/workflow.svg#fullwidth" />
</center></p>
<p>We introduce the commands to perform this example below.</p>
<h2 id="encrypted-volumes">Encrypted Volumes</h2>
<p>Containers support <strong>volumes</strong> as a way to persist data. Trusted DApps for the iExec platform have always two <strong>encrypted volumes</strong> mapped into their file system:</p>
<ul>
<li>an encrypted volume for input files mapped in the container in directory <strong>/encryptedInputs</strong>, and</li>
<li>an encrypted volume for output files <strong>/encryptedOutputs</strong>.</li>
</ul>
<p>We show below how the input files are encrypted with the help of the CLI and pushed to the container. Moreover, we show how to decrypt the files with the help of the CLI.</p>
<p><center>
<img alt="**keys and tags**" src="../img/keysandtags.svg" />
</center></p>
<p>To access an encrypted volume, one needs a <strong>key</strong> and a <strong>tag</strong>. The <strong>key</strong> is used to encrypt the individual keys of the files of the volume, i.e., it is used to protect the <strong>confidentiality</strong> of the files. The tag describes the current state of the volume. Any change of any file in the volume will result in a new <strong>tag</strong>. The <strong>tag</strong> is used to protect the <strong>integrity</strong> and <strong>freshness</strong> of the files:</p>
<ul>
<li>any unauthorized modification of the volume will be detected since the correct tag can only be computed by parties knowing the key of the volume (<strong>integrity protection</strong>).</li>
<li>any rollback to older version of the volume will be correctly encrypted but will have an old tag. Hence, rollbacks to older versions will be detected (<strong>freshness protection</strong>).</li>
</ul>
<h2 id="key-and-tag-management">Key and Tag Management</h2>
<p>The <strong>copy DApp</strong> requires access to <strong>keys</strong> and <strong>tags</strong>  to read the encrypted input files (i.e., the input volume) and to write the encrypted output files (i.e., the output volume). Passing the keys and tags to the <strong>copy DApp</strong> is non-trivial since we need to ensure that no other DApp nor any attacker can read or modify  the keys or the tags.  </p>
<p><center>
<img alt="**Keymanagement**" src="../img/keymanagement.svg" />
</center></p>
<p>To pass the keys and tags to a trusted DApp, SCONE provides a <strong>configuration and attestation service (CAS)</strong>. The CAS can ensure that only the <strong>copy DApp</strong> can access the keys and tags by verifying that it talks to an unmodified <strong>copy DApp</strong>. This process is called <strong>attestation</strong> and is performed with the help of the
Intel SGX CPU extension.</p>
<p>A trusted DApp is deployed with the help of a container image hosted on docker hub or some similar repository. We recommend that these container images are signed using <a href="https://docs.docker.com/engine/security/trust/content_trust/">Docker content trust</a>. Note that content trust is not sufficient to ensure that we talk to an unmodified <strong>copy DApp</strong> since, for example, an attacker with root access could change this image on the host on which it is deployed.</p>
<p>To establish trust between two communication partners, they typically <a href="https://en.wikipedia.org/wiki/Authentication">authenticate</a> each other with the help of <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">TLS</a>. An entity needs to know a private key to authenticate itself. When a trusted DApp like the <strong>copy DApp</strong> starts up it does not know such a private key yet. Note that any key that might be stored in plain text in the image, could be read by any entity that is permitted to access that image. One could encrypt the private key in the image but then the trust DApps would need to know the key to decrypt the private key. Note that the code that runs inside of an enclave, is in general not encrypted. Hence, one cannot store the private key inside of the code either.</p>
<p><strong>Attestation</strong> - unlike authentication - does not need a private key. It ensures that the correct code is executing. To distinguish between different instances of a trusted DApp, on startup, the SCONE runtime generates a random private/public key pair inside of the enclave.  This means that the private key can be kept secret inside of the enclave. This public key is used to identify this instance and one can perform TLS authentication to ensure that one talks to a specific instance.  </p>
<p><center>
<img alt="**Trusted DApp State**" src="../img/DAppState.svg" />
</center></p>
<p>To <strong>attest</strong> a trusted DApp, we need to describe the state of this DApp. In general, this consists of a hash value that describes the trusted DApp (called <strong>MrEnclave</strong>) and a tag that describes the file systems state. In the case of the copy DApp, the file system (mounted at /) does not need to be attested - only the encrypted input volume (mounted at /encryptedInputs)  and encrypted output volume (mounted at /encryptedOutputs) needs to be attested.</p>
<p>When a trusted DApp starts up, it connects to the CAS to perform an attestation. This attestation ensures that <strong>MrEnclave</strong> is the expected value and that the file system and the mounted volumes are in the correct state, i.e., the tags have the expected values. Note that <strong>MrEnclave</strong> will depend on the heap and stack size, i.e., changing the values will require an update of the expected <strong>MrEnclave</strong>.</p>
<p>A trusted DApp will typically write to the output volume. This will change the tag of the output volume. To ensure that a client can read the current state of the volumes written by a trusted DApp, the <strong>tags</strong> will be pushed to the CAS when a trusted DApp exits.</p>
<h2 id="attesting-cas">Attesting CAS</h2>
<p>CAS is written in <a href="https://www.rust-lang.org/en-US/">Rust</a>, a safe and efficient programming language. The type-safety ensures that simple programming bugs can be exploited by attackers to hijack services. A client can attest a valid CAS in two ways:</p>
<ul>
<li>via the Intel attestations service, and/or</li>
<li>via the certificates provided by CAS.</li>
</ul>
<p>Right now, the CLI verifies that it talks to a correct CAS with the help of TLS. The client only uses TLS and verifies that the CAS has the correct certificate. Only a CAS will be able to get this certificate. In a later version, we will additionally ensure that the CAS provides a correct report by the Intel attestations service.</p>
<p>CAS is <strong>trusted, managed service</strong>: it can be operated by a provider but the provider is not  able to access the sessions and in particular, the secrets of the clients. Right now, we run a public CAS service for debugging and testing. <strong>This CAS runs in debug mode</strong>, i.e., you should not use this CAS to pass secrets.</p>
<p>For clients that need to run a private CAS services, we will enable clients to run their own CAS. Please contact us if you want to run your own CAS or if you need access to CAS running in production mode.</p>
<p><strong>To run a trusted DApp in production mode, you need either to get a MrSigner from Intel or you need access to Intel SGX CPU that supports flexible launch control.  Contact us, if you want to run trusted DApps in production mode.</strong></p>
<h2 id="sessions">Sessions</h2>
<p>We need to specify the value of <strong>MrEnclave</strong> and the state (i.e., the tags) of the of the volumes and in the general case, also the file system. To do so, CAS supports
a security policies.  We call such a security policy a  <strong>session</strong>.</p>
<p><center>
<img alt="**Session**" src="../img/session.svg" />
</center></p>
<p>A session specifies what volumes are mounted and where they are mounted, the keys and tags of these volumes and MrEnclave of the trusted DApp. One problem that we need to address is that each client of a trusted DApp cannot only protect its data from an attacker but also from other clients of the trusted DApp, the entity that generated the image and the entities that manage the CAS or the host on which the trusted DApp is executed. </p>
<p><center>
<img alt="**Session specific keys**" src="../img/customization.svg" />
</center></p>
<p>To address this issue, we provide a way to have individually encrypted volumes for each session. In other words, each client of a trusted DApp can customize the image by providing input and output volumes and only the instance of this client can access these volumes. <strong>No other client nor the image generator can access the keys and hence, these volumes</strong>.</p>
<p>A client generates these keys (in the CLI). A <strong>session</strong> specifies these keys. A session is typically derived from a <strong>session template</strong> (more about session language <a href="../CAS_session_lang_0_3/">here</a>). The session template of the <strong>copy DApp</strong> looks like this:</p>
<div class="highlight"><pre><span></span>name: $SESSION
version: &quot;0.3&quot;

services:
   - name: application
     image_name: registry.scontain.com:5050/sconecuratedimages/dapps:copy_demo
     mrenclaves: [68112f06718fc390fb4a56e9d1f019b63285b6b6383ed73e1a5d2fa0b66e57c0]
     command: /application
     pwd: /
     environment:
        SCONE_MODE: hw

volumes:
   - name: encrypted-input-files
     fspf_tag: $INPUT_FSPF_TAG
     fspf_key: $INPUT_FSPF_KEY
   - name: encrypted-output-files
     fspf_tag: $OUTPUT_FSPF_TAG
     fspf_key: $OUTPUT_FSPF_KEY

images:
   - name: registry.scontain.com:5050/sconecuratedimages/dapps:copy_demo
     volumes:
        - name: encrypted-input-files
          path: /encryptedInputs
        - name: encrypted-output-files
          path: /encryptedOutputs

security:
  attestation:
    tolerate: [debug-mode, hyperthreading, outdated-tcb]
    ignore_advisories: &quot;*&quot;
</pre></div>

<p>Note that in most cases you can start from a generic session template and you do not need to worry about the syntax and all the details of session descriptions.
The session templates of trusted DApps look very similar to the session template above.
The three differences are that</p>
<ul>
<li>the <strong>image name</strong> will be updated,</li>
<li>the list of <strong>mrenclaves</strong> will be different, and</li>
<li>one might want to specify arguments passed to the trusted DApp (<strong>key command</strong>).</li>
</ul>
<h2 id="building-an-dapp">Building an DApp</h2>
<p>The <a href="https://github.com/scontain/copy_dapp">source code of this application</a>, you can retrieve from</p>
<div class="highlight"><pre><span></span>git clone https://github.com/scontain/copy_dapp.git
<span class="nb">cd</span> copy_dapp
</pre></div>

<p>The source code of the trusted copy DApp is file <a href="https://github.com/scontain/copy_dapp/blob/master/copy_files.c"><em>copy_files.c</em></a>.</p>
<p>We build this program with the help of the standard
<strong>gcc</strong> that is part of Alpine Linux (see the Dockerfile below). For convenience,
we provide an Alpine image (i.e., registry.scontain.com:5050/sconecuratedimages/muslgcc) that has <strong>gcc</strong> preinstalled.</p>
<p><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="s"> registry.scontain.com:5050/sconecuratedimages/muslgcc</span>

<span class="k">COPY</span> copy_files.c  /

<span class="c"># compile with vanilla gcc</span>
<span class="k">RUN</span> gcc -Wall copy_files.c -o /copy_files

<span class="k">FROM</span><span class="s"> registry.scontain.com:5050/sconecuratedimages/dapps:copy_dapp_runtime</span>

<span class="k">COPY</span> --from<span class="o">=</span><span class="m">0</span> /copy_files /application

<span class="k">RUN</span> apk add curl bash unzip zip

<span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&quot;/application.sh&quot;</span><span class="p">]</span>
</pre></div>
To run the application inside of an enclave, we need the SCONE
runtime environment. This runtime is part of image <strong>registry.scontain.com:5050/sconecuratedimages/dapps:copy_dapp_runtime</strong>.
Moreover, this image contains a script <strong>/application.sh</strong> that pulls
the encrypted input and output volumes from some transfer service, 
executes the application inside of an enclave. For testing, the script can push the encrypted output volume to a specified transfer service (see CLI options in <a href="./#clis">CLIs</a>).  </p>
<p>The image <strong>registry.scontain.com:5050/sconecuratedimages/dapps:copy_demo</strong>
is built by the script <code>build-image.sh</code>. This script also determines
<strong>MrEnclave</strong> of the application and writes a <strong>session template</strong> <em>copy_dapp.yml</em>.</p>
<h2 id="testing">Testing</h2>
<p>We now show how to test the trusted copy DApp. After building the image
by executing</p>
<div class="highlight"><pre><span></span>./build-image.sh
</pre></div>

<p>We can execute this image on a SGX-capable host. This host has to have the SCONE local attestation service (LAS) and Docker installed. We describe in the <a href="../sgxinstall/">installation section</a> on how to install SGX driver and how to install LAS <a href="../LASIntro/">here</a>.</p>
<div class="admonition note">
<p class="admonition-title">Compatibility of LAS and CAS</p>
<p>If you are using one of our public CAS as a <code>secretManagementService</code> (it is current default behavior of our images),  please insure that your local version of LAS has at least same major version as CAS that you are accessing. Current default CAS has version <code>4.2.1</code>, so your local LAS has to be <code>4.*</code>.</p>
</div>
<p>In what follows, we assume that the name of the host is stored in environment variable <strong>host</strong>.</p>
<h3 id="setup">SETUP</h3>
<p>To execute the trusted copy DApp, we need to create some files to copy.
We create an INPUTS directory and store files there.
We also create OUTPUTS directory, KEYS directory to hold generated keys and ZIP
to hold temporary files. We also copy the session template generated when building the
container image.</p>
<div class="highlight"><pre><span></span>mkdir -p EXAMPLE
<span class="nb">cd</span> EXAMPLE
mkdir -p KEYS INPUTS OUTPUTS ZIP
<span class="nb">echo</span> <span class="s2">&quot;Hello world&quot;</span> &gt; INPUTS/f1.txt
<span class="nb">echo</span> <span class="s2">&quot;Hello together&quot;</span> &gt; INPUTS/f2.txt
cp ../copy_dapp.yml KEYS/
</pre></div>

<h3 id="step-1">Step 1</h3>
<p>We encrypt these files and push the zipped up files for now to <strong>free.keep.sh</strong>.</p>
<p>Let's execute the first step of encrypting the files and pushing these to the transfer service:</p>
<div class="highlight"><pre><span></span><span class="nv">CMD</span><span class="o">=</span><span class="k">$(</span>docker run -t --rm -v <span class="nv">$PWD</span>/KEYS:/conf -v <span class="nv">$PWD</span>/INPUTS:/inputs registry.scontain.com:5050/sconecuratedimages/dapps:copy_dapp_cli encryptedpush --application registry.scontain.com:5050/sconecuratedimages/dapps:copy_demo -t /conf/copy_dapp.yml<span class="k">)</span>
</pre></div>

<p>Let's look at the output:</p>
<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="nv">$CMD</span>
</pre></div>

<p>should result in an output like:</p>
<div class="highlight"><pre><span></span> --sessionID <span class="m">84424401249649941281869427</span>/application --secretManagementService <span class="m">150</span>.165.85.86 --url https://free.keep.sh/NKHVjALFjubbHUNs/scone-upload.zip
</pre></div>

<p>You can look in your browser at the URL to see the uploaded files!</p>
<h3 id="step-2">Step 2</h3>
<p>Before running this application on the iExec platform, we might
want to test it on some SGX-capable host.</p>
<p>Ensure that the newest image is loaded on <strong>host</strong>. This step is only needed if it is expected that the image has changed
since <strong>docker run</strong> does not pull/update the image.</p>
<div class="highlight"><pre><span></span>ssh <span class="nv">$host</span> docker pull registry.scontain.com:5050/sconecuratedimages/dapps:copy_demo
</pre></div>

<p>Ensure that you are executing a bash shell (execute <code>bash</code>).
We determine which SGX device to mount with function  <a href="../sgxinstall/#determine-sgx-device">determine_sgx_device</a>.
Now, execute the command on <strong>host</strong> and we ask it to be pushed to <strong>free.keep.sh</strong>:</p>
<div class="highlight"><pre><span></span>determine_sgx_device
<span class="nv">URL</span><span class="o">=</span><span class="k">$(</span>ssh <span class="nv">$host</span> docker run -t <span class="nv">$MOUNT_SGXDEVICE</span> --network host --rm registry.scontain.com:5050/sconecuratedimages/dapps:copy_demo <span class="si">${</span><span class="nv">CMD</span><span class="p">//[</span><span class="s1">$&#39;\t\r\n&#39;</span><span class="p">]</span><span class="si">}</span>  --push free.keep.sh<span class="k">)</span>
</pre></div>

<p>Let's look at the output:</p>
<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="nv">$URL</span>
</pre></div>

<p>this results in an output like:</p>
<div class="highlight"><pre><span></span>https://free.keep.sh/0JitkN1PLHDHba1X/outputs.zip
</pre></div>

<p>You can now download this (if running a <strong>bash</strong> shell) </p>
<div class="highlight"><pre><span></span>curl -L --output ZIP/encryptedOutputFiles.zip <span class="si">${</span><span class="nv">URL</span><span class="p">//[</span><span class="s1">$&#39;\t\r\n&#39;</span><span class="p">]</span><span class="si">}</span>
</pre></div>

<h3 id="step-3">Step 3</h3>
<div class="highlight"><pre><span></span>docker run -t --rm -v <span class="nv">$PWD</span>/KEYS:/conf -v <span class="nv">$PWD</span>/ZIP:/encryptedOutputs -v <span class="nv">$PWD</span>/OUTPUTS:/decryptedOutputs registry.scontain.com:5050/sconecuratedimages/dapps:copy_dapp_cli decrypt
</pre></div>

<p>We can now look at the files in OUTPUTS directory:</p>
<div class="highlight"><pre><span></span>cat OUTPUTS/f1.txt
</pre></div>

<p>results in  <code>Hello world</code> and</p>
<div class="highlight"><pre><span></span>cat OUTPUTS/f2.txt
</pre></div>

<p>results in  <code>Hello together</code>.</p>
<h2 id="clis">CLIs</h2>
<p>Now that you know how our example works, it is time to present you CLIs that we ship with our images. These CLIs have enough options that you can configure them in according to your needs.</p>
<p>A CLI included into <strong>registry.scontain.com:5050/sconecuratedimages/dapps:copy_dapp_cli</strong>
<div class="highlight"><pre><span></span>scone.sh: a utility to either push encrypted files or decrypt result files
<span class="o">(</span>C<span class="o">)</span> Scontain.com, <span class="m">2021</span>. See https://sconedocs.github.io

Usage: decrypt <span class="o">[</span>options<span class="o">]</span>
     --help   This usage statement

Encrypt mode:
  encryptedpush  --inputDataFolder  PATH  --application APP
     -a, --application  APP
           name of remote application that should be executed
     -s, --secretManagementService ADDRESS
           IP address or name of SCONE secret management service <span class="o">[</span>default <span class="m">150</span>.165.85.86<span class="o">]</span>
     -t, --sessiontemplate PATH
           <span class="nb">read</span> session template from <span class="nb">local</span> path like /conf/sessiontemplate
     -r,  --remoteFileSystem TRANSFER
           hostname and port of service used to transfer files <span class="o">[</span>default: free.keep.sh<span class="o">]</span>
     -k, --insecure
           permits insecure SSL connections with remoteFileSystem
     -v,  --verbose
           print progress messages
     --help
           encryptedpush usage statement

  Example: encryptedpush --application blender

Decrypt mode:
  decrypt
     --help
           decrypt usage statement

  Example: decrypt
</pre></div></p>
<p>And a CLI included into <strong>registry.scontain.com:5050/sconecuratedimages/dapps:copy_dapp_runtime</strong></p>
<div class="highlight"><pre><span></span>application.sh a utility to demonstrate how to push volumes to remote applications
<span class="o">(</span>C<span class="o">)</span> Scontain.com, <span class="m">2021</span>. See https://sconedocs.github.io

     -s, --secretManagementService ADDRESS
           IP address or name of SCONE secret management service <span class="o">[</span>default <span class="o">]</span>
     -u, --url URL
           <span class="nb">read</span> session template from <span class="nb">local</span> path like /conf/sessiontemplate
     -p,  --push TRANSFER_SERVICE
           hostname and port of service used to push encrypted output files <span class="o">[</span>default: free.keep.sh<span class="o">]</span>
     -s,  --sessionID SESSION
           ID of the session uploaded to secretManagementService
     -k, --insecure
           permits insecure SSL connections with TRANSFER_SERVICE
     -v,  --verbose
           print progress messages
     --help
           application.sh usage statement

  Example: application.sh --sessionID <span class="m">60534003595811684552131953</span>/application --secretManagementService <span class="m">150</span>.165.85.86  --url https://free.keep.sh/KmdrBEvGKM66Jd04/scone-upload.zip --push free.keep.sh
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../memory_dump/" title="Finding Secrets" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Finding Secrets
              </span>
            </div>
          </a>
        
        
          <a href="../flask_demo/" title="Flask Demo" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Flask Demo
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright Scontain © 2021
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.e72fd936.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../search/main.js"></script>
      
    
    
      
    
  </body>
</html>