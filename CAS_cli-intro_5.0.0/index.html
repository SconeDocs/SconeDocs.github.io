



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Scone Documentation - Secure Containers">
      
      
        <link rel="canonical" href="https://sconedocs.github.io/CAS_cli-intro_5.0.0/">
      
      
        <meta name="author" content="Christof Fetzer">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching pages">
      
        <meta name="lang:search.result.one" content="1 matching page">
      
        <meta name="lang:search.result.other" content="# matching page">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/scone-favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.3">
    
    
      
        <title>SCONE CLI - SCONE Confidential Computing</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,400,400i,700|">
        <style>body,input{font-family:"PT Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="../css/tooltips.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="purple">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#scone-cli" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://sconedocs.github.io" title="SCONE Confidential Computing" class="md-header-nav__button md-logo">
          
            <img src="../img/logo-yellow-square.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                SCONE Confidential Computing
              </span>
              <span class="md-header-nav__topic">
                SCONE CLI
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search this site" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching this site
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://sconedocs.github.io" title="SCONE Confidential Computing" class="md-nav__button md-logo">
      
        <img src="../img/logo-yellow-square.png" width="48" height="48">
      
    </a>
    SCONE Confidential Computing
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Executive summary" class="md-nav__link">
      Executive summary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cc-telenovela/" title="CC Soap Opera" class="md-nav__link">
      CC Soap Opera
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cc-university/" title="CC University" class="md-nav__link">
      CC University
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vm_vs_enclave/" title="Confidential Computing" class="md-nav__link">
      Confidential Computing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../advantages/" title="Advantages of SCONE" class="md-nav__link">
      Advantages of SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../whyscone/" title="SCONE vs Intel SGX SDK" class="md-nav__link">
      SCONE vs Intel SGX SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../technical_summary/" title="Technical summary of SCONE" class="md-nav__link">
      Technical summary of SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../buildingApps/" title="(No) Cross-Compilation" class="md-nav__link">
      (No) Cross-Compilation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../registry/" title="Scontain Registy" class="md-nav__link">
      Scontain Registy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../curated_images/" title="Curated Images" class="md-nav__link">
      Curated Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../community_version/" title="Community Version" class="md-nav__link">
      Community Version
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      DevOps Workflows
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        DevOps Workflows
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../operations/" title="Workflows" class="md-nav__link">
      Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconify/" title="Sconify" class="md-nav__link">
      Sconify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconify_image/" title="Sconify Image" class="md-nav__link">
      Sconify Image
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ee_sconify_image/" title="Sconify Image SE" class="md-nav__link">
      Sconify Image SE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mitigation/" title="Attack mitigation" class="md-nav__link">
      Attack mitigation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sadvisories/" title="Security advisories" class="md-nav__link">
      Security advisories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../software_updates/" title="Software updates" class="md-nav__link">
      Software updates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scone-signer/" title="Signing of enclaves" class="md-nav__link">
      Signing of enclaves
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scone_semantic_versioning/" title="SCONE versioning" class="md-nav__link">
      SCONE versioning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../attestation_by_client/" title="Attestation by client" class="md-nav__link">
      Attestation by client
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Kubernetes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Kubernetes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../k8s_concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/" title="SconeApps" class="md-nav__link">
      SconeApps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_sgxdevplugin/" title="Kubernetes SGX Plugin" class="md-nav__link">
      Kubernetes SGX Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kubeapps/" title="Kubeapps" class="md-nav__link">
      Kubeapps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../k8s_dashboard/" title="Kubernetes Dashboard" class="md-nav__link">
      Kubernetes Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_cas/" title="CAS Deploy & Attest" class="md-nav__link">
      CAS Deploy & Attest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_las/" title="LAS Deploy & Platforms" class="md-nav__link">
      LAS Deploy & Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_mariadb/" title="MariaDB Deploy & Attest" class="md-nav__link">
      MariaDB Deploy & Attest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_teemon/" title="TEEMon Deployment" class="md-nav__link">
      TEEMon Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_vscode/" title="Visual Studio Code" class="md-nav__link">
      Visual Studio Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hello_world_kubernetes/" title="Hello World Kubernetes" class="md-nav__link">
      Hello World Kubernetes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      SconeApps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        SconeApps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeapps_database/" title="database" class="md-nav__link">
      database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeapps_maxscale/" title="maxscale" class="md-nav__link">
      maxscale
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeapps_memcached/" title="memcached" class="md-nav__link">
      memcached
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeapps_nginx/" title="nginx" class="md-nav__link">
      nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeapps_openvino/" title="openvino" class="md-nav__link">
      openvino
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeapps_pytorch/" title="pytorch" class="md-nav__link">
      pytorch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeapps_spark/" title="spark" class="md-nav__link">
      spark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeapps_tensorflow/" title="tensorflow" class="md-nav__link">
      tensorflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeapps_tensorflowlite/" title="tensorflowlite" class="md-nav__link">
      tensorflowlite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeapps_zookeeper/" title="zookeeper" class="md-nav__link">
      zookeeper
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Azure Kubernetes Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Azure Kubernetes Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../aks/" title="Confidential AKS" class="md-nav__link">
      Confidential AKS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks/flask_demo/" title="Flask Demo" class="md-nav__link">
      Flask Demo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python_images/" title="Python Images" class="md-nav__link">
      Python Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks_integration/" title="AKS Integration" class="md-nav__link">
      AKS Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../MicrosoftAzureIntegrations/" title="AKS Integration Tutorial" class="md-nav__link">
      AKS Integration Tutorial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks_charts/" title="AKS Applications" class="md-nav__link">
      AKS Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks_setup/" title="AKS Setup" class="md-nav__link">
      AKS Setup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Configuration & Attestation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Configuration & Attestation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../CASOverview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cas_intro/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_for_development/" title="Starting CAS" class="md-nav__link">
      Starting CAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_config/" title="CAS Configuration" class="md-nav__link">
      CAS Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../public-CAS/" title="Public CAS" class="md-nav__link">
      Public CAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../LASIntro/" title="Starting LAS" class="md-nav__link">
      Starting LAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cas_blender_example/" title="Posting Sessions" class="md-nav__link">
      Posting Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_cli-intro/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_cli/" title="CLI Reference" class="md-nav__link">
      CLI Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_session_lang_0_2/" title="Policy Language 0.2" class="md-nav__link">
      Policy Language 0.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_session_lang_0_3/" title="Policy Language 0.3" class="md-nav__link">
      Policy Language 0.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../print-arg-env/" title="Secure Arguments" class="md-nav__link">
      Secure Arguments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../EncryptedWordCount/" title="Encrypted Code and Input" class="md-nav__link">
      Encrypted Code and Input
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../node-example/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../namespace/" title="Namespaces" class="md-nav__link">
      Namespaces
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../scone-use-case-overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secure_remote_execution/" title="Secure Remote Execution" class="md-nav__link">
      Secure Remote Execution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dockerfileexample/" title="Dockerfile Example" class="md-nav__link">
      Dockerfile Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multistagebuild/" title="Multi-stage build" class="md-nav__link">
      Multi-stage build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../groupcacheUseCase/" title="GO example" class="md-nav__link">
      GO example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../memory_dump/" title="Finding Secrets" class="md-nav__link">
      Finding Secrets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dapps/" title="Trusted DApps" class="md-nav__link">
      Trusted DApps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../flask_demo/" title="Flask Demo" class="md-nav__link">
      Flask Demo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secure_document_management/" title="Secure Document Management" class="md-nav__link">
      Secure Document Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Use Cases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Use Cases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../usecases/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secure_document_management/" title="Confidential Document Management" class="md-nav__link">
      Confidential Document Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../federated_machine_learning/" title="Federated Machine Learning" class="md-nav__link">
      Federated Machine Learning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../shared_source_code/" title="Confidential Code Deployment" class="md-nav__link">
      Confidential Code Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../blender/" title="Blender" class="md-nav__link">
      Blender
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pyspark/" title="PySpark" class="md-nav__link">
      PySpark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tensorflow/" title="TensorFlow" class="md-nav__link">
      TensorFlow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tensorflowlite/" title="TensorFlow Lite" class="md-nav__link">
      TensorFlow Lite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../openvino/" title="OpenVino" class="md-nav__link">
      OpenVino
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vault/" title="Vault" class="md-nav__link">
      Vault
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Execution Modes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Execution Modes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../outline/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../firstcontainer/" title="Simulation Mode" class="md-nav__link">
      Simulation Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hardwaremode/" title="Hardware Mode" class="md-nav__link">
      Hardware Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hostexample/" title="Host Execution" class="md-nav__link">
      Host Execution
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Installation overview" class="md-nav__link">
      Installation overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dockerinstall/" title="Installing docker" class="md-nav__link">
      Installing docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sgxinstall/" title="Installing Intel SGX driver" class="md-nav__link">
      Installing Intel SGX driver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeinstall/" title="Installing SCONE" class="md-nav__link">
      Installing SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../microcode/" title="Updating CPU microcode" class="md-nav__link">
      Updating CPU microcode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../windows10/" title="Windows 10" class="md-nav__link">
      Windows 10
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Language Support
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Language Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../C/" title="C" class="md-nav__link">
      C
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mono/" title="C#" class="md-nav__link">
      C#
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../C++/" title="C++" class="md-nav__link">
      C++
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fortran/" title="Fortran" class="md-nav__link">
      Fortran
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GO/" title="GO" class="md-nav__link">
      GO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Java/" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Running_Java_Applications_in_Scone_with_remote_attestation/" title="Java with remote attestation" class="md-nav__link">
      Java with remote attestation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pypyscone/" title="PyPy" class="md-nav__link">
      PyPy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mono/" title="Mono" class="md-nav__link">
      Mono
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Nodejs/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../R/" title="R" class="md-nav__link">
      R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Rust/" title="Rust" class="md-nav__link">
      Rust
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      IDE Integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        IDE Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../eclipse/" title="Eclipse" class="md-nav__link">
      Eclipse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_vscode/" title="Visual Studio Code" class="md-nav__link">
      Visual Studio Code
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Command Line Interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        Command Line Interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_CLI/" title="SCONE CLI" class="md-nav__link">
      SCONE CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_toolchain/" title="SCONE SGX toolchain" class="md-nav__link">
      SCONE SGX toolchain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Curated_Images/" title="SCONE Curated Images" class="md-nav__link">
      SCONE Curated Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_TUTORIAL/" title="SCONE Static vs Dynamic" class="md-nav__link">
      SCONE Static vs Dynamic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_GENERATE_IMAGE/" title="SCONE Create Image" class="md-nav__link">
      SCONE Create Image
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Dockerfile/" title="SCONE Dockerfile" class="md-nav__link">
      SCONE Dockerfile
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      Manuals
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        Manuals
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Fileshield/" title="scone fspf" class="md-nav__link">
      scone fspf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../binary_fs/" title="scone binary fs" class="md-nav__link">
      scone binary fs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_ENV/" title="environment variables" class="md-nav__link">
      environment variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../MrEnclave/" title="MrEnclave" class="md-nav__link">
      MrEnclave
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scone_affinity/" title="affinity" class="md-nav__link">
      affinity
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Performance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Performance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../performance/" title="Applications" class="md-nav__link">
      Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../teemon/" title="Monitoring tool" class="md-nav__link">
      Monitoring tool
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17">
    
    <label class="md-nav__link" for="nav-17">
      Background
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        Background
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../appsecurity/" title="Application-Oriented Security" class="md-nav__link">
      Application-Oriented Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../background/" title="SCONE Background" class="md-nav__link">
      SCONE Background
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../SCONE_Publications/" title="Publications" class="md-nav__link">
      Publications
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../aboutScone/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cli-state" title="CLI State" class="md-nav__link">
    CLI State
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-identity" title="User Identity" class="md-nav__link">
    User Identity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cas-trust-management" title="CAS Trust Management" class="md-nav__link">
    CAS Trust Management
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attesting-specific-cas-versions" title="Attesting Specific CAS Versions" class="md-nav__link">
    Attesting Specific CAS Versions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-cas-software-signer" title="Changing CAS Software Signer" class="md-nav__link">
    Changing CAS Software Signer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-cas" title="Identifying CAS" class="md-nav__link">
    Identifying CAS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cas-provisioning-and-configuration" title="CAS provisioning and configuration" class="md-nav__link">
    CAS provisioning and configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cas-database-encryption-key-injection" title="CAS Database Encryption Key Injection" class="md-nav__link">
    CAS Database Encryption Key Injection
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cas-backup" title="CAS Backup" class="md-nav__link">
    CAS Backup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-handling" title="Session Handling" class="md-nav__link">
    Session Handling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utility-commands" title="Utility commands" class="md-nav__link">
    Utility commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#certificate-key-hashing" title="Certificate key hashing" class="md-nav__link">
    Certificate key hashing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="scone-cli">SCONE CLI</h1>
<p>The SCONE Command Line Interface (CLI) is the primary tool for interaction with the SCONE platform.</p>
<h2 id="cli-state">CLI State</h2>
<p>The SCONE CLI is stateful, which means that important state, such as attestation information and identity keys, are preserved between invocations.
This state is stored in a configuration file (default location: <code>~/.cas/config.json</code>).
Alternative locations can be used by setting the <code>SCONE_CLI_CONFIG</code> environment variable.
The config file contains security-sensitive data and has to be protected by the user.
Failure to do so will allow an attacker to impersonate the user.</p>
<h2 id="user-identity">User Identity</h2>
<p>Communication with CAS is encrypted and authenticated to prevent eavesdropping and impersonation attacks.
Users have to present an X.509 certificate to authenticate themselves.
These certificates are also used to authorize session operations, such as reading or updating (see the documentation of the Session Description Language).
For simplicity, the SCONE CLI generates a user certificate and private key on its own and stores it in the configuration file.</p>
<p><code>scone self show</code> shows the user's certificate in PEM format, as well as its public key hash, both of which can be used in the access control list of sessions.</p>
<p>Alternatively, an external identity can be specified for all session and CAS configuration operations using the <code>--identity &lt;path&gt;</code> parameter,
where <code>&lt;path&gt;</code> must point to a file containing a PEM-encoded PKCS#8 private key followed by a X.509v3 certificate.
This should be rarely necessary.</p>
<h2 id="cas-trust-management">CAS Trust Management</h2>
<p>SCONE CAS is the central point of knowledge and trust in the SCONE platform.
It generates and stores secrets, and establishes trust into service enclaves by attesting and provisioning them.
This role and the data involved is highly security-sensitive.
Therefore, trust has to be established into CAS itself before it can be used.
Without this, an adversary could impersonate as CAS and collect all of your application's secrets.</p>
<p><code>scone cas attest</code> is the central command to build trust into / attest a remote CAS.
It takes the address of CAS and, optionally, the expected enclave measurement of a benign CAS enclave. It also ensures that the attested CAS software was signed by Scontain.
If the attestation is successful, and the contacted CAS has the expected signer and optionally enclave measurement (its software is trusted), the CLI will store all information necessary to communicate securely with the CAS in the config file.</p>
<p>Example attestation command:</p>
<div class="highlight"><pre><span></span>scone cas attest cas.example.com
</pre></div>

<p>Additional command line switches allow relaxing the security policy, e.g. by allowing CAS to run on a machine with hyperthreading enabled (<code>-C</code>) or running on older, less secure SGX hardware (<code>-G</code>). Use <code>scone cas attest --help</code> for a full list of options.</p>
<p>If the database encryption key was injected by the CAS owner (see <a href="#cas-database-encryption-key-injection">CAS Database Encryption Key Injection</a>), attestation will be refused by default, because the CAS owner is granted access to all session secrets. If this does not violate your security policy, you can attest such a CAS by adding the argument <code>--allow-cas-owner-secret-access</code>.</p>
<p>The first attested CAS will be used as the default CAS when performing CAS-related operations, such as creating sessions. Multiple CASes may be attested at the same time, though. <code>scone cas list</code> gives an overview and <code>scone cas set-default</code> allows switching to another default CAS.</p>
<h3 id="attesting-specific-cas-versions">Attesting Specific CAS Versions</h3>
<p>By default, the CLI verifies that the running CAS software has the same or a newer security version (<code>ISVSVN</code>) as the CLI itself. There are two options to attest older or specific versions of CAS:</p>
<ul>
<li>
<p>Using an enclave measurement of that version (preferred). Example:</p>
<div class="highlight"><pre><span></span>scone cas attest cas.example.com 0a7f2f03e98a63656868a7083aa110210d244740fa73fa455130a1f926398e9e
</pre></div>

<p>Note that <code>0a7f2f03e98a63656868a7083aa110210d244740fa73fa455130a1f926398e9e</code> must be replaced with the proper enclave measurement.</p>
</li>
<li>
<p>Using a specific security version (<code>ISVSVN</code>). Example:</p>
<div class="highlight"><pre><span></span>scone cas attest cas.example.com --isvsvn <span class="m">42</span>
</pre></div>

</li>
</ul>
<h3 id="changing-cas-software-signer">Changing CAS Software Signer</h3>
<p>By default, the CLI verifies that the running CAS software was signed by Scontain. Although not recommended, it is also possible to attest a CAS signed by another key, using the <code>--mrsigner</code>, <code>--isvprodid</code> and <code>--isvsvn</code> arguments (all are required). Example:</p>
<div class="highlight"><pre><span></span>scone cas attest cas.example.com --mrsigner 2f46f979701db7229033ebf3f6d0ec25e7b04351de2f52269a3e6bbd32f6b192 --isvprodid <span class="m">7</span> --isvsvn <span class="m">3</span>
</pre></div>

<h3 id="identifying-cas">Identifying CAS</h3>
<p>For multi-CAS use-cases the mere software identity of a CAS is not sufficient to ensure the confidentiality and integrity of secrets.
In these scenarios also the individual identity of the CAS instance has to be took into consideration.</p>
<blockquote>
<p>Session secrets can be shared across CASes.
For this, import and export statements have to contain the address and public key of the remote CAS.</p>
<p>As addresses (DNS entries) can be easily manipulated by the adversary, the security of inter-CAS communication is based on their cryptographic keys.
Addresses are a mere help to reach a CAS.</p>
<p>Failure to properly identify a CAS instance opens the system to man-in-the-middle attacks where an adversary presents their CAS as legitimate remote CAS.</p>
</blockquote>
<p>CASes are identified by their public keys and/or certificates.
<code>scone cas show-identification</code> produces identification information for already attested CASes.
Further, <code>scone cas attest</code> can take the expected public key hash of the CAS or CAS software instance with the <code>-c</code> and <code>-s</code> options.</p>
<p>Taken the previous example, the following command would ensure that the CAS to be attested has a specific CAS software key hash.</p>
<div class="highlight"><pre><span></span>$ scone cas attest cas.example.com 0a7f2f03e98a63656868a7083aa110210d244740fa73fa455130a1f926398e9e -s 4USPZDGq2FjrE2wh7FEErbrirCFZcu8nR7YaSjH3NjfJtEAfCc
</pre></div>

<p>For secure multi-CAS scenarios the CAS identification information has to be exchanged via secure and authenticated channels between participants.</p>
<h2 id="cas-provisioning-and-configuration">CAS provisioning and configuration</h2>
<p>When a new CAS instance starts up for the first time, it operates in <em>unprovisioned</em> mode, waiting for someone to claim ownership and supply an initial configuration. This can be done through the <code>scone cas provision</code> command. Since <code>scone cas attest</code> will not work until CAS was configured, the <code>provision</code> command will also be used to attest the new CAS.</p>
<p>Example provisioning command:</p>
<div class="highlight"><pre><span></span>scone cas provision cas.example.com -c 42ku6fcMt8fzj8br84Xg1ZmForSJDTuj6wt1pURRcYpVzJiCSL --config-file cas-config.toml --token e59a91c9dbf4538f32c4f20668bdbc08 with-attestation
</pre></div>

<p>The following parameters must be present (please replace the example values):</p>
<ul>
<li><code>cas.example.com</code>: The CAS address</li>
<li><code>-c 42ku6fcMt8fzj8br84Xg1ZmForSJDTuj6wt1pURRcYpVzJiCSL</code>: The CAS key hash. It can be found on the CAS console or log. This ensures you are connected to the right CAS instance.</li>
<li><code>--config-file cas-config.toml</code>: Path to the CAS configuration file in TOML, JSON or YAML format. The configuration will be uploaded to CAS after successful attestation. Please refer to <a href="../CAS_config/">the CAS configuration page</a> regarding its content.</li>
<li><code>--token e59a91c9dbf4538f32c4f20668bdbc08</code>: A Provisioning Token. It can be found on the CAS console or log. This ensures that only the rightful owner can supply a CAS configuration.</li>
<li><code>with-attestation</code>: Attest the CAS. This ensures that the CAS is running in a secure enclave before transferring the confidential configuration.</li>
</ul>
<p>Similar options as for <code>scone cas attest</code> can be specified. Use <code>scone cas provision with-attestation --help</code> for a full list of options. It is also possible to specify a custom <code>--identity</code> (see <a href="#user-identity">User Identity</a>). Attesting a specific CAS software version is possible by appending an expected enclave measurement, like <code>with-attestation 8acd90af546bf50277ecef0e482e478b30cb8f9a7f6f55bb35ee1beebfc65000</code></p>
<p>Once successfully provisioned,</p>
<ul>
<li>the CAS will be added to the list of attested CAS instances,</li>
<li>the CAS will continue to operate with the supplied configuration,</li>
<li>and the CAS configuration can be updated later by the same user identity.</li>
</ul>
<p>Updating the CAS configuration can be done through the <code>scone cas update-config</code> command:</p>
<div class="highlight"><pre><span></span>scone cas update-config --cas cas.example.com --config-file new-cas-config.toml
</pre></div>

<p>Make sure to specify the same <code>--identity</code> that was used for <code>scone cas provision</code>, if any.</p>
<h3 id="cas-database-encryption-key-injection">CAS Database Encryption Key Injection</h3>
<p>CAS always encrypts its database.
By default, a secure encryption key is generated on enclave startup. 
This key is bound to the executing platform/machine, and not accessible outside the enclave, protecting CAS and session secrets.
It is possible to make the encryption key available to equally trustworthy CAS instances on other machines, see <a href="#cas-backup">CAS Backup</a>.
In some scenarios, it may be necessary to inject a database key in order to allow the CAS owner to inspect the database manually.
This is possible during initial CAS provisioning, using the <code>--database-key</code> argument. Example:</p>
<div class="highlight"><pre><span></span>scone cas provision cas.example.com -c 42ku6fcMt8fzj8br84Xg1ZmForSJDTuj6wt1pURRcYpVzJiCSL --config-file cas-config.toml --token e59a91c9dbf4538f32c4f20668bdbc08 --database-key cfadf5e00443f15e4670e253e353dda80eac0b1295903fdc96339554a78cde0a with-attestation
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <code>cfadf5e00443f15e4670e253e353dda80eac0b1295903fdc96339554a78cde0a</code> with your own key.
It must be a 64-character hexadecimal string.</p>
</div>
<p>When specifying a database key, CAS will generate new CAS keys and create a new encrypted database.
Therefore, CAS must be attested again afterwards.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Database key injection negatively impacts confidentiality as it makes CAS and session secrets accessible to the CAS owner.
As a precaution, database key injection will be refused when using a CAS binary signed by Scontain,
and attestation of the CAS will fail unless users give consent by supplying the argument <code>--allow-cas-owner-secret-access</code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Database encryption key protection relies on the trusted execution environment.
This applies to both securely generated and injected keys.
If running in debug mode, simulation mode or native mode, the database key will be exposed to the platform owner.</p>
</div>
<h2 id="cas-backup">CAS Backup</h2>
<p>SCONE improves the integrity and confidentiality of programs.
However, we still depend on the availability of the underlying system.
Therefore, without proper backups all data is lost in case of disaster.
SGX makes the situation even worse as it uses platform/machine dependent keys to encrypt data.
Therefore, one cannot extract the stored data from a SSD of a failed machine, or rather one cannot decrypt or access it.</p>
<p>CAS' backup feature prevents such scenarios as it enables multiple CAS on different machines to decrypt the CAS database encryption key.
This works by encrypting the database encryption key individually for all CASes that are supposed to have access.
Consequently, the primary CAS needs to learn about all of those CASes using a procedure we call <code>backup registration</code>.</p>
<p>To register a backup CAS, make sure you own the primary CAS (see <a href="#cas-provisioning-and-configuration">CAS provisioning and configuration</a>) and that both, the primary and the supposed backup CAS, are available/running (the backup CAS does not need to be provisioned) and execute the <code>register-backup</code> command:</p>
<div class="highlight"><pre><span></span>scone cas register-backup backup-cas-address
</pre></div>

<p>If the command succeeds, the backup CAS gained access to the database.
The primary CAS will accept any backup CAS with the same SGX signer identity (MRSIGNER), same SGX product ID (ISVPRODID), the same or higher SGX security version number (ISVSVN) and the same, or better SGX TCB state.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At the moment, the CAS database should only be accessed by one CAS instance at a time.
Otherwise, the database might be corrupted.</p>
</div>
<h2 id="session-handling">Session Handling</h2>
<p>In SCONE, individual (microservice) applications security policies are described in sessions.
Sessions are stored in session files - YAML-encoded descriptions of the session.
The <code>scone session</code> commands provide verification and processing for sessions.</p>
<p>A very simple (empty) session file (e.g. stored in <code>sessions/my-example-session.001.yml</code>) could look like this:</p>
<div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="s">&quot;my-example-session&quot;</span>
<span class="nt">version</span><span class="p">:</span> <span class="s">&quot;0.2&quot;</span>
<span class="nt">predecessor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
</pre></div>

<p>The Session Description Language documentation provides details about the syntax and content of session files.</p>
<p>To check whether the provided file is a valid session description, one can use:</p>
<div class="highlight"><pre><span></span>scone cas session check <span class="s2">&quot;sessions/my-example-session.001.yml&quot;</span>
</pre></div>

<p>The command will return a non-zero exit code when encountering a validation error.</p>
<p>Once the user finalized the sesson and validation passes, the session may be uploaded to a CAS, by using:</p>
<div class="highlight"><pre><span></span>scone session create <span class="s2">&quot;sessions/my-example-session.001.yml&quot;</span>
</pre></div>

<p>This will use the default CAS. To use a specific CAS instead:</p>
<div class="highlight"><pre><span></span>scone session create --cas cas.example2.com <span class="s2">&quot;sessions/my-example-session.001.yml&quot;</span>
</pre></div>

<p>(Note that either way, the used CAS must have been attested through <code>scone cas attest</code> previously, or the command will fail.)</p>
<p>As the complexity of sessions grows, variable substitution can be used to automate uploading of session templates (file <code>sessions/my-example-session.002.yml</code>):</p>
<div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="s">&quot;my-example-session&quot;</span>
<span class="nt">version</span><span class="p">:</span> <span class="s">&quot;0.2&quot;</span>

<span class="nt">services</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webservice</span>
    <span class="nt">command</span><span class="p">:</span> <span class="s">&quot;./nginx&quot;</span>
    <span class="nt">mrenclaves</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;$NGINX_MRENCLAVE&quot;</span><span class="p p-Indicator">]</span>
</pre></div>

<p>Note that we use a variable, <code>$NGINX_MRENCLAVE</code>, as the enclave measurement for a service.
Variables can be used within all values in the session file.</p>
<p>Since the session (identified by its name) was already created earlier, <code>scone session create</code> cannot be used a second time.
Instead, the session needs to be updated:</p>
<div class="highlight"><pre><span></span>scone cas session update -e <span class="s2">&quot;NGINX_MRENCLAVE=3be304015fb399cf88d76a8f58f04e16997010dab573cb1a91eb6257c2a452ac&quot;</span> <span class="s2">&quot;sessions/my-example-session.002.yml&quot;</span>
</pre></div>

<p>When updating a session, the CLI will first retrieve the currently active session from the CAS, and fill in its hash as a <code>predecessor</code> of the updated session.
This ensures a coherent, linear and verifiable session history.</p>
<p>The <code>-e</code> switch causes variable <code>$NGINX_MRENCLAVE</code> to be replaced with the value <code>3be304015fb399cf88d76a8f58f04e16997010dab573cb1a91eb6257c2a452ac</code>.
If a variable is present in the session file but not on the command line, an error is returned, and the session is not uploaded to CAS.
Through <code>--use-env</code>, predefined environment variables can be used during substitution.
Variables can be used with all <code>cas session</code> commands. Using <code>scone session update --help</code>, more advanced options can be shown.</p>
<p>In some scenarios, it may be necessary to verify whether a session active on a CAS adheres a given policy, for instance to check the session's authenticity before exporting a secret to it.
This can be done by using the <code>verify</code> CLI command:</p>
<div class="highlight"><pre><span></span>scone cas session verify -e <span class="s2">&quot;NGINX_MRENCLAVE=3be304015fb399cf88d76a8f58f04e16997010dab573cb1a91eb6257c2a452ac&quot;</span> <span class="s2">&quot;sessions/my-example-session.002.yml&quot;</span>
</pre></div>

<p>The command will fetch the active session from CAS (this requires the <code>READ</code> permission), check whether it matches the given session file after variable substitution, and print the session's hash.
A non-zero exit code implies a mismatch.</p>
<h2 id="utility-commands">Utility commands</h2>
<h3 id="certificate-key-hashing">Certificate key hashing</h3>
<p>Some configuration entries, like session access control policies, allow specifying certificate public key hashes.
The CLI can be used to calculate these hashes for any PEM-encoded certificate:</p>
<div class="highlight"><pre><span></span>scone cert show-key-hash <span class="s2">&quot;my-certificate.pem&quot;</span>
</pre></div>

<p>Example stdout output: <code>3s1pm8W6Be6cxvAQRbRP5YXd9YuERAr7KswN97uGtoPkRW87x1</code></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright Scontain © 2021
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.e72fd936.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../search/main.js"></script>
      
    
    
      
    
  </body>
</html>