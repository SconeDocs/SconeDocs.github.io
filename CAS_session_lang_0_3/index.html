



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Scone Documentation - Secure Containers">
      
      
        <link rel="canonical" href="https://sconedocs.github.io/CAS_session_lang_0_3/">
      
      
        <meta name="author" content="Christof Fetzer">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching pages">
      
        <meta name="lang:search.result.one" content="1 matching page">
      
        <meta name="lang:search.result.other" content="# matching page">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/scone-favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.3">
    
    
      
        <title>Policy Language 0.3 - SCONE Confidential Computing</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,400,400i,700|">
        <style>body,input{font-family:"PT Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="../css/tooltips.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="purple">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#scone-session-language-v03" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://sconedocs.github.io" title="SCONE Confidential Computing" class="md-header-nav__button md-logo">
          
            <img src="../img/logo-yellow-square.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                SCONE Confidential Computing
              </span>
              <span class="md-header-nav__topic">
                Policy Language 0.3
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search this site" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching this site
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://sconedocs.github.io" title="SCONE Confidential Computing" class="md-nav__button md-logo">
      
        <img src="../img/logo-yellow-square.png" width="48" height="48">
      
    </a>
    SCONE Confidential Computing
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Executive summary" class="md-nav__link">
      Executive summary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cc-telenovela/" title="CC Soap Opera" class="md-nav__link">
      CC Soap Opera
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cc-university/" title="CC University" class="md-nav__link">
      CC University
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vm_vs_enclave/" title="Confidential Computing" class="md-nav__link">
      Confidential Computing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../advantages/" title="Advantages of SCONE" class="md-nav__link">
      Advantages of SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../whyscone/" title="SCONE vs Intel SGX SDK" class="md-nav__link">
      SCONE vs Intel SGX SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../technical_summary/" title="Technical summary of SCONE" class="md-nav__link">
      Technical summary of SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../buildingApps/" title="(No) Cross-Compilation" class="md-nav__link">
      (No) Cross-Compilation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../registry/" title="Scontain Registy" class="md-nav__link">
      Scontain Registy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../curated_images/" title="Curated Images" class="md-nav__link">
      Curated Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../community_version/" title="Community Version" class="md-nav__link">
      Community Version
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      DevOps Aspects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        DevOps Aspects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../operations/" title="Workflows" class="md-nav__link">
      Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconify/" title="Sconify" class="md-nav__link">
      Sconify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mitigation/" title="Attack mitigation" class="md-nav__link">
      Attack mitigation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sadvisories/" title="Security advisories" class="md-nav__link">
      Security advisories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../software_updates/" title="Software updates" class="md-nav__link">
      Software updates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scone-signer/" title="Signing of enclaves" class="md-nav__link">
      Signing of enclaves
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scone_semantic_versioning/" title="SCONE versioning" class="md-nav__link">
      SCONE versioning
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      SconeApps and Kubernetes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        SconeApps and Kubernetes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../k8s_concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/" title="SconeApps" class="md-nav__link">
      SconeApps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_sgxdevplugin/" title="Kubernetes SGX Plugin" class="md-nav__link">
      Kubernetes SGX Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kubeapps/" title="Kubeapps" class="md-nav__link">
      Kubeapps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../k8s_dashboard/" title="Kubernetes Dashboard" class="md-nav__link">
      Kubernetes Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_cas/" title="CAS Deploy & Attest" class="md-nav__link">
      CAS Deploy & Attest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_las/" title="LAS Deploy & Platforms" class="md-nav__link">
      LAS Deploy & Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_mariadb/" title="MariaDB Deploy & Attest" class="md-nav__link">
      MariaDB Deploy & Attest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_teemon/" title="TEEMon Deployment" class="md-nav__link">
      TEEMon Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_vscode/" title="Visual Studio Code" class="md-nav__link">
      Visual Studio Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hello_world_kubernetes/" title="Hello World Kubernetes" class="md-nav__link">
      Hello World Kubernetes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Azure Kubernetes Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Azure Kubernetes Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../aks/" title="Confidential AKS" class="md-nav__link">
      Confidential AKS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks/flask_demo/" title="Flask Demo" class="md-nav__link">
      Flask Demo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secure_document_management/" title="Confidential Document Management" class="md-nav__link">
      Confidential Document Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python_images/" title="Python Images" class="md-nav__link">
      Python Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconify_image/" title="Sconify Image" class="md-nav__link">
      Sconify Image
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ee_sconify_image/" title="Sconify Image SE" class="md-nav__link">
      Sconify Image SE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks_integration/" title="AKS Integration" class="md-nav__link">
      AKS Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks_charts/" title="AKS Applications" class="md-nav__link">
      AKS Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aks_setup/" title="AKS Setup" class="md-nav__link">
      AKS Setup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../scone-use-case-overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secure_remote_execution/" title="Secure Remote Execution" class="md-nav__link">
      Secure Remote Execution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dockerfileexample/" title="Dockerfile Example" class="md-nav__link">
      Dockerfile Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multistagebuild/" title="Multi-stage build" class="md-nav__link">
      Multi-stage build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../groupcacheUseCase/" title="GO example" class="md-nav__link">
      GO example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../memory_dump/" title="Finding Secrets" class="md-nav__link">
      Finding Secrets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dapps/" title="Trusted DApps" class="md-nav__link">
      Trusted DApps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../flask_demo/" title="Flask Demo" class="md-nav__link">
      Flask Demo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secure_document_management/" title="Secure Document Management" class="md-nav__link">
      Secure Document Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Configuration & Attestation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Configuration & Attestation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../CASOverview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cas_intro/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_for_development/" title="Starting CAS" class="md-nav__link">
      Starting CAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_config/" title="CAS Configuration" class="md-nav__link">
      CAS Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../public-CAS/" title="Public CAS" class="md-nav__link">
      Public CAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../LASIntro/" title="Starting LAS" class="md-nav__link">
      Starting LAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cas_blender_example/" title="Posting Sessions" class="md-nav__link">
      Posting Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_cli-intro/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_cli/" title="CLI Reference" class="md-nav__link">
      CLI Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CAS_session_lang_0_2/" title="Policy Language 0.2" class="md-nav__link">
      Policy Language 0.2
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Policy Language 0.3
      </label>
    
    <a href="./" title="Policy Language 0.3" class="md-nav__link md-nav__link--active">
      Policy Language 0.3
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#changes-since-version-02" title="Changes since version 0.2" class="md-nav__link">
    Changes since version 0.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-description-hash" title="Session Description Hash" class="md-nav__link">
    Session Description Hash
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-description-structure" title="Session Description Structure" class="md-nav__link">
    Session Description Structure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#version" title="Version" class="md-nav__link">
    Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#session-name" title="Session Name" class="md-nav__link">
    Session Name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#predecessor-session" title="Predecessor Session" class="md-nav__link">
    Predecessor Session
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-description" title="Service Description" class="md-nav__link">
    Service Description
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#name" title="name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#command" title="command" class="md-nav__link">
    command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" title="environment" class="md-nav__link">
    environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pwd" title="pwd" class="md-nav__link">
    pwd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image" title="Image" class="md-nav__link">
    Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attestation" title="Attestation" class="md-nav__link">
    Attestation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#measurement-based-attestation" title="Measurement-based Attestation" class="md-nav__link">
    Measurement-based Attestation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#platform-based-attestation" title="Platform-based Attestation" class="md-nav__link">
    Platform-based Attestation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secrets" title="Secrets" class="md-nav__link">
    Secrets
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secret-kinds" title="Secret Kinds" class="md-nav__link">
    Secret Kinds
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ascii-secrets" title="ASCII Secrets" class="md-nav__link">
    ASCII Secrets
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicit-secret-values" title="Explicit Secret Values" class="md-nav__link">
    Explicit Secret Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generated-secret-values" title="Generated Secret Values" class="md-nav__link">
    Generated Secret Values
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-secrets" title="Binary Secrets" class="md-nav__link">
    Binary Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#private-keys" title="Private Keys" class="md-nav__link">
    Private Keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificates" title="Certificates" class="md-nav__link">
    Certificates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-access" title="Secret Access" class="md-nav__link">
    Secret Access
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binary-secret-values" title="Binary Secret Values" class="md-nav__link">
    Binary Secret Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificate-values" title="Certificate Values" class="md-nav__link">
    Certificate Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-injection-files" title="Secret Injection Files" class="md-nav__link">
    Secret Injection Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-sharing" title="Secret Sharing" class="md-nav__link">
    Secret Sharing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-migration" title="Secret Migration" class="md-nav__link">
    Secret Migration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#volumes" title="Volumes" class="md-nav__link">
    Volumes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volume-sharing" title="Volume Sharing" class="md-nav__link">
    Volume Sharing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#images" title="Images" class="md-nav__link">
    Images
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#image-volumes" title="Image Volumes" class="md-nav__link">
    Image Volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-injection-files_1" title="Secret Injection Files" class="md-nav__link">
    Secret Injection Files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-control" title="Access Control" class="md-nav__link">
    Access Control
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attestation-security" title="Attestation Security" class="md-nav__link">
    Attestation Security
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tolerating-hardware-attestation-issues" title="Tolerating hardware attestation issues" class="md-nav__link">
    Tolerating hardware attestation issues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trusted-scone-quoting-enclaves" title="Trusted SCONE Quoting Enclaves" class="md-nav__link">
    Trusted SCONE Quoting Enclaves
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-attestation" title="Disabling attestation" class="md-nav__link">
    Disabling attestation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencing-other-sessions" title="Referencing Other Sessions" class="md-nav__link">
    Referencing Other Sessions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-cas-sessions" title="Local CAS Sessions" class="md-nav__link">
    Local CAS Sessions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sessions-on-another-cas" title="Sessions on another CAS" class="md-nav__link">
    Sessions on another CAS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url-short-form" title="URL short form" class="md-nav__link">
    URL short form
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../print-arg-env/" title="Secure Arguments" class="md-nav__link">
      Secure Arguments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../EncryptedWordCount/" title="Encrypted Code and Input" class="md-nav__link">
      Encrypted Code and Input
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../node-example/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../namespace/" title="Namespaces" class="md-nav__link">
      Namespaces
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Use Cases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Use Cases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../usecases/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../blender/" title="Blender" class="md-nav__link">
      Blender
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pyspark/" title="PySpark" class="md-nav__link">
      PySpark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tensorflow/" title="TensorFlow" class="md-nav__link">
      TensorFlow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tensorflowlite/" title="TensorFlow Lite" class="md-nav__link">
      TensorFlow Lite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../openvino/" title="OpenVino" class="md-nav__link">
      OpenVino
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vault/" title="Vault" class="md-nav__link">
      Vault
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Execution Modes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Execution Modes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../outline/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../firstcontainer/" title="Simulation Mode" class="md-nav__link">
      Simulation Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hardwaremode/" title="Hardware Mode" class="md-nav__link">
      Hardware Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hostexample/" title="Host Execution" class="md-nav__link">
      Host Execution
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Installation overview" class="md-nav__link">
      Installation overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dockerinstall/" title="Installing docker" class="md-nav__link">
      Installing docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sgxinstall/" title="Installing Intel SGX driver" class="md-nav__link">
      Installing Intel SGX driver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeinstall/" title="Installing SCONE" class="md-nav__link">
      Installing SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../microcode/" title="Updating CPU microcode" class="md-nav__link">
      Updating CPU microcode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../windows10/" title="Windows 10" class="md-nav__link">
      Windows 10
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Language Support
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Language Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../C/" title="C" class="md-nav__link">
      C
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mono/" title="C#" class="md-nav__link">
      C#
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../C++/" title="C++" class="md-nav__link">
      C++
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fortran/" title="Fortran" class="md-nav__link">
      Fortran
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GO/" title="GO" class="md-nav__link">
      GO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Java/" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Running_Java_Applications_in_Scone_with_remote_attestation/" title="Java with remote attestation" class="md-nav__link">
      Java with remote attestation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pypyscone/" title="PyPy" class="md-nav__link">
      PyPy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mono/" title="Mono" class="md-nav__link">
      Mono
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Nodejs/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../R/" title="R" class="md-nav__link">
      R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Rust/" title="Rust" class="md-nav__link">
      Rust
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      IDE Integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        IDE Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../eclipse/" title="Eclipse" class="md-nav__link">
      Eclipse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm_vscode/" title="Visual Studio Code" class="md-nav__link">
      Visual Studio Code
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Command Line Interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Command Line Interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_CLI/" title="SCONE CLI" class="md-nav__link">
      SCONE CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_toolchain/" title="SCONE SGX toolchain" class="md-nav__link">
      SCONE SGX toolchain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Curated_Images/" title="SCONE Curated Images" class="md-nav__link">
      SCONE Curated Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_TUTORIAL/" title="SCONE Static vs Dynamic" class="md-nav__link">
      SCONE Static vs Dynamic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_GENERATE_IMAGE/" title="SCONE Create Image" class="md-nav__link">
      SCONE Create Image
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Dockerfile/" title="SCONE Dockerfile" class="md-nav__link">
      SCONE Dockerfile
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Manuals
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        Manuals
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Fileshield/" title="scone fspf" class="md-nav__link">
      scone fspf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../binary_fs/" title="scone binary fs" class="md-nav__link">
      scone binary fs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_ENV/" title="environment variables" class="md-nav__link">
      environment variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../MrEnclave/" title="MrEnclave" class="md-nav__link">
      MrEnclave
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scone_affinity/" title="affinity" class="md-nav__link">
      affinity
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      Performance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        Performance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../performance/" title="Applications" class="md-nav__link">
      Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../teemon/" title="Monitoring tool" class="md-nav__link">
      Monitoring tool
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Background
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Background
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../appsecurity/" title="Application-Oriented Security" class="md-nav__link">
      Application-Oriented Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../background/" title="SCONE Background" class="md-nav__link">
      SCONE Background
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../SCONE_Publications/" title="Publications" class="md-nav__link">
      Publications
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../aboutScone/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#changes-since-version-02" title="Changes since version 0.2" class="md-nav__link">
    Changes since version 0.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-description-hash" title="Session Description Hash" class="md-nav__link">
    Session Description Hash
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-description-structure" title="Session Description Structure" class="md-nav__link">
    Session Description Structure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#version" title="Version" class="md-nav__link">
    Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#session-name" title="Session Name" class="md-nav__link">
    Session Name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#predecessor-session" title="Predecessor Session" class="md-nav__link">
    Predecessor Session
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-description" title="Service Description" class="md-nav__link">
    Service Description
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#name" title="name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#command" title="command" class="md-nav__link">
    command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" title="environment" class="md-nav__link">
    environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pwd" title="pwd" class="md-nav__link">
    pwd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image" title="Image" class="md-nav__link">
    Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attestation" title="Attestation" class="md-nav__link">
    Attestation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#measurement-based-attestation" title="Measurement-based Attestation" class="md-nav__link">
    Measurement-based Attestation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#platform-based-attestation" title="Platform-based Attestation" class="md-nav__link">
    Platform-based Attestation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secrets" title="Secrets" class="md-nav__link">
    Secrets
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secret-kinds" title="Secret Kinds" class="md-nav__link">
    Secret Kinds
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ascii-secrets" title="ASCII Secrets" class="md-nav__link">
    ASCII Secrets
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicit-secret-values" title="Explicit Secret Values" class="md-nav__link">
    Explicit Secret Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generated-secret-values" title="Generated Secret Values" class="md-nav__link">
    Generated Secret Values
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-secrets" title="Binary Secrets" class="md-nav__link">
    Binary Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#private-keys" title="Private Keys" class="md-nav__link">
    Private Keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificates" title="Certificates" class="md-nav__link">
    Certificates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-access" title="Secret Access" class="md-nav__link">
    Secret Access
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binary-secret-values" title="Binary Secret Values" class="md-nav__link">
    Binary Secret Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificate-values" title="Certificate Values" class="md-nav__link">
    Certificate Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-injection-files" title="Secret Injection Files" class="md-nav__link">
    Secret Injection Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-sharing" title="Secret Sharing" class="md-nav__link">
    Secret Sharing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-migration" title="Secret Migration" class="md-nav__link">
    Secret Migration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#volumes" title="Volumes" class="md-nav__link">
    Volumes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volume-sharing" title="Volume Sharing" class="md-nav__link">
    Volume Sharing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#images" title="Images" class="md-nav__link">
    Images
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#image-volumes" title="Image Volumes" class="md-nav__link">
    Image Volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-injection-files_1" title="Secret Injection Files" class="md-nav__link">
    Secret Injection Files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-control" title="Access Control" class="md-nav__link">
    Access Control
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attestation-security" title="Attestation Security" class="md-nav__link">
    Attestation Security
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tolerating-hardware-attestation-issues" title="Tolerating hardware attestation issues" class="md-nav__link">
    Tolerating hardware attestation issues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trusted-scone-quoting-enclaves" title="Trusted SCONE Quoting Enclaves" class="md-nav__link">
    Trusted SCONE Quoting Enclaves
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-attestation" title="Disabling attestation" class="md-nav__link">
    Disabling attestation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencing-other-sessions" title="Referencing Other Sessions" class="md-nav__link">
    Referencing Other Sessions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-cas-sessions" title="Local CAS Sessions" class="md-nav__link">
    Local CAS Sessions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sessions-on-another-cas" title="Sessions on another CAS" class="md-nav__link">
    Sessions on another CAS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url-short-form" title="URL short form" class="md-nav__link">
    URL short form
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="scone-session-language-v03">SCONE Session Language (v0.3)</h1>
<p>The SCONE session language is used to create <strong>session descriptions</strong> that entail all security-relevant details of a SCONE application. </p>
<p>A SCONE application can consist of one or more <strong>session descriptions</strong>. Each <strong>session description</strong> defines a set of</p>
<ul>
<li><strong>services</strong> that are part of the application,</li>
<li><strong>secrets</strong> that are securely stored and passed to the services,</li>
<li><strong>images</strong> that define which regions of a container (image) are <strong>encrypted</strong> or <strong>authenticated</strong>,</li>
<li><strong>volumes</strong> which are like docker volumes but encrypted, and</li>
<li><strong>access policy</strong> that defines who can read or modify the session description.</li>
</ul>
<p>The <strong>session language</strong> is a subset of <a href="https://en.wikipedia.org/wiki/YAML">YAML</a>, i.e., a session description is valid YAML.
It is similar to and takes its bearing from <a href="https://docs.docker.com/compose/compose-file/">docker-compose files</a>.
As a session description is typically stored in a file, we use <code>session file</code> as a somewhat interchangeable synonym for session description.
We use the terms <code>session description</code> and <code>session policy</code> (or just <code>policy</code>) interchangeably.</p>
<h2 id="changes-since-version-02">Changes since version 0.2</h2>
<ul>
<li>The format by which other sessions are referenced for export/import purposes has changed (see <a href="#referencing-other-sessions">Referencing Other Sessions</a>)</li>
<li>Secrets can now be exported/imported to/from sessions located on another CAS</li>
<li>Certificates can now be specified as explicit values for <code>x509</code> secrets.</li>
<li><code>x509</code> secrets now require a <code>private-key</code> secret (unless imported or given an explicit value). This allows more fine-grained export rules (exporting only the certificate, but not the private key) and issuing multiple certificates using the same key</li>
<li><code>x509</code> secrets have new parameters: <code>private_key</code>, <code>common_name</code>, <code>endpoint</code>, <code>dns</code>, <code>issuer</code>, <code>valid_for</code></li>
<li>Access Control Policies now use certificate keys instead of entire certificates - certificate hashes have been replaced by certificate key hashes</li>
</ul>
<h2 id="session-description-hash">Session Description Hash</h2>
<p>Each session description has a unique hash value, in short just <code>session hash</code>.
This value is used to reference the session in multiple situations.
For example, when a session shall be updated the hash of the predecessor session has to be provided to ensure continuity, i.e., no lost-updates.</p>
<p>The session hash is deterministically calculated from the session description, such that any modification to the description would yield a different hash.
Moreover, the calculation is cryptographically sound in the sense that a malicious operator can not come up with a modified session description that has the same session hash, i.e., it is <a href="https://en.wikipedia.org/wiki/Preimage_attack">Preimage-Attack</a> resistant.</p>
<p>The exact procedure of how the session hash is obtained is an implementation detail.
<!-- TODO Have a properly defined procedure. --></p>
<h2 id="session-description-structure">Session Description Structure</h2>
<p>There are a number of top-level keys in a session file.</p>
<h3 id="version">Version</h3>
<p>This document describes version 0.3.</p>
<div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span> <span class="s">&quot;0.3&quot;</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Without a <code>version</code> field, version 0.1 is assumed, make sure to include the field in all session descriptions in order to use version 0.3.</p>
</div>
<h3 id="session-name">Session Name</h3>
<p>Every session description has to provide a <code>session name</code>, or short just <code>name</code>.
The session name is used to reference a session over the course of its lifetime: while a <code>session hash</code> identifies a unique, not mutable description of a session, the session description references by a <code>session name</code> can be changed by the session's owner.
Thus, the <code>session name</code> is the primary property with which a session is referenced outside of session management.</p>
<p>As sessions will be routeable in a future version of CAS and session names are the primary way of referencing a session, they have to obey certain restrictions regarding the allowed character set.
To prevent issues with future use of session names within URIs their characters have to be drawn from the "Unreserved Characters" in URIs as defined by <a href="https://www.ietf.org/rfc/rfc3986.txt">RFC3986</a>.
Further, we set a somewhat arbitrary restriction of a maximal length of 128 characters.
In <a href="https://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions">PCRE</a> the match clause matching valid session names would be <code>[A-Za-z0-9_\-.~]{1,128}</code>.</p>
<div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-testing-session</span>
</pre></div>

<p>Providing a session name is <strong>mandatory</strong>.</p>
<h3 id="predecessor-session">Predecessor Session</h3>
<p>If a session description is an update for a previously existing session, i.e. the session's name is already in use, it has to include the previous session's hash to detect and prevent lost updates.</p>
<div class="highlight"><pre><span></span><span class="nt">predecessor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The value has to be 32 hex encoded bytes.</p>
</div>
<p>When creating a session, no predecessor session exists and hence no <code>predecessor</code> key is permitted.</p>
<h2 id="service-description">Service Description</h2>
<p>Services of a SCONE application are described below the <code>services</code> top-level key.
A service in a SCONE session is a SCONE program with a specific software state and configuration.
For now, there can be an unlimited number of instances of a service.</p>
<p>In the current version, the service description specifies the service configuration and which software (code) is allowed to access it.
A service configuration consists of the command to be executed, any environment variables and the process working directory from which path resolution of relative paths starts.
These properties may contain secrets and would be prone to inspection and manipulation by adversaries.</p>
<div class="highlight"><pre><span></span><span class="nt">services</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-test-service</span>
    <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test --arg=value</span>
    <span class="nt">environment</span><span class="p">:</span>
        <span class="nt">VAR_1</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">value</span>
    <span class="nt">pwd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/</span>
</pre></div>

<h3 id="name">name</h3>
<p>To be able to identify a service, every service has to have a <code>name</code> key.
As the name will be part of the routeable session identification in the future, its character set and length is restricted in the same way as the session name is.</p>
<div class="highlight"><pre><span></span>    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-test-service</span>
</pre></div>

<p>Providing a service name is <strong>mandatory</strong>.</p>
<h3 id="command">command</h3>
<p>The command of a service is a sequence of the program's name plus any <a href="https://en.wikipedia.org/wiki/Command-line_interface#Arguments">command-line arguments</a> that have to be provided for it to deliver the expected service.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first element of the command, the program name, should match the actual program's file name.
Although not enforced, in the future automatic scheduling will not function properly if the provided program name does not match.</p>
</div>
<div class="highlight"><pre><span></span>    <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test --arg=value</span>
</pre></div>

<p>The command is split at whitespace characters. If spaces should be preserved for an argument, either quote the argument (with single or double quotes):</p>
<div class="highlight"><pre><span></span>    <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mysql -e &quot;show databases;&quot;</span>
</pre></div>

<p>or use a list instead:</p>
<div class="highlight"><pre><span></span>    <span class="nt">command</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;mysql&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;-e&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;show</span><span class="nv"> </span><span class="s">databases;&quot;</span><span class="p p-Indicator">]</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Command arguments have to be C-String compatible, i.e., they are not allowed to contain a NULL byte.</p>
</div>
<h3 id="environment">environment</h3>
<p>The <a href="https://en.wikipedia.org/wiki/Environment_variable">environment variables</a> provide a process with values that are needed to provide the expected service.
As we cannot trust pre-existing environment variables, only the environment specified in the session policy will be available to the SCONE program.</p>
<div class="highlight"><pre><span></span>    <span class="nt">environment</span><span class="p">:</span>
        <span class="nt">VAR_1</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">value</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>Variable names and values have to be C-String compatible, i.e. they are not allowed to contain the NULL byte. Moreover, variable names are not allowed to contain the equal (=) sign.</li>
<li>Environment variables that are consumed during enclave creation (e.g., <code>SCONE_HEAP</code>), or used by the SCONE runtime (e.g., <code>SCONE_CAS_ADDR</code>) should not be included in the list of environment variables for the service as they will have no effect. Instead, they should be provided directly during program invocation. Note that the value of <code>SCONE_HEAP</code> affects <code>mrenclave</code> and via <code>mrenclave</code>, a session description can also limit the set of permitted <code>SCONE_HEAP</code> values.</li>
</ul>
</div>
<h3 id="pwd">pwd</h3>
<p>The <a href="https://en.wikipedia.org/wiki/Working_directory">process working directory (pwd)</a>, or current working directory (cwd), is the directory from which relative paths are resolved.
For example, a program writing a private key to <code>private.key</code> with pwd of <code>/encrypted/</code> would resolve actually write to <code>/encrypted/private.key</code>.
Changing the pwd to <code>/plaintext/</code> before the writing would lead it to write the private key to <code>/plaintext/private.key</code> instead.
To prevent this kind of manipulation the pwd of a SCONE service has to be specified explicitly in the session description.</p>
<div class="highlight"><pre><span></span>    <span class="nt">pwd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/home/user/scone/encrypted</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that:
- The specified directory has to exist in the environment the SCONE program will be executed in. If it is not found, the program cannot start.
- The provided value has to be C-String compatible, i.e. it is not allowed to contain the NULL byte.
- The allowed character may be further restricted by the used file system.</p>
</div>
<h3 id="image">Image</h3>
<p>A service can optionally use an image, which has to be specified as part of the session (see Section <a href="#images">Images</a>).</p>
<div class="highlight"><pre><span></span><span class="nt">services</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_service</span>
    <span class="nt">image_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_image</span>
</pre></div>

<p>Images must be specified if their volumes or secret injection files should be used by a service.</p>
<h3 id="attestation">Attestation</h3>
<p>Attestation is the process of verifying a remote SCONE program's integrity ensuring it has not been (maliciously) manipulated.
SCONE programs have to engage into attestation with CAS to be allowed to access their service's configuration and secrets.
That is, only SCONE programs that can show (using attestation) that they satisfy a certain attestation policy are provided with arguments, environment variables, and secrets.</p>
<p>The service-level attestation configuration depends on the session's <a href="#attestation-security">attestation security settings</a>. If attestation has been disabled for the whole session, then the following sections do not apply.</p>
<h4 id="measurement-based-attestation">Measurement-based Attestation</h4>
<p>Measurement-based attestation gives access to service secrets based on the enclave measurement value, abbreviated as <code>mrenclave</code>.
An enclave measurement value uniquely identifies its initial state.
The measurement value of a SCONE program can be determined by running it either with <code>SCONE_VERSION</code> or <code>SCONE_HASH</code> environment variables set.</p>
<p>For example, if you have an executable <code>go-webserver</code> you can determine its measurement value by executing:</p>
<div class="highlight"><pre><span></span>$ <span class="nv">SCONE_HASH</span><span class="o">=</span><span class="m">1</span> ./go-webserver
d08b7351eeb8d5c0653d32794218f183ac9c6fa3923b67052752f78a3559de61
</pre></div>

<p>Any modifications to the executable, malicious or not, will void access capabilities.</p>
<p>A service can define a list of mrenclaves that are allowed to get access to the configuration as follows:</p>
<div class="highlight"><pre><span></span>    <span class="nt">mrenclaves</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">d08b7351eeb8d5c0653d32794218f183ac9c6fa3923b67052752f78a3559de61</span><span class="p p-Indicator">]</span>
</pre></div>

<p>For example, you can define <code>mrenclave</code>s for different permitted <code>HEAP_SIZE</code>s. Also, to permit a smooth transition to new service versions, you can first add the mrenclaves of the new version, upgrade the services, and then remove the <code>mrenclave</code>s of the old service version. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>The enclave measurement value (<code>mrenclave</code>) has to be a sequence of 32 hex encoded bytes.</li>
<li><code>mrenclave</code> is <strong>mandatory</strong>.</li>
</ul>
</div>
<h4 id="platform-based-attestation">Platform-based Attestation</h4>
<p>Platform-based attestation gives access to services that are deployed on a specific platform.
<strong>This is not sufficiently secure on its own to prevent program manipulation!</strong>
Thus, platform-based attestation should always be combined with the measurement-based attestation.</p>
<p>The <code>platform</code> identity is the public key of the SCONE Quoting Enclave (SCONE QE), which is part of the <strong>SCONE Local Attestation Service (LAS)</strong>.
The SCONE QE will have a unique public key on each platform. Platforms that are allowed to get access to the configuration can be specified as follows:</p>
<div class="highlight"><pre><span></span>  <span class="nt">platforms</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">23653F9C4F55E92625752EA1883384531F28679D3E708EDF3BD535A36AEC6B2F</span><span class="p p-Indicator">]</span>
</pre></div>

<p>Platform-based attestation requires the SCONE attestation scheme, which is used by default.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The platform identity has to be a sequence of 32 hex-encoded bytes (i.e., 64 characters).</p>
</div>
<h2 id="secrets">Secrets</h2>
<p>Secrets are defined in the <code>secrets</code> section of the session.
Each secret is uniquely identified with a name.
The values of secrets are either generated by CAS or are explicitly given in the session.
The former has the advantage that the secret value can be ensured to be never known by any human.</p>
<h3 id="secret-kinds">Secret Kinds</h3>
<p>In most cases, the kind of a secret has to be specified as well.
This is necessary for CAS to know how to <strong>generate</strong> its value or how to interpret the value provided in the session, in the case of <strong>explicit secrets</strong>.</p>
<p>We support these four kinds of secrets: <code>ascii</code>, <code>binary</code>, service leaf and intermediate <strong>certificates</strong>.</p>
<h4 id="ascii-secrets">ASCII Secrets</h4>
<p>An ASCII secret is a string compromised of ASCII characters guaranteed not to contain NULL bytes.</p>
<h5 id="explicit-secret-values">Explicit Secret Values</h5>
<p>In case of an explicit secret, the value can contain all characters that can be put into a string in YAML, for example:</p>
<div class="highlight"><pre><span></span><span class="nt">secrets</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_explicit_ascii_secret</span>
      <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ascii</span>
      <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;secret-value&quot;</span>
</pre></div>

<p>Note that explicit secret values can contain any character that can be represented in YAML.
In particular, newline and escape sequences can be put into such a secret.
The only exception to this rule is the NULL byte that can not be part of an ascii secret.
Be sure that your application can handle these edge-cases.</p>
<h5 id="generated-secret-values">Generated Secret Values</h5>
<p>If no <code>value</code> field is specified, CAS will generate a secret value on-demand.
The generated string will only contain printable ascii characters.
In this case, you may specify the length of the string to generate with the <code>size</code> field.
If no <code>size</code> is given, a default length of 20 will be used.</p>
<div class="highlight"><pre><span></span><span class="nt">secrets</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_generate_ascii_secret</span>
      <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ascii</span>
      <span class="nt">size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12</span>
</pre></div>

<h4 id="binary-secrets">Binary Secrets</h4>
<p><code>binary</code> secrets behave similar to <code>ascii</code> secrets except </p>
<ul>
<li>they can contain NULL bytes,</li>
<li>generated values are not restricted to printable ascii characters, and </li>
<li>explicit secret values have to be specified encoded in hex.</li>
</ul>
<div class="highlight"><pre><span></span><span class="nt">secrets</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_generated_binary_secret</span>
      <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">binary</span>
      <span class="nt">size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">32</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_explicit_binary_secret</span>
      <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">binary</span>
      <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">DEADBEEF</span>
</pre></div>

<h4 id="private-keys">Private Keys</h4>
<p>Private keys are required when generating X.509 certificates (refer to the next section).
Possession of a certificate's private key is necessary in order to sign other certificates or use them as e.g. TLS server or client certificates.</p>
<p>Defining an automatically generated private key is simple:</p>
<div class="highlight"><pre><span></span><span class="nt">secrets</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_tls_server_private_key</span>
      <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">private-key</span>
</pre></div>

<p>Generated private keys use the NIST P-256 elliptic curve.</p>
<p>Alternatively, a PEM-encoded PKCS#8 P-256 EC private key may also be specified explicitly:</p>
<div class="highlight"><pre><span></span><span class="nt">secrets</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_tls_server_private_key</span>
      <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">private-key</span>
      <span class="nt">value</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">-----BEGIN PRIVATE KEY-----</span>
        <span class="no">...</span>
        <span class="no">-----END PRIVATE KEY-----</span>
</pre></div>

<p>Private keys are accessible in PEM-encoded PKCS#8 format.</p>
<h4 id="certificates">Certificates</h4>
<p>CAS is able to generate and manage X.509v3 certificates, making it easy to construct a Public Key Infrastructure (PKI).</p>
<p>There are two kinds of X.509 certificates that CAS supports: <strong>End-entity</strong> and <strong>Certification Authority (CA)</strong> certificates.
Their main difference is in their capability to sign other certificates.
End-entity certificates are indicated by kind <code>x509</code>, CA certificates by <code>x509-ca</code>.</p>
<p>Additional parameters can be specified for certificates:</p>
<ul>
<li><code>private_key</code>: Unless imported or given an explicit value, each certificate requires a private key, referencing another <code>private-key</code> secret.</li>
<li><code>issuer</code>: Optional reference to another <code>x509-ca</code> certificate which signs this certificate.
    If omitted, generated certificates will be self-signed.
    Note that access to the issuer's private key is required for signing unless an explicit certificate <code>value</code> is specified.</li>
<li><code>common_name</code>: An optional certificate common name.
    If omitted, the first <code>dns</code> name (see below) will be used as the common name.
    If no DNS name has been specified, the secret's <code>name</code> will be used as the common name.</li>
<li><code>endpoint</code>: Optional, must be either <code>server</code> or <code>client</code> when specified.
    When specified, an <em>Extended Key Usage</em> (EKU) extension will be added to the generated certificate.
    If omitted, no EKU extension will be added. Only applicable to end-entity certificates.</li>
<li><code>dns</code>: Optional DNS name or list of DNS names that will be included in the <em>Subject Alternative Name</em> (SAN) extension of the generated certificate.
    If omitted, no SAN extension will be added.
    Only applicable to end-entity certificates. Cannot be used when the certificate has a <code>client</code> endpoint.</li>
<li><code>valid_for</code>: Optional duration (e.g.: <code>1 year</code> or <code>59d</code>) for which generated certificates are valid.
    Certificates will automatically be re-generated before they expire.
    If omitted, generated certificates stay valid for a virtually unlimited amount of time.
    Not applicable to imported certificates or certificates with an explicit <code>value</code>. </li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="nt">secrets</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_ca_certificate</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">x509-ca</span>
    <span class="nt">private_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_ca_private_key</span>
    <span class="nt">common_name</span><span class="p">:</span> <span class="s">&quot;My</span><span class="nv"> </span><span class="s">own</span><span class="nv"> </span><span class="s">CA&quot;</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_server_certificate</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">x509</span>
    <span class="nt">private_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_server_certificate_private_key</span>
    <span class="nt">issuer</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_ca_certificate</span>
    <span class="nt">common_name</span><span class="p">:</span> <span class="s">&quot;example.com&quot;</span>
    <span class="nt">valid_for</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">90 days</span>
    <span class="nt">endpoint</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server</span>
    <span class="nt">dns</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">example.com</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">db.example.com</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;*.api.example.com&quot;</span>
</pre></div>

<p>By default, certificates will be generated by CAS, but they can also be given an explicit PEM-encoded value instead:</p>
<div class="highlight"><pre><span></span><span class="nt">secrets</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_server_certificate</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">x509</span>
    <span class="nt">value</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">-----BEGIN CERTIFICATE-----</span>
      <span class="no">MIIB0TCCAXigAwIBAgIUX4hfQWl+PKcrmOFW8phCO1vtQpUwCgYIKoZIzj0EAwIw</span>
      <span class="no">HzEdMBsGA1UEAwwUVGVzdCBJbnRlcm1lZGlhdGUgQ0EwIBcNMjAwNTA2MTQ1NTAx</span>
      <span class="no">WhgPMzAxOTA5MDcxNDU1MDFaMBYxFDASBgNVBAMMC2V4YW1wbGUuY29tMFkwEwYH</span>
      <span class="no">KoZIzj0CAQYIKoZIzj0DAQcDQgAE1gqmACizRH9ENwun/rkmqoCjxf6NPJNHTpYg</span>
      <span class="no">y8D5UOy5HNZXSi6ZNNL1x89d6UZfrYfDrf/PwH5LOhrgfkm42aOBmDCBlTAdBgNV</span>
      <span class="no">HQ4EFgQUw3LfMbqwEJJRr5v7itg4A5jR0ngwHwYDVR0jBBgwFoAUHgrspKzSFC8r</span>
      <span class="no">0/ygrsQIGA+Ft6MwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMB</span>
      <span class="no">BggrBgEFBQcDAjAMBgNVHRMBAf8EAjAAMBYGA1UdEQQPMA2CC2V4YW1wbGUuY29t</span>
      <span class="no">MAoGCCqGSM49BAMCA0cAMEQCIAC7fWVRBG3mBzfyKf/WidYVL9IcAOdYsElgHTKb</span>
      <span class="no">5h5HAiBlXklXq2lXo3srdQNJ4I8QJwWMYLIZUUw7fmWKOaireg==</span>
      <span class="no">-----END CERTIFICATE-----</span>
</pre></div>

<p>Certificates differ from other secrets in terms of access.
Please see the <code>Secret Access</code> chapter for the details.</p>
<div class="admonition info">
<p class="admonition-title">Certificate Verification Failure</p>
<p>If the verification of the generated certificate fails, this is often an indication that the <code>common_name</code> or the <code>dns</code> names (<em>Subject Alternative Name</em>) are not matching the DNS name of the service
that use this certificate.</p>
</div>
<h3 id="secret-access">Secret Access</h3>
<p>Secrets are injected via standard means (program arguments, environment, and configuration files) into a service.
Secret values are not directly included in a service's configuration as this would bound the service to specific secrets.
Instead placeholder variables are put that are replaced during runtime in the service.
These placeholders are of the form <code>$$SCONE::secret_name$$</code>.</p>
<p>For example, to inject a secret into a service's program arguments its command field in the session description could look like this:</p>
<div class="highlight"><pre><span></span>    <span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
    <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">service_name --private-key $$SCONE::service_private_key$$ --non-confidential-argument 1234 --non-confidential-flag</span>
    <span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
</pre></div>

<p>In the above example, the <code>command</code>'s program arguments will be presented to the service with <code>$$SCONE::service_private_key$$</code> replaced by the actual value of <code>service_private_key</code>.</p>
<p>To inject secrets into a service's environment the session description could contain this:</p>
<div class="highlight"><pre><span></span>    <span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="nt">FILE_ENCRYPTION_KEY</span><span class="p">:</span> <span class="s">&quot;$$SCONE::MY_SERVICES_ENCRYPTION_SECRET$$&quot;</span>
    <span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Secrets referred to (<code>service_private_key</code> and <code>MY_SERVICES_ENCRYPTION_SECRET</code> in the above example) have to be either defined in the <code>secrets</code> section of the session description or imported from another session.</p>
</div>
<h4 id="binary-secret-values">Binary Secret Values</h4>
<p>By default, when using <code>$$SCONE::my_secret$$</code>, binary secrets are injected in binary form. When working with environment variables or command line arguments, a hexadecimal representation may be preferable: <code>$$SCONE::my_secret.hex$$</code></p>
<h4 id="certificate-values">Certificate Values</h4>
<p>Certificate secrets may be composed of multiple values:
First off the certificate itself, optionally (if accessible) their private key, and lastly they may have an attached certificate chain.</p>
<p>These values are available with suffixes to the secret name in the placeholder.
Consider a certificate with name <code>my_cert</code>, the following placeholders are available for secret consumption:
* <code>$$SCONE::my_cert.crt$$</code> delivers the certificate in PEM-encoding,
* <code>$$SCONE::my_cert.key$$</code> delivers the certificate's private key in PEM-encoding, and
* <code>$$SCONE::my_cert.chain$$</code> delivers the certificate's chain in PEM-encoding, with the root CA certificate first and the certificate itself last (included). Root CA certificate and topmost intermediate CA certificates may be omitted if they are not known or the certificate is self-signed.</p>
<p>Note that the <code>.key</code> suffix is not guaranteed to exist, it is for instance not available when importing certificates from another session which does not grant access to the certificates' private keys.</p>
<h4 id="secret-injection-files">Secret Injection Files</h4>
<p>A secret injection file is a file in the file system that will be updated with secrets received by the runtime from CAS.
They use the same secret placeholders that can also be used in program arguments and environment variables.</p>
<p>For example, imagine a service configuration file containing a password.
Simply writing the password into the file in cleartext would leak it - that is not an option.
Using SCONE's filesystem shield to encrypt the file complicates the setup, and - if distributed as part of an image - would require users to change the encryption keys in order to protect their individual passwords.
Instead, a secret injection file allows to specify a placeholder for the password, which will be dynamically replaced at runtime through the means of secret injection:</p>
<p><code>/etc/mysql/my.cnf</code>:</p>
<div class="highlight"><pre><span></span>[client]
user=mysqluser
password=$$SCONE::mysqlpass$$
</pre></div>

<p>The path to this configuration file must be specified as part of an image (see <a href="#images">Images</a>). The corresponding session would look like this:</p>
<div class="highlight"><pre><span></span><span class="nt">services</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database_client</span>
    <span class="nt">image_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_db_client_image</span>

<span class="nt">images</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_db_client_image</span>
    <span class="nt">injection_files</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/etc/mysql/my.cnf</span>
</pre></div>

<p>Alternatively, the file's content may be specified within the session:</p>
<div class="highlight"><pre><span></span><span class="nt">services</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database_client</span>
    <span class="nt">image_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_db_client_image</span>

<span class="nt">images</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_db_client_image</span>
    <span class="nt">injection_files</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/mysql/my.cnf</span>
        <span class="nt">content</span><span class="p">:</span> <span class="p p-Indicator">|</span>
          <span class="no">[client]</span>
          <span class="no">user=mysqluser</span>
          <span class="no">password=$$SCONE::mysqlpass$$</span>
</pre></div>

<p>The <code>content</code> specified in the session file can contain multiline strings.
This way, entire configuration files can be embedded in the session description, even if no secret injection is required.
Producing valid multiline strings in YAML can be challenging - <a href="https://yaml-multiline.info/">https://yaml-multiline.info/</a> can be of great help to find the desired syntax.</p>
<p>Secret injection files are prepared during SCONE runtime initialization.
If the file content is not provided in the session, the file at the specified path is opened, potentially through SCONE's filesystem shield, and read into memory.
The secret injection is applied and the resulting file is put into SCONE's in-memory file system at the specified path.
Any application requests regarding this file are served from this in-memory file system.
Thus, modifications to secret injection files are not propagated into the file system and are not persistent across program invocations.</p>
<h4 id="secret-sharing">Secret Sharing</h4>
<p>Session owners can decide to share their secrets with other parties to enable collaboration.
For example, database operators could use TLS to implement access control to databases.
They would define an access certificate, configure the database to only allow connections from said certificate and export it to the database client:</p>
<div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_operator</span>

<span class="nt">secrets</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_access_key</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">private-key</span>
    <span class="nt">export</span><span class="p">:</span> 
      <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_client</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_access_certificate</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">x509</span>
    <span class="nt">private_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_access_key</span>
    <span class="nt">export</span><span class="p">:</span> 
      <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_client</span>
</pre></div>

<p>The secret owner might also specify multiple receiving sessions at once:</p>
<div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_operator</span>

<span class="nt">secrets</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_access_key</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">private-key</span>
    <span class="nt">export</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_client</span>
      <span class="p p-Indicator">-</span> <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">another_client</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_access_certificate</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">x509</span>
    <span class="nt">private_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_access_key</span>
    <span class="nt">export</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_client</span>
      <span class="p p-Indicator">-</span> <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">another_client</span>
</pre></div>

<p>Furthermore, the export might be restricted to certain instances of the importing session.
For more details, see the concrete SCONE ID format by which other sessions can be referenced in <a href="#referencing-other-sessions">Referencing Other Sessions</a>.</p>
<p>The database client, on the other hand, would import it and could use it in their session as if it was their own certificate:</p>
<div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_client</span>

<span class="nt">secrets</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_access_certificate</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">x509</span> <span class="c1"># optional</span>
    <span class="nt">import</span><span class="p">:</span>
      <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_operator</span>
      <span class="nt">secret</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database_access_certificate</span>
</pre></div>

<p>On the importing side, the <code>kind</code> of a secret can be optionally defined to ensure imported secrets match a specific form, but this is not strictly necessary.
When importing certificates, the associated <code>private-key</code> does not have to be imported explicitly - it will be available automatically if the exporting session exports the private key as well.</p>
<p>In very specific cases, secrets may also be made public (exported to anyone <em>without authentication</em>) - this may be useful when, for example, defining certificate key hashes:</p>
<div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">policy_checker</span>

<span class="nt">secrets</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">certificate_hash</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ascii</span>
    <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;4sEY84YhUKT7Q7m4qUj2pmQMxFvZK5XpDyJ3QR6mETVRDkyren&quot;</span>
    <span class="nt">export_public</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>

<p>This hash can be used in another session's access control policy through secret substitution (see <a href="#access-control">Access Control</a>):</p>
<div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">checked_session</span>

<span class="nt">secrets</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">policy_checker_certificate_hash</span>
    <span class="nt">import</span><span class="p">:</span>
      <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">policy_checker</span>
      <span class="nt">secret</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">certificate_hash</span>

<span class="nt">access_policy</span><span class="p">:</span>
  <span class="nt">read</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;$$SCONE::policy_checker_certificate_hash&quot;</span>
</pre></div>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>By using <code>export_public: true</code>, the whole world will be able to see the secret value. Make sure this is your intention.
These secrets may also be queried through the <code>/v1/values</code> CAS REST API endpoint.</p>
</div>
<h3 id="secret-migration">Secret Migration</h3>
<p>When uploading a new session which has a predecessor session, secret migration takes place.
In short: ASCII and binary secret values which were generated as part of the old session will be kept when the new session defines a secret with the same name and compatible kind.</p>
<p>Example old session:</p>
<div class="highlight"><pre><span></span><span class="nt">secrets</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_generated_ascii_secret</span>
      <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ascii</span>
      <span class="nt">size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foobar</span>
      <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">binary</span>
      <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">DEADBEEF</span>
</pre></div>

<p>Example new session:</p>
<div class="highlight"><pre><span></span><span class="nt">secrets</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_generated_ascii_secret</span>
      <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ascii</span>
      <span class="nt">size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foobar</span>
      <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">private-key</span>
</pre></div>

<p>In the given example, the value of <code>my_generated_ascii_secret</code> will be kept, as it stays an ASCII secret of the same size, whereas <code>foobar</code> will be freshly generated, since its kind changed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Generated private keys and certificates will never be kept, they will always be re-generated when updating a session.</p>
</div>
<p>Secret migration also takes place when using a different session description language version (e.g. 0.2 -&gt; 0.3)!
For details, see <a href="../session_secret/#secret-migration">the session secrets migration documentation</a>.</p>
<h2 id="volumes">Volumes</h2>
<p>Similar to Docker, the <code>volumes</code> keyword allows to specify file system regions that can be mounted into the file system in addition to the regions specified by the main file system protection file of a service. Each volume has an arbitrary but unique <code>name</code>. In order to grant services access to a volume, it first has to be included in an image (see section <a href="#images">Images</a>). Subsequently, the image can be specified for a service (see section <a href="#service-description">Service Description</a>), and all image-defined volumes will be mounted automatically.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The volume <code>name</code> is not the volume's mount point. The latter is defined as part of an <a href="#images">image</a>.</p>
</div>
<p>Each volume can have a file system protection file key (<code>fspf_key</code>) and file system protection file tag (<code>fspf_tag</code>):</p>
<div class="highlight"><pre><span></span><span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database</span>
    <span class="nt">fspf_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">f843051d21afa9e52a5b54a708a8032bc49581e982696a81393b8da4a32d00b8</span>
    <span class="nt">fspf_tag</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8d8fbe332fb9c893020be791ccd3e8a8</span>
</pre></div>

<p><code>fspf_key</code> is the key used to encrypt <code>volume.fspf</code> (file system protection file for the volume) and <code>fspf_tag</code> describes the initial state of the volume. On each volume update (e.g., creation of a file in the region or update of an existing file), the SCONE runtime will send a new <code>fspf_tag</code> to CAS to ensure integrity and freshness of the volume state.</p>
<p>If neither <code>fspf_key</code> nor <code>fspf_tag</code> are specified, a volume will be automatically initialized during the first use:</p>
<div class="highlight"><pre><span></span><span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database</span>
</pre></div>

<p>The volume will contain a single encrypted region, and a new key will be generated by CAS to encrypt <code>volume.fspf</code>. Once initialized, CAS and the runtime will work together to track the updates of the volume, similar to a regular volume. This ensures that a volume can be initialized only once. Use of automatically initialized volumes ensures that the key for the file system is only visible inside of CAS and the application(s) that get access to this volume, i.e., no system administrator will ever see the volume key.</p>
<h3 id="volume-sharing">Volume Sharing</h3>
<p>Volumes may be exported to other sessions, which implies authorizing the other sessions to decrypt and read existing files or encrypt and store new files:</p>
<div class="highlight"><pre><span></span><span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database</span>
    <span class="nt">export</span><span class="p">:</span>
      <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">another-session</span>
</pre></div>

<p>or</p>
<div class="highlight"><pre><span></span><span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database</span>
    <span class="nt">export</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">another-session</span>
      <span class="p p-Indicator">-</span> <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foobar</span>
        <span class="nt">session_hash</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">668e9aaba22c7631bbcc89b627d77e53539bcaade9e7c2c08242f56aab272088</span>
</pre></div>

<p>The concrete SCONE ID format by which other sessions can be referenced is described in section <a href="#referencing-other-sessions">Referencing Other Sessions</a>.
Note that volumes can only be exported to local sessions on the same CAS, not to sessions on a remote CAS.</p>
<p>Similarly, volumes may be imported from another session (in which case fspf key/tag and export list must be omitted):</p>
<div class="highlight"><pre><span></span><span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">their_database</span>
    <span class="nt">import</span><span class="p">:</span>
      <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">the_exporting_session</span>
      <span class="nt">volume</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database</span>
</pre></div>

<p>When exporting a volume, it is possible to restrict which kind of modifications an importing session is allowed to perform. Section <a href="#image-volumes">Image Volumes</a> demonstrates how volume access can be restricted for local services; the same is also possible for volume exports by using the <code>update_policy</code> key:</p>
<div class="highlight"><pre><span></span><span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database</span>
    <span class="nt">export</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">to</span><span class="p">:</span>
          <span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foobar</span>
          <span class="nt">session_hash</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">668e9aaba22c7631bbcc89b627d77e53539bcaade9e7c2c08242f56aab272088</span>
        <span class="nt">update_policy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ephemeral</span>
</pre></div>

<p>Note that the SCONE ID (<code>session</code> and <code>session_hash</code>) needed to be moved to a new <code>to:</code> section!</p>
<p><code>update_policy</code> can have any of the following values:</p>
<ul>
<li><code>ephemeral</code>: Importing sessions may only use the <code>ephemeral</code> policy. This implies that they are not allowed to alter the volume's state on the CAS (please read <a href="#image-volumes">Image Volumes</a> for further explanation). Any tag policy specified by the importing session is ignored.</li>
<li><code>rollback_protected</code>: This is the default setting if <code>update_policy</code> is omitted. Importing sessions can use either a <code>rollback_protected</code> or an <code>ephemeral</code> policy at their discretion.</li>
<li><code>no_rollback_protection</code>: Importing sessions are allowed to use a <code>rollback_protected</code>, <code>ephemeral</code> or <code>no_rollback_protection</code> policy at their discretion. This option is dangerous, as it also allows third parties to perform rollbacks unnoticed. It should not be necessary for most use cases.</li>
</ul>
<h2 id="images">Images</h2>
<p>The <code>images</code> keyword allows specifying images usable by services (see section <a href="#service-description">Service Description</a>). Each image has an arbitrary but unique <code>name</code>:</p>
<div class="highlight"><pre><span></span><span class="nt">images</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_image</span>
</pre></div>

<h3 id="image-volumes">Image Volumes</h3>
<p>Images may define access to <a href="#volumes">volumes</a>, by referencing a previously declared volume's <code>name</code> and giving it a mount point (<code>path</code>):</p>
<div class="highlight"><pre><span></span><span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database</span>

<span class="nt">images</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_image</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/media/database</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The given path must already exist in the filesystem, e.g., through a mounted docker volume. The information provided as part of the session description are only used to encrypt and authenticate all of the volume's files. The CAS does not actually store the encrypted files.</p>
</div>
<p>By default, volumes are rollback-protected: Attempting to restore an old volume state and letting a service read files from or write files to this old state will be detected and prevented. In specific cases, however, this may not be the desired behavior. The <code>update_policy</code> key can be used to change it:</p>
<div class="highlight"><pre><span></span><span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database</span>

<span class="nt">images</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_image</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_database</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/media/database</span>
        <span class="nt">update_policy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">no_rollback_protection</span>
</pre></div>

<p>The following values are possible as a volume <code>update_policy</code> policy:</p>
<ul>
<li><code>rollback_protected</code>: This is the default setting if <code>update_policy</code> is omitted. Services are allowed to alter the volume state, any rollback will be detected and lead to an error upon access. This ensures a coherent, linear history of volume changes.</li>
<li><code>ephemeral</code>: Any changes done to the volume state will be ignored by CAS. This can be useful when a volume is supposed to remain in a specific state - an initialization service could use an image with volume <code>update_policy: rollback_protected</code> to prepare the volume, and all other services can use <code>update_policy: ephemeral</code> in order to ignore further modifications. Note that this does not prevent services from modifying files and directories in the volume's path! This will still work as long as the service is running. Once it is restarted, however, CAS will detect the modification and refuse any access to the modified volume. Therefore, if you expect services to make changes to the volume, it is a good idea to back up the initialized volume, and restore this backup once the service is stopped. This ensures that new instances of the service are able to access the volume in its expected state.</li>
<li><code>no_rollback_protection</code>: Services are allowed to alter the volume's state and rollback prevention checks are disabled. This option is dangerous, as it also allows third parties to perform rollbacks unnoticed. It should not be necessary for most use cases.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using an imported volume, the exporting session may have applied restrictions on the volume's <code>update_policy</code>.
Attempting to use an unauthorized <code>update_policy</code> will lead to errors upon volume access.
For details, please refer to section <a href="#volume-sharing">Volume Sharing</a>.</p>
</div>
<h3 id="secret-injection-files_1">Secret Injection Files</h3>
<p>Images may also contain secret injection files, a way to inject secrets into configuration files:</p>
<div class="highlight"><pre><span></span><span class="nt">images</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">proxy_image</span>
    <span class="nt">injection_files</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/etc/nginx/nginx.conf</span>
      <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/mysql/my.cnf</span>
        <span class="nt">content</span><span class="p">:</span> <span class="p p-Indicator">|</span>
          <span class="no">[client]</span>
          <span class="no">user=mysqluser</span>
          <span class="no">password=$$SCONE::mysqlpass$$</span>
</pre></div>

<p>For details, refer to section <a href="#secret-injection-files">Secret Injection Files</a>.</p>
<h2 id="access-control">Access Control</h2>
<p>Any operation on a session description requires permission. If the entity requesting a certain operation is not explicitly permitted to perform said operation, the request will fail. The <code>access_policy</code> keyword allows specifying lists of entities that are allowed to perform the following operations:</p>
<ul>
<li><code>read</code>: permit to read the policy - without the secrets</li>
<li><code>update</code>: permit to update the policy. Note that entities listed here must also be present under <code>read</code>.</li>
</ul>
<p>Granting permission to a certain entity to perform one of these operations involves adding their client certificate public key to the list of authorized entities.
A certificate with this key shall be used when establishing a connection to CAS (see <a href="../cas-api/">API Documentation, Authentication section</a>). TLS ensures that the client is in possession of the corresponding private key.
 CAS uses key-based authentication instead of whole certificate authentication to ensure that certificates can be renewed without problems - otherwise, users could be locked out of the session when their certificate expires.
 When using the scone CLI, the user certificate can be shown by running <code>scone self show</code>.</p>
<p>Beside public certificates, the following values can be used:</p>
<ul>
<li>Public key hash of a certificate. This hash can be calculated by using the SCONE CLI: <code>scone self show</code> shows the hash of the CLI client identity, <code>scone cert show-key-hash "path_to_certificate_file_in_pem_format"</code> shows the key hash for any certificate file. A valid hash looks similar to: <code>3s1pm8W6Be6cxvAQRbRP5YXd9YuERAr7KswN97uGtoPkRW87x1</code></li>
<li><code>CREATOR</code> keyword: permit access to the creator of the policy: this is the public key of the TLS client certificate used when creating this session</li>
<li><code>ANY</code> keyword: permit access to any entity. If <code>ANY</code> is specified, there must be no other entries in the list for this operation</li>
<li><code>NONE</code> keyword: deny all requests for a particular operation. If <code>NONE</code> is specified, there must be no other entries in the list for this operation</li>
<li><code>$$SCONE::secret-name$$</code> will dynamically use the value of a secret with the given name (<code>secret-name</code>) at permission evaluation time. The replaced value must be either <code>CREATOR</code> (ascii), a certificate key hash (ascii) or certificate as defined above. It is possible to use explicit secrets, generated secrets, and imported secrets. When referencing X.509 certificates, the trailing <code>.crt</code> after the secret name can be specified, but may also be omitted. If the mentioned secret does not exist, cannot be read, or has an incompatible value, it will be ignored, but an error message will be shown on unsuccessful authentication attempts.</li>
</ul>
<p>By default, the access policy is defined as follows:</p>
<div class="highlight"><pre><span></span><span class="nt">access_policy</span><span class="p">:</span>
  <span class="nt">read</span><span class="p">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CREATOR</span>
  <span class="nt">update</span><span class="p">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CREATOR</span>
</pre></div>

<p>Default values will be used for operations not explicitly specified in a session description.</p>
<p>Example policy:</p>
<div class="highlight"><pre><span></span><span class="nt">access_policy</span><span class="p">:</span>
  <span class="nt">read</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CREATOR</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">3s1pm8W6Be6cxvAQRbRP5YXd9YuERAr7KswN97uGtoPkRW87x1</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">|</span>
      <span class="no">-----BEGIN CERTIFICATE-----</span>
      <span class="no">MIIFwTCCA6mgAwIBAgIUCF1MVJJ78BIf4WmTE24aAX7NlHowDQYJKoZIhvcNAQEL</span>
      <span class="no">BQAwcDELMAkGA1UEBhMCVVMxDzANBgNVBAgMBk9yZWdvbjERMA8GA1UEBwwIUG9y</span>
      <span class="no">dGxhbmQxFTATBgNVBAoMDENvbXBhbnkgTmFtZTEMMAoGA1UECwwDT3JnMRgwFgYD</span>
      <span class="no">VQQDDA93d3cuZXhhbXBsZS5jb20wHhcNMTkwNzIyMTU1NTExWhcNMTkwODIyMTU1</span>
      <span class="no">NTExWjBwMQswCQYDVQQGEwJVUzEPMA0GA1UECAwGT3JlZ29uMREwDwYDVQQHDAhQ</span>
      <span class="no">b3J0bGFuZDEVMBMGA1UECgwMQ29tcGFueSBOYW1lMQwwCgYDVQQLDANPcmcxGDAW</span>
      <span class="no">BgNVBAMMD3d3dy5leGFtcGxlLmNvbTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCC</span>
      <span class="no">AgoCggIBALVbVIrBAlzDOztWs9hZr5kvYoUwq/hL7zaMrYKBLQJZFNbhmMaUsW7A</span>
      <span class="no">Fzj87dzP3xIf4c2r3IGJSukv7hJpaJ2Ykv80i3C7EiFgaDV/+JP9d/GjsvcW20zH</span>
      <span class="no">mtJcBIkdkqPt1epOtxsMyJGZL+34DoWOqgY7up6nCirr+MeUxYJ/dWBFD1j0iuHl</span>
      <span class="no">Y+rEMsv4xFBndgLmMQNlcMyXtBgPls4EgnDfnjICqIYMHt6PG+kwoR4tbs+v2Gsl</span>
      <span class="no">vqldxI7efErZh+kKtjtFxt6qzrypUs9bYgH3tsaUE0xYeK/A2llylJzPOv6vkCqg</span>
      <span class="no">vPOJETcZyoeH46niITdPssYr4yPQOxn/a7WS+7Mn2y6o5z4Q+DkB96lzUyvVJnwO</span>
      <span class="no">aorzec0PaB/qqYrHqVfftMu4thMwHGB8CrGUiq/ImHPWkfobyVcMYJ0/LaLSDHFj</span>
      <span class="no">1hN36VkzWqQcCM6ymhjx9Lpfzzxna5910jE86zb1cMnD/eAAd90jpJvGJN43Hw40</span>
      <span class="no">MIvjYBunOy9P3ah0kgCk7gW0oKlYHxugv8pZVHMwU1HFIdwYvlGd09XHFDyj9tul</span>
      <span class="no">eX8zaVwaNeLUrMdJN5Ct1HX16RpnpaIMwwExzXgsZ01BQcfIcGWGbvBfH2C86klt</span>
      <span class="no">SuG7M6kxk4XgIIlwTSGk7qJlfd4s8PD1fVJNKvJZwXXoQBy4hCrTAgMBAAGjUzBR</span>
      <span class="no">MB0GA1UdDgQWBBRSUKop9QDGmSdLCfzWlBIF5ClNVDAfBgNVHSMEGDAWgBRSUKop</span>
      <span class="no">9QDGmSdLCfzWlBIF5ClNVDAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUA</span>
      <span class="no">A4ICAQAny4QmzvCza0TQUuh7YIxtkBjJoyTSDGmr5W/4AWKsoZJM9QxzWeIAXhWD</span>
      <span class="no">UPH2TfwcNX/ovZiSDQaGduRL67Wk8lbp1MvjACMEtLRjsbnYtGFdhit0fR97B5Y6</span>
      <span class="no">d06Ka/NXgPTJorXx8WSWUp0qaAQcgvhfgF0vnOSB5CbP5RSYE5TuLu6gh+iQTrBI</span>
      <span class="no">Syl+9UaopkbQDRsg+XRfie+kUxQgldUAFvFmu6sM6FTbw0KGkrsOajwpF/Fu5hSV</span>
      <span class="no">Ucov4Lzrrxkok5FzWPkVtMalLZ4Du+ZUYG//10WZg+HdrIwx3m2wxrFIkZaMKxv4</span>
      <span class="no">ZkIMsb6DUPUZqy8qZpMzIqvDzx3iYEWWfBOCJWBjs8/V1mAuUu6TBCKAJpvfX6bU</span>
      <span class="no">hNrCbnrpuxuCCPJnj9sXkBDvl5rcyfshTtKl3NoBrRRDuUHWsJWzsKvBQtwN46vF</span>
      <span class="no">CbF0aXOozihtmmcMpFFeDIj6p/5qlaJtslegtfv2zoztc3e2ituOjqFQ/I5pplvo</span>
      <span class="no">p8EGwCI1xTGF0BTatcSV1+lLNeONhhAtwliV13nPSH1o4yxoZ+xZTZq4+9ylw7dq</span>
      <span class="no">yV3BQM11U6OyAPE1G6EX0PgFvLm25sGTJq9TKXs9yWPRit9vHcOCXSGn8osn4SMg</span>
      <span class="no">Puqpk+3M9xR8XDPJiBjkxcSnt9+EDNwpthTzgUEoyM6dY8nvWA==</span>
      <span class="no">-----END CERTIFICATE-----</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;$$SCONE::remote_validation_service$$&quot;</span>
  <span class="nt">update</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">NONE</span>
</pre></div>

<p>This policy will allow read requests from the creator, a user whose TLS client certificate has a public key hash <code>3s1pm8W6Be6cxvAQRbRP5YXd9YuERAr7KswN97uGtoPkRW87x1</code>, a user whose TLS client certificate has a public key similar to the one of the certificate specified in the session description and a user whose credential is taken from the secret named <code>remote_validation_service</code> (which may be imported from another session). No one is allowed to update the session description.</p>
<h2 id="attestation-security">Attestation Security</h2>
<p>The services' security directly depends on CAS' ability to verify that a service process has not been manipulated (referred to as attestation), as described in <a href="#attestation">the service attestation section</a>. CAS ships with secure defaults, and only allows hardware-attested services running on trustworthy platforms in secure production-mode enclaves.</p>
<h3 id="tolerating-hardware-attestation-issues">Tolerating hardware attestation issues</h3>
<p>Sometimes it may be necessary to relax the secure defaults, for instance, when:</p>
<ul>
<li>Services should run in a testing environment for debugging purposes</li>
<li>A trade-off is being made between security and performance, like enabling Hyper-Threading (which opens an Information Disclosure Side Channel)</li>
<li>A platform with known security vulnerabilities is used in a testing environment</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="nt">security</span><span class="p">:</span>
  <span class="nt">attestation</span><span class="p">:</span>
    <span class="nt">tolerate</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">debug-mode</span><span class="p p-Indicator">,</span> <span class="nv">hyperthreading</span><span class="p p-Indicator">]</span>
</pre></div>

<p><code>tolerate</code> is an array which can hold the following variants:</p>
<ul>
<li><code>debug-mode</code> enclaves allow introspection with a debugger. This disables enclave protection, all secrets can be extracted.</li>
<li><code>hyperthreading</code>: Enabled Hyper-Threading opens a Microarchitectural Data Sampling Information Disclosure Side Channel on Intel SGX platforms. If the performance penalty can be tolerated, disabling Hyper-Threading instead of ignoring the issue may be viable. See <a href="https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00233.html">https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00233.html</a></li>
<li><code>insecure-igpu</code>: An enabled integrated GPU could be exploited to disclose information on Intel SGX platforms. If not required for operation, disable the IGPU instead of tolerating this issue. See <a href="https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00219.html">https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00219.html</a></li>
<li><code>software-hardening-needed</code>: The service program needs to be re-compiled with different compiler settings to protect against exploits. This is a category for a collection of Intel SGX advisories, which need to be specified separately (see below).</li>
<li><code>insecure-configuration</code>: The platform needs to be reconfigured to protect against certain kinds of attacks. This is a category for a collection of Intel SGX advisories, which need to be specified separately (see below).</li>
<li><code>outdated-tcb</code>: The Trusted Computing Base (TCB) of the platform, i.e. firmware or microcode, needs to be updated due to security flaws. This is a category for a collection of Intel SGX advisories, which need to be specified separately (see below).</li>
</ul>
<p>When running a service on a platform that is affected by one of the above problems, attestation will fail with an error, unless they have been specified in the <code>tolerate</code> list. The error message will contain instructions on how to change attestation security settings in order to ignore the specific problems.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Instead of ignoring platform security issues, solving them should always be preferred. Often, this involves updating the platform's firmware or CPU microcode. Sometimes, it can be necessary to change BIOS/UEFI settings or recompile the service with different settings. The error message as well as linked Intel advisories contain more details.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Displayed attestation error messages are not authenticated, and may be forged by a MitM attacker. It is advisable to critically review the suggested configuration changes as well as Intel advisories.</p>
</div>
<p>Intel will release advisories when becoming aware of new security issues with SGX-enabled processors. Some of the problems listed in these advisories are encountered more frequently, in which case SCONE/CAS provide shortcuts to ignore them (like <code>hyperthreading</code>). Others may be more severe or very recent. In order to ignore them, they and their associated category (<code>software-hardening-needed</code> / <code>insecure-configuration</code> / <code>outdated-tcb</code>) need to be specified explicitly. Example:</p>
<div class="highlight"><pre><span></span><span class="nt">security</span><span class="p">:</span>
  <span class="nt">attestation</span><span class="p">:</span>
    <span class="nt">tolerate</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">outdated-tcb</span><span class="p p-Indicator">]</span>
    <span class="nt">ignore_advisories</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">INTEL-SA-00161</span><span class="p p-Indicator">,</span> <span class="nv">INTEL-SA-00270</span><span class="p p-Indicator">]</span>
</pre></div>

<p>When in <code>debug-mode</code>, all advisories can be ignored by using a wildcard, simplifying the workflow in testing environments:</p>
<div class="highlight"><pre><span></span><span class="nt">security</span><span class="p">:</span>
  <span class="nt">attestation</span><span class="p">:</span>
    <span class="nt">tolerate</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">debug-mode</span><span class="p p-Indicator">,</span> <span class="nv">outdated-tcb</span><span class="p p-Indicator">]</span>
    <span class="nt">ignore_advisories</span><span class="p">:</span> <span class="s">&quot;*&quot;</span>
</pre></div>

<p>As this silently ignores newly released platform advisories too, wildcards cannot be used in (non-debug) production mode.</p>
<h3 id="trusted-scone-quoting-enclaves">Trusted SCONE Quoting Enclaves</h3>
<p>By default, the system uses the SCONE attestation scheme. This scheme is built around a separate quoting enclave (QE), into which trust has to be established. This is done automatically using EPID-based attestation for a set of known trustworthy QE measurements embedded into the CAS software.</p>
<p>If EPID-based attestation is not available, or you want to use custom QEs, the QE public keys can be manually specified as trustworthy:</p>
<div class="highlight"><pre><span></span><span class="nt">security</span><span class="p">:</span>
  <span class="nt">attestation</span><span class="p">:</span>
    <span class="nt">trusted_scone_qe_pubkeys</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;E37F149AE30896E314A2859874C5A9C7803FB3187B99F5D08E526B1C0396507C&quot;</span><span class="p p-Indicator">]</span>
</pre></div>

<p>The QE public key can be found in the log output of the Local Attestation Service (LAS). Specified keys are an additional trust anchor, and do not replace the trusted built-in QE measurements. To trust the given keys exclusively, additionally enable <a href="#platform-based-attestation">platform-based attestation</a> for individual services.</p>
<h3 id="disabling-attestation">Disabling attestation</h3>
<p>Attestation can be completely disabled:</p>
<div class="highlight"><pre><span></span><span class="nt">security</span><span class="p">:</span>
  <span class="nt">attestation</span><span class="p">:</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">none</span>  <span class="c1"># Default mode is &#39;hardware&#39;</span>
</pre></div>

<p>This may be useful in testing environments where no hardware-based attestation is available.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Disabling attestation implies that there is <strong>no service authentication being performed at all</strong>. Everybody with access to CAS can access all secrets of all of this session's services.</p>
</div>
<h2 id="referencing-other-sessions">Referencing Other Sessions</h2>
<p>In some cases it may be necessary to reference other sessions, e.g. when exporting or importing <a href="#volumes">volumes</a> or <a href="#secret-sharing">secrets</a>.
This is possible by using a SCONE ID. The following sections describe the format and content of this ID.</p>
<h3 id="local-cas-sessions">Local CAS Sessions</h3>
<p>Referencing another session on the same CAS is simple:</p>
<p><code>session: &lt;session name&gt;</code> - e.g. <code>session: my-database</code></p>
<p>Note that, depending on the context, you may also have to supply a secret, volume or service name, e.g.:</p>
<div class="highlight"><pre><span></span><span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-database</span>
<span class="nt">secret</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">db-encryption-key</span>
</pre></div>

<p>By using this simple form, you trust the session's owner, and accept that their session configuration may change over time.
If you want to trust a specific session configuration instead, you have to additionally specify a <em>session hash</em>:</p>
<div class="highlight"><pre><span></span><span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;session name&gt;</span>
<span class="nt">session_hash</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;session hash-key&gt;</span>
</pre></div>

<p>e.g.:</p>
<div class="highlight"><pre><span></span><span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-database</span>
<span class="nt">session_hash</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">a51c14dd7029d2ef54a50a9e26efcdd37c4971b5b62cb6d244c9216f80b6eadf</span>
</pre></div>

<p>Exporting/Importing elements to/from the other session will be prevented by the CAS when the currently active session does not match the specified hash.
Note that, in this case, your own session may cease working when importing secrets or volumes from another session whose hash has changed, requiring you to update the session.</p>
<h3 id="sessions-on-another-cas">Sessions on another CAS</h3>
<p>Referencing sessions on another CAS requires more information - the remote CAS' address and a key to authenticate it:</p>
<div class="highlight"><pre><span></span><span class="nt">cas_url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;CAS address&gt;</span>
<span class="nt">cas_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;CAS key hash&gt;</span>
<span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;session name&gt;</span>
</pre></div>

<p>e.g.:</p>
<div class="highlight"><pre><span></span><span class="nt">cas_url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cas.example.com</span>
<span class="nt">cas_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">46YyxrywJ8PFRruWX8YLxa9q4axxYJgTbA81tv7NBcJfn43DQt</span>
<span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">company-storage</span>
</pre></div>

<p>The <code>cas_key</code> is used for authentication and ensures that exports/imports will only be performed to/from the correct CAS.
<strong>It is of utmost importance to specify a verified, correct key.</strong>
When a CAS was attested using the CLI, you can query its verified key by using <code>scone cas show-identification -c</code>.
Similarly, when attesting a CAS, you can supply the key received from another session's owner by using <code>scone cas attest -c &lt;CAS key hash&gt;</code>.</p>
<p>By using <code>cas_key</code>, you trust the remote CAS' owner and allow them to perform software updates without further confirmation.
Most of the time, this is an adequate solution.
In specific cases, when trusting the remote CAS' owner is not an option, it may be necessary to pin a specific CAS software revision instead.
This may be done by using the <code>cas_software_key</code> instead of a <code>cas_key</code>:</p>
<div class="highlight"><pre><span></span><span class="nt">cas_url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;CAS address&gt;</span>
<span class="nt">cas_software_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;CAS key hash&gt;</span>
<span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;session name&gt;</span>
</pre></div>

<p>e.g.:</p>
<div class="highlight"><pre><span></span><span class="nt">cas_url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cas.example.com</span>
<span class="nt">cas_software_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3AC5RSbL73aVVf98m2UMTN2BFsQv6eQufi5BGBxrG8awxP4ygQ</span>
<span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">company-storage</span>
</pre></div>

<p>In this case, exporting/importing elements to/from the other session will be prevented by the local CAS when the software of the remote CAS changes.
The same limitations as specified for the usage of a <code>session_hash</code> apply here as well.
The software key can be retrieved or specified on the CLI by using <code>scone cas show-identification -s</code> and <code>scone cas attest -s &lt;CAS software key hash&gt;</code> respectively.</p>
<h3 id="url-short-form">URL short form</h3>
<p>Instead of using YAML syntax, you can also fit all SCONE ID fields on a single line, forming a SCONE URL.</p>
<p>For instance, </p>
<div class="highlight"><pre><span></span><span class="nt">cas_url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cas.example.com</span>
<span class="nt">cas_software_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3AC5RSbL73aVVf98m2UMTN2BFsQv6eQufi5BGBxrG8awxP4ygQ</span>
<span class="nt">session</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">company-storage</span>
</pre></div>

<p>can also be written as</p>
<p><code>cas.example.com/cas_software_key=3AC5RSbL73aVVf98m2UMTN2BFsQv6eQufi5BGBxrG8awxP4ygQ,session=company-storage</code></p>
<p>This may be useful when referencing the same CAS multiple times, as the CAS URL and keys can be extracted into a common variable, example:</p>
<div class="highlight"><pre><span></span>    <span class="nt">export</span><span class="p">:</span>
     <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$OTHER_CAS,session=A</span>
     <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$OTHER_CAS,session=B</span>
     <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$OTHER_CAS,session=C</span>
</pre></div>

<p>For replacing the variable with a concrete value, please refer to the SCONE CLI documentation.</p>
<p>The same format can also be used when referencing sessions on the local CAS. Simply omit the host and keys (but notice the leading slash <code>/</code>):</p>
<p><code>/session=company-storage,session_hash=a51c14dd7029d2ef54a50a9e26efcdd37c4971b5b62cb6d244c9216f80b6eadf</code></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../CAS_session_lang_0_2/" title="Policy Language 0.2" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Policy Language 0.2
              </span>
            </div>
          </a>
        
        
          <a href="../print-arg-env/" title="Secure Arguments" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Secure Arguments
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright Scontain  2021
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.e72fd936.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../search/main.js"></script>
      
    
    
      
    
  </body>
</html>