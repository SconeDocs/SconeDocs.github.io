
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Scone Documentation - Secure Containers">
      
      
        <meta name="author" content="Christof Fetzer">
      
      
        <link rel="canonical" href="https://sconedocs.github.io/flask_demo/">
      
      <link rel="icon" href="../img/scone-favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-8.2.4">
    
    
      
        <title>Flask Demo - Confidential Computing</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"PT Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="../css/tooltips.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="../#a-confidential-flask-based-application" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Confidential Computing" class="md-header__button md-logo" aria-label="Confidential Computing" data-md-component="logo">
      
  <img src="../img/SCONE-logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Confidential Computing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Flask Demo
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../news/" class="md-tabs__link">
        News and Overview
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../workflows/" class="md-tabs__link">
        Quick Start
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../operations/" class="md-tabs__link">
        DevOps Workflows
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../k8s_concepts/" class="md-tabs__link">
        Kubernetes
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../helm/" class="md-tabs__link">
        SconeApps
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../aks/" class="md-tabs__link">
        Azure Kubernetes Services
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../CASOverview/" class="md-tabs__link">
        Configuration & Attestation
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../usecases/" class="md-tabs__link md-tabs__link--active">
        Use Cases
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../Exercise-Docu/exercises/" class="md-tabs__link">
        More
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Confidential Computing" class="md-nav__button md-logo" aria-label="Confidential Computing" data-md-component="logo">
      
  <img src="../img/SCONE-logo-white.png" alt="logo">

    </a>
    Confidential Computing
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          News and Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="News and Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          News and Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../news/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cc-telenovela/" class="md-nav__link">
        CC Soap Opera
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cc-university/" class="md-nav__link">
        CC University
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vm_vs_enclave/" class="md-nav__link">
        Confidential Computing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../advantages/" class="md-nav__link">
        Advantages of SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../whyscone/" class="md-nav__link">
        SCONE vs Intel SGX SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../technical_summary/" class="md-nav__link">
        Technical summary of SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../buildingApps/" class="md-nav__link">
        (No) Cross-Compilation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../registry/" class="md-nav__link">
        Scontain Registy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../curated_images/" class="md-nav__link">
        Curated Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../community_version/" class="md-nav__link">
        Community Version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Quick Start
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Quick Start" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Quick Start
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflows/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify_hw_k8s/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../azure/scone-playground/" class="md-nav__link">
        SCONE Playground on Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lean_deployment/" class="md-nav__link">
        kubectl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify/" class="md-nav__link">
        Sconify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify_filetypes/" class="md-nav__link">
        File Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ee_sconify_image/" class="md-nav__link">
        Sconify Image SE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multi-stakeholder-workflow/" class="md-nav__link">
        Multi-Stakeholder Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example_policy/" class="md-nav__link">
        Policy Update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microservices-demo/" class="md-nav__link">
        Boutique Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq_sconify/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          DevOps Workflows
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DevOps Workflows" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          DevOps Workflows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/" class="md-nav__link">
        Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mitigation/" class="md-nav__link">
        Attack mitigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sadvisories/" class="md-nav__link">
        Security advisories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software_updates/" class="md-nav__link">
        Software updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone-signer/" class="md-nav__link">
        Signing of enclaves
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../edmm/" class="md-nav__link">
        EDMM support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_semantic_versioning/" class="md-nav__link">
        SCONE versioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../attestation_by_client/" class="md-nav__link">
        Attestation by client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../technotes/" class="md-nav__link">
        Technotes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kubernetes" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s_concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_sgxdevplugin/" class="md-nav__link">
        Kubernetes SGX Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubeapps/" class="md-nav__link">
        Kubeapps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s_dashboard/" class="md-nav__link">
        Kubernetes Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_cas/" class="md-nav__link">
        CAS Deploy & Attest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_las/" class="md-nav__link">
        LAS Deploy & Platforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_mariadb/" class="md-nav__link">
        MariaDB Deploy & Attest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_teemon/" class="md-nav__link">
        TEEMon Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hello_world_kubernetes/" class="md-nav__link">
        Hello World Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../azure/scone-pyspark/" class="md-nav__link">
        PySpark on Azure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          SconeApps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SconeApps" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          SconeApps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/" class="md-nav__link">
        SconeApps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_database/" class="md-nav__link">
        database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_maxscale/" class="md-nav__link">
        maxscale
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_memcached/" class="md-nav__link">
        memcached
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_nginx/" class="md-nav__link">
        nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_openvino/" class="md-nav__link">
        openvino
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_pytorch/" class="md-nav__link">
        pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_spark/" class="md-nav__link">
        spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_tensorflow/" class="md-nav__link">
        tensorflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_tensorflowlite/" class="md-nav__link">
        tensorflowlite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_zookeeper/" class="md-nav__link">
        zookeeper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Azure Kubernetes Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Azure Kubernetes Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Azure Kubernetes Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks/" class="md-nav__link">
        Confidential AKS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks/flask_demo/" class="md-nav__link">
        Flask Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_images/" class="md-nav__link">
        Python Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_integration/" class="md-nav__link">
        AKS Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MicrosoftAzureIntegrations/" class="md-nav__link">
        AKS Integration Tutorial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_charts/" class="md-nav__link">
        AKS Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_setup/" class="md-nav__link">
        AKS Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Configuration & Attestation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration & Attestation" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Configuration & Attestation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CASOverview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas_intro/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_for_development/" class="md-nav__link">
        Starting CAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_config/" class="md-nav__link">
        CAS Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../public-CAS/" class="md-nav__link">
        Public CAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../LASIntro/" class="md-nav__link">
        Starting LAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas_blender_example/" class="md-nav__link">
        Posting Sessions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_cli-intro/" class="md-nav__link">
        CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_session_lang_0_2/" class="md-nav__link">
        Policy Language 0.2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_session_lang_0_3/" class="md-nav__link">
        Policy Language 0.3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../print-arg-env/" class="md-nav__link">
        Secure Arguments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../host_arguments/" class="md-nav__link">
        Host Arguments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../otp_demo/" class="md-nav__link">
        One-time Passwords
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../EncryptedWordCount/" class="md-nav__link">
        Encrypted Code and Input
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node-example/" class="md-nav__link">
        Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../namespace/" class="md-nav__link">
        Namespaces
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Use Cases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Use Cases" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Use Cases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usecases/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secure_document_management/" class="md-nav__link">
        Confidential Document Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../federated_machine_learning/" class="md-nav__link">
        Federated Machine Learning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shared_source_code/" class="md-nav__link">
        Confidential Code Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blender/" class="md-nav__link">
        Blender
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pyspark/" class="md-nav__link">
        PySpark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow/" class="md-nav__link">
        TensorFlow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflowlite/" class="md-nav__link">
        TensorFlow Lite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openvino/" class="md-nav__link">
        OpenVino
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vault/" class="md-nav__link">
        Vault
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone-use-case-overview/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secure_remote_execution/" class="md-nav__link">
        Secure Remote Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dockerfileexample/" class="md-nav__link">
        Dockerfile Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multistagebuild/" class="md-nav__link">
        Multi-stage build
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../groupcacheUseCase/" class="md-nav__link">
        GO example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../memory_dump/" class="md-nav__link">
        Finding Secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dapps/" class="md-nav__link">
        Trusted DApps
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Flask Demo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Flask Demo
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-confidential-flask-based-application" class="md-nav__link">
    A Confidential Flask-Based Application
  </a>
  
    <nav class="md-nav" aria-label="A Confidential Flask-Based Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-based-confidential-service" class="md-nav__link">
    Flask-Based Confidential Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tls-certificates" class="md-nav__link">
    TLS Certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tls-based-mutual-attestation" class="md-nav__link">
    TLS-based Mutual Attestation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code" class="md-nav__link">
    Code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-service-on-local-computer" class="md-nav__link">
    Run Service On Local Computer
  </a>
  
    <nav class="md-nav" aria-label="Run Service On Local Computer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-the-service" class="md-nav__link">
    Testing the service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-on-a-kubernetes-cluster-and-aks" class="md-nav__link">
    Execution on a Kubernetes Cluster and AKS
  </a>
  
    <nav class="md-nav" aria-label="Execution on a Kubernetes Cluster and AKS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-scone-services" class="md-nav__link">
    Install SCONE services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-application" class="md-nav__link">
    Run the application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-the-application" class="md-nav__link">
    Test the application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-the-application" class="md-nav__link">
    Access the application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clean-up" class="md-nav__link">
    Clean up
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          More
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="More" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          More
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_1" type="checkbox" id="__nav_10_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_1">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorial" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_1">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercises/" class="md-nav__link">
        Assignments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise0/" class="md-nav__link">
        Assignment 0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise1/" class="md-nav__link">
        Assignment 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise2/" class="md-nav__link">
        Assignment 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise3/" class="md-nav__link">
        Assignment 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise4/" class="md-nav__link">
        Assignment 4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise5/" class="md-nav__link">
        Assignment 5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/section_otp/" class="md-nav__link">
        Section 2 OTP
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2" type="checkbox" id="__nav_10_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2">
          Client Docu
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Client Docu" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_2">
          <span class="md-nav__icon md-icon"></span>
          Client Docu
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../iexec_sconify_image/" class="md-nav__link">
        iExec Sconify Image
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_3" type="checkbox" id="__nav_10_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_3">
          SCONE Execution Modes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SCONE Execution Modes" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_3">
          <span class="md-nav__icon md-icon"></span>
          SCONE Execution Modes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../outline/" class="md-nav__link">
        Execution Modes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firstcontainer/" class="md-nav__link">
        Simulation Mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardwaremode/" class="md-nav__link">
        Hardware Mode
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_4" type="checkbox" id="__nav_10_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_4">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_4">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hostexample/" class="md-nav__link">
        Host Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dockerinstall/" class="md-nav__link">
        Installing docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sgxinstall/" class="md-nav__link">
        Installing Intel SGX driver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeinstall/" class="md-nav__link">
        Installing SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microcode/" class="md-nav__link">
        Updating CPU microcode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../windows10/" class="md-nav__link">
        Windows 10
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_5" type="checkbox" id="__nav_10_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_5">
          Language Support
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Language Support" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_5">
          <span class="md-nav__icon md-icon"></span>
          Language Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../C/" class="md-nav__link">
        C
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mono/" class="md-nav__link">
        C#
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../C++/" class="md-nav__link">
        C++
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Fortran/" class="md-nav__link">
        Fortran
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../GO/" class="md-nav__link">
        GO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Java/" class="md-nav__link">
        Java
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Running_Java_Applications_in_Scone_with_remote_attestation/" class="md-nav__link">
        Java with remote attestation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Python/" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pypyscone/" class="md-nav__link">
        PyPy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mono/" class="md-nav__link">
        Mono
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Nodejs/" class="md-nav__link">
        Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/" class="md-nav__link">
        R
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Rust/" class="md-nav__link">
        Rust
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_6" type="checkbox" id="__nav_10_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_6">
          IDE Integration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IDE Integration" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_6">
          <span class="md-nav__icon md-icon"></span>
          IDE Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../eclipse/" class="md-nav__link">
        Eclipse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_vscode/" class="md-nav__link">
        Visual Studio Code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_7" type="checkbox" id="__nav_10_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_7">
          Command Line Interface
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command Line Interface" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_7">
          <span class="md-nav__icon md-icon"></span>
          Command Line Interface
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_cli/" class="md-nav__link">
        CLI Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_Fileshield/" class="md-nav__link">
        scone fspf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../binary_fs/" class="md-nav__link">
        scone binary fs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_ENV/" class="md-nav__link">
        environment variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MrEnclave/" class="md-nav__link">
        MrEnclave
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_affinity/" class="md-nav__link">
        affinity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_8" type="checkbox" id="__nav_10_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_8">
          Performance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Performance" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_8">
          <span class="md-nav__icon md-icon"></span>
          Performance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../teemon/" class="md-nav__link">
        Monitoring tool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_9" type="checkbox" id="__nav_10_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_9">
          Background
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Background" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_9">
          <span class="md-nav__icon md-icon"></span>
          Background
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appsecurity/" class="md-nav__link">
        Application-Oriented Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../background/" class="md-nav__link">
        SCONE Background
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_Publications/" class="md-nav__link">
        Publications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aboutScone/" class="md-nav__link">
        About
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_13" type="checkbox" id="__nav_10_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_13">
          Releases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Releases" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_13">
          <span class="md-nav__icon md-icon"></span>
          Releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.7/" class="md-nav__link">
        SCONE 5.7.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.6/" class="md-nav__link">
        SCONE 5.6.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.5/" class="md-nav__link">
        SCONE 5.5.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.4/" class="md-nav__link">
        SCONE 5.4.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-confidential-flask-based-application" class="md-nav__link">
    A Confidential Flask-Based Application
  </a>
  
    <nav class="md-nav" aria-label="A Confidential Flask-Based Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-based-confidential-service" class="md-nav__link">
    Flask-Based Confidential Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tls-certificates" class="md-nav__link">
    TLS Certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tls-based-mutual-attestation" class="md-nav__link">
    TLS-based Mutual Attestation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code" class="md-nav__link">
    Code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-service-on-local-computer" class="md-nav__link">
    Run Service On Local Computer
  </a>
  
    <nav class="md-nav" aria-label="Run Service On Local Computer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-the-service" class="md-nav__link">
    Testing the service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-on-a-kubernetes-cluster-and-aks" class="md-nav__link">
    Execution on a Kubernetes Cluster and AKS
  </a>
  
    <nav class="md-nav" aria-label="Execution on a Kubernetes Cluster and AKS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-scone-services" class="md-nav__link">
    Install SCONE services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-application" class="md-nav__link">
    Run the application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-the-application" class="md-nav__link">
    Test the application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-the-application" class="md-nav__link">
    Access the application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clean-up" class="md-nav__link">
    Clean up
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="a-confidential-flask-based-application">A Confidential Flask-Based Application</h1>
<p>We <strong>demonstrate</strong> with the help of a simple Flask-based Service multiple features of the SCONE platform:</p>
<ul>
<li>we show that we can execute <strong>unmodified Python</strong> programs inside of SGX enclaves</li>
<li>we show how to <strong>encrypt the Python program</strong> to protect the <strong>confidentiality</strong> and <strong>integrity</strong> of the Python code</li>
<li>how to <strong>implicitly attest other services</strong> with the help of TLS, i.e., to ensure that one communicates with a service that satisfy its security policy.<ul>
<li>we demonstrate how Redis, an in-memory data structure store, and the Python flask <strong>attest each other</strong> via <strong>TLS</strong> without needing to change the code of neither Redis nor the Flask-based service.</li>
</ul>
</li>
<li>we show how to <strong>generate TLS certificates</strong> with the help of a policy:<ul>
<li>a SCONE security policy describes how to attest applications and services (i.e., describe the code, the filesystem state, the environment, the node on which to execute, and secrets).</li>
<li>a SCONE policy can generate secrets and in particular, key-pairs and TLS certificates.</li>
</ul>
</li>
<li>we show how to execute this example<ul>
<li>on a local computer with the help of <code>docker-compose</code></li>
<li>on a generic Kubernetes cluster, and</li>
<li>on <strong>Azure Kubernetes Service</strong> (AKS).</li>
</ul>
</li>
</ul>
<p><img alt="Mutual Protection" src="../img/attestation.svg#fullwidth" /></p>
<div class="admonition note">
<p class="admonition-title">Next Step</p>
<p>In the second version of this example, we <strong>simplify the
workflow</strong> in the sense that we use a generic script to transform an existing native container image into an encrypted, confidential container image.</p>
</div>
<h2 id="flask-based-confidential-service">Flask-Based Confidential Service</h2>
<p>We implement a simple Flask-based service. The Python <a href="https://github.com/scontain/flask_example/blob/master/rest_api.py">code</a> implements a REST API:</p>
<ul>
<li>to store patient records (i.e., POST to resource <code>/patient/&lt;string:patient_id&gt;</code>)</li>
<li>to retrieve patient records (i.e., GET of resource <code>/patient/&lt;string:patient_id&gt;</code>)</li>
<li>to retrieve some <em>score</em> for a patient (i.e., GET of ressource <code>'/score/&lt;string:patient_id&gt;</code>)</li>
</ul>
<p>The Python code is executed inside of an enclave to ensure that even users with root access cannot read the patient data.</p>
<h2 id="tls-certificates">TLS Certificates</h2>
<p>The service uses a Redis instance to store the resources. The communication between 1) the Flask-based service and its clients and  2) Redis and the application is encrypted with the help of TLS. To do so, we need to provision the application and Redis with multiple keys and certificates:</p>
<ul>
<li>Redis client certificate</li>
<li>Redis server certificate</li>
<li>Flask server certificate</li>
</ul>
<p>Redis and the Flask-based service, require that the private keys and certificates are stored in the filesystem. We generate and provision these TLS-related files with the help of a <a href="https://sconedocs.github.io/CAS_session_lang_0_3/">SCONE policy</a>. </p>
<p>To do so, we generate <strong>secrets</strong> related to the Flask-based service. We specify in the <a href="https://github.com/scontain/flask_example/blob/master/flask-template.yml">flask policy</a> that</p>
<ul>
<li>a private key (<code>api_ca_key</code>) for a new certificate authority (CA) is generated</li>
<li>a certificate (<code>api_ca_cert</code>) for a certification authority is generated</li>
<li>using the private key (i.e., <code>api_ca_key</code>), and</li>
<li>making this certificate available to everybody (see <code>export_public: true</code>)</li>
<li>we generate a private key for the certificate used by the REST API (i.e., <code>flask_key</code>)</li>
<li>we generate a certificate (<code>flask</code>) with the help of CA <code>api_ca_cert</code> and assign it a dns name <code>api</code>.</li>
</ul>
<p>The SCONE policy is based on Yaml and the <a href="https://github.com/scontain/flask_example/blob/master/flask-template.yml">flask policy</a> contains the following section to define these secrets:</p>
<div class="highlight"><pre><span></span>secrets:
    - name: api_ca_key
      kind: private-key
    - name: api_ca_cert
      kind: x509-ca
      export_public: true
      private_key: api_ca_key
    - name: flask_key
      kind: private-key
    - name: flask
      kind: x509
      private_key: flask_key
      issuer: api_ca_cert
      dns:
        - api
</pre></div>
<p>The private keys and certificates are expected at certain locations in the file system. SCONE permits to map these secrets into the filesystem of the Flask-based service: these files are only  visible to the service inside of an SGX enclave after a successful attestation (see below) and in particular, not visible on the outside i.e., in the filesystem of the container.</p>
<p>To map the private keys and certificates into the filesystem of a service, we specify in the policy which secrets are visible to a service at which path. In the <a href="https://github.com/scontain/flask_example/blob/master/flask-template.yml">flask policy</a> this is done as follows:</p>
<div class="highlight"><pre><span></span>images:
   - name: flask_restapi_image
     injection_files:
        - path: /tls/flask.crt
          content: $$SCONE::flask.crt$$
        - path: /tls/flask.key
          content: $$SCONE::flask.key$$
</pre></div>
<p>And in the Python program, one can just access these files as normal files. One can create a SSL context (see <a href="https://github.com/scontain/flask_example/blob/master/rest_api.py">code</a>):</p>
<div class="highlight"><pre><span></span>    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">4996</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ssl_context</span><span class="o">=</span><span class="p">((</span><span class="s2">&quot;/tls/flask.crt&quot;</span><span class="p">,</span> <span class="s2">&quot;/tls/flask.key&quot;</span><span class="p">)))</span>
</pre></div>
<p>While we do not show how to enforce client authentication of the REST API, we show how to do this for Redis in the next section.</p>
<h2 id="tls-based-mutual-attestation">TLS-based Mutual Attestation</h2>
<p>The communication between the Flask-based service, say, <span class="arithmatex"><span class="MathJax_Preview">S</span><script type="math/tex">S</script></span> and Redis instance, say, <span class="arithmatex"><span class="MathJax_Preview">R</span><script type="math/tex">R</script></span> is encrypted via TLS. Actually, we make sure that the service <span class="arithmatex"><span class="MathJax_Preview">S</span><script type="math/tex">S</script></span> and instance <span class="arithmatex"><span class="MathJax_Preview">R</span><script type="math/tex">R</script></span> <strong>attest</strong> each other. Attestation means that <span class="arithmatex"><span class="MathJax_Preview">S</span><script type="math/tex">S</script></span> ensures that <span class="arithmatex"><span class="MathJax_Preview">R</span><script type="math/tex">R</script></span> satisfies all requirements specified in <span class="arithmatex"><span class="MathJax_Preview">R</span><script type="math/tex">R</script></span>'s security policy and <span class="arithmatex"><span class="MathJax_Preview">R</span><script type="math/tex">R</script></span> ensures that <span class="arithmatex"><span class="MathJax_Preview">S</span><script type="math/tex">S</script></span> satisfies all the requirements of <span class="arithmatex"><span class="MathJax_Preview">S</span><script type="math/tex">S</script></span>'s policy. Of course, this should be done without changing the code of neither <span class="arithmatex"><span class="MathJax_Preview">S</span><script type="math/tex">S</script></span> nor <span class="arithmatex"><span class="MathJax_Preview">R</span><script type="math/tex">R</script></span>. In case that <span class="arithmatex"><span class="MathJax_Preview">S</span><script type="math/tex">S</script></span> and <span class="arithmatex"><span class="MathJax_Preview">R</span><script type="math/tex">R</script></span> are using TLS with client authentication, this is straightforward to enforce. (If this is not the case, please contact us for an alternative.)</p>
<p>To ensure mutual attestation, the operator of Redis defines a <a href="https://github.com/scontain/flask_example/blob/master/redis-template.yml">policy</a> in which it defines a certification authority (<code>redis_ca_cert</code>) and defines both a Redis certificate (<code>redis_ca_cert</code>) as well as a Redis client certificate (<code>redis_client_cert</code>). The client certificate and the private key (<code>redis_client_key</code>) are exported to the policy of the Flask service <span class="arithmatex"><span class="MathJax_Preview">S</span><script type="math/tex">S</script></span>. The policy for this looks like this:</p>
<div class="highlight"><pre><span></span>secrets:
  - name: redis_key
    kind: private-key
  - name: redis # automatically generate Redis server certificate
    kind: x509
    private_key: redis_key
    issuer: redis_ca_cert
    dns:
     - redis
  - name: redis_client_key
    kind: private-key
    export:
    - session: $FLASK_SESSION
  - name: redis_client_cert # automatically generate client certificate
    kind: x509
    issuer: redis_ca_cert
    private_key: redis_client_key
    export:
    - session: $FLASK_SESSION # export client cert/key to client session
  - name: redis_ca_key
    kind: private-key
  - name: redis_ca_cert # export session CA certificate as Redis CA certificate
    kind: x509-ca
    private_key: redis_ca_key
    export:
    - session: $FLASK_SESSION # export the session CA certificate to client session
</pre></div>
<p>Note that <code>$FLASK_SESSION</code> is replaced by the unique name of the policy of <span class="arithmatex"><span class="MathJax_Preview">S</span><script type="math/tex">S</script></span>. The security
policies are in this example on the same <a href="../helm_cas/">SCONE CAS (Configuration and Attestation Service)</a>. In more complex scenarios, the policies could also be stored on separate SCONE CAS instances operated by different entities.</p>
<p>The flask service can import the Redis CA certificate, client certificate and private key as follows:</p>
<div class="highlight"><pre><span></span>secrets:
    - name: redis_client_key
      import:
        session: $REDIS_SESSION
        secret: redis_client_key
    - name: redis_client_cert
      import:
        session: $REDIS_SESSION
        secret: redis_client_cert
    - name: redis_ca_cert
      import:
        session: $REDIS_SESSION
        secret: redis_ca_cert
</pre></div>
<p>These secrets are made available to the Flask-based service in the filesystem (i.e., files <code>/tls/redis-ca.crt</code>, <code>/tls/client.crt</code> and <code>/tls/client.key</code>) via the following entries in its security policy:</p>
<div class="highlight"><pre><span></span>images:
   - name: flask_restapi_image
     injection_files:
        - path: /tls/redis-ca.crt
          content: $$SCONE::redis_ca_cert.chain$$
        - path: /tls/client.crt
          content: $$SCONE::redis_client_cert.crt$$
        - path: /tls/client.key
          content: $$SCONE::redis_client_cert.key$$
</pre></div>
<p>Note that before uploading a policy to SCONE CAS, one first attests that one indeed communicates with a genuine SCONE CAS running inside of a production enclave. This is done with the help of a <a href="../helm_cas/#attesting-scone-cas">SCONE CAS CLI</a>.</p>
<h2 id="code">Code</h2>
<p>The source code of this example is open source and available on github:</p>
<div class="highlight"><pre><span></span>git clone https://github.com/scontain/flask_example.git
<span class="nb">cd</span> flask_example
</pre></div>
<h2 id="run-service-on-local-computer">Run Service On Local Computer</h2>
<p>You can use <code>docker-compose</code> to run this example on your local SGX-enabled computer as follows.
You first generate an encrypted image using script <code>create_image.sh</code>. This generates some environment variables that stored in file <code>myenv</code> and are loaded via <code>source myenv</code>. The service and Redis are started with <code>docker-compose up</code>.</p>
<div class="highlight"><pre><span></span>./create_image.sh
<span class="nb">source</span> myenv
docker-compose up
</pre></div>
<p>We use a public instance of SCONE CAS in this example.</p>
<h3 id="testing-the-service">Testing the service</h3>
<p>Retrieve the API certificate from CAS:</p>
<div class="highlight"><pre><span></span><span class="nb">source</span> myenv
curl -k -X GET <span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">SCONE_CAS_ADDR</span><span class="p">-cas</span><span class="si">}</span><span class="s2">:8081/v1/values/session=</span><span class="nv">$FLASK_SESSION</span><span class="s2">&quot;</span> <span class="p">|</span> jq -r .values.api_ca_cert.value &gt; cacert.pem
</pre></div>
<p>Since the API certificates are issued to the host name "api", we have to use it. You can rely on cURL's --resolve option to point to the actual address (you can also edit your /etc/hosts file).</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">URL</span><span class="o">=</span>https://api:4996
</pre></div>
<div class="highlight"><pre><span></span>curl --cacert cacert.pem -X POST <span class="si">${</span><span class="nv">URL</span><span class="si">}</span>/patient/patient_3 -d <span class="s2">&quot;fname=Jane&amp;lname=Doe&amp;address=&#39;123 Main Street&#39;&amp;city=Richmond&amp;state=Washington&amp;ssn=123-223-2345&amp;email=nr@aaa.com&amp;dob=01/01/2010&amp;contactphone=123-234-3456&amp;drugallergies=&#39;Sulpha, Penicillin, Tree Nut&#39;&amp;preexistingconditions=&#39;diabetes, hypertension, asthma&#39;&amp;dateadmitted=01/05/2010&amp;insurancedetails=&#39;Primera Blue Cross&#39;&quot;</span> --resolve api:4996:127.0.0.1
curl --cacert cacert.pem -X GET <span class="si">${</span><span class="nv">URL</span><span class="si">}</span>/patient/patient_3 --resolve api:4996:127.0.0.1
curl --cacert cacert.pem -X GET <span class="si">${</span><span class="nv">URL</span><span class="si">}</span>/score/patient_3 --resolve api:4996:127.0.0.1
</pre></div>
<p>The output might look as follows:</p>
<div class="highlight"><pre><span></span>$ curl --cacert cacert.pem -X POST https://localhost:4996/patient/patient_3 -d &quot;fname=Jane&amp;lname=Doe&amp;address=&#39;123 Main Street&#39;&amp;city=Richmond&amp;state=Washington&amp;ssn=123-223-2345&amp;email=nr@aaa.com&amp;dob=01/01/2010&amp;contactphone=123-234-3456&amp;drugallergies=&#39;Sulpha, Penicillin, Tree Nut&#39;&amp;preexistingconditions=&#39;diabetes, hypertension, asthma&#39;&amp;dateadmitted=01/05/2010&amp;insurancedetails=&#39;Primera Blue Cross&#39;&quot; --resolve api:4996:127.0.0.1
{&quot;address&quot;:&quot;&#39;123 Main Street&#39;&quot;,&quot;city&quot;:&quot;Richmond&quot;,&quot;contactphone&quot;:&quot;123-234-3456&quot;,&quot;dateadmitted&quot;:&quot;01/05/2010&quot;,&quot;dob&quot;:&quot;01/01/2010&quot;,&quot;drugallergies&quot;:&quot;&#39;Sulpha, Penicillin, Tree Nut&#39;&quot;,&quot;email&quot;:&quot;nr@aaa.com&quot;,&quot;fname&quot;:&quot;Jane&quot;,&quot;id&quot;:&quot;patient_3&quot;,&quot;insurancedetails&quot;:&quot;&#39;Primera Blue Cross&#39;&quot;,&quot;lname&quot;:&quot;Doe&quot;,&quot;preexistingconditions&quot;:&quot;&#39;diabetes, hypertension, asthma&#39;&quot;,&quot;score&quot;:0.1168424489618366,&quot;ssn&quot;:&quot;123-223-2345&quot;,&quot;state&quot;:&quot;Washington&quot;}
$ curl --cacert cacert.pem -X GET localhost:4996/patient/patient_3 --resolve api:4996:127.0.0.1
{&quot;address&quot;:&quot;&#39;123 Main Street&#39;&quot;,&quot;city&quot;:&quot;Richmond&quot;,&quot;contactphone&quot;:&quot;123-234-3456&quot;,&quot;dateadmitted&quot;:&quot;01/05/2010&quot;,&quot;dob&quot;:&quot;01/01/2010&quot;,&quot;drugallergies&quot;:&quot;&#39;Sulpha, Penicillin, Tree Nut&#39;&quot;,&quot;email&quot;:&quot;nr@aaa.com&quot;,&quot;fname&quot;:&quot;Jane&quot;,&quot;id&quot;:&quot;patient_3&quot;,&quot;insurancedetails&quot;:&quot;&#39;Primera Blue Cross&#39;&quot;,&quot;lname&quot;:&quot;Doe&quot;,&quot;preexistingconditions&quot;:&quot;&#39;diabetes, hypertension, asthma&#39;&quot;,&quot;score&quot;:0.1168424489618366,&quot;ssn&quot;:&quot;123-223-2345&quot;,&quot;state&quot;:&quot;Washington&quot;}
$ curl --cacert cacert.pem -X GET localhost:4996/score/patient_3 --resolve api:4996:127.0.0.1
{&quot;id&quot;:&quot;patient_3&quot;,&quot;score&quot;:0.2781606437899131}
</pre></div>
<h2 id="execution-on-a-kubernetes-cluster-and-aks">Execution on a Kubernetes Cluster and AKS</h2>
<p>You can run this example on a Kubernetes cluster or Azure Kubernetes Service (AKS).</p>
<h3 id="install-scone-services">Install SCONE services</h3>
<p>Get access to <code>SconeApps</code> (see <a href="https://sconedocs.github.io/helm/">https://sconedocs.github.io/helm/</a>):</p>
<div class="highlight"><pre><span></span>helm repo add sconeapps https://<span class="si">${</span><span class="nv">GH_TOKEN</span><span class="si">}</span>@raw.githubusercontent.com/scontain/sconeapps/master/
helm repo update
</pre></div>
<p>Give SconeApps access to the private docker images by generating an access token on  <a href="https://gitlab.scontain.com/-/profile/personal_access_tokens">https://gitlab.scontain.com/-/profile/personal_access_tokens</a> to <code>read_registry</code> and set:</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">SCONE_HUB_USERNAME</span><span class="o">=</span>...
<span class="nb">export</span> <span class="nv">SCONE_HUB_ACCESS_TOKEN</span><span class="o">=</span>...
<span class="nb">export</span> <span class="nv">SCONE_HUB_EMAIL</span><span class="o">=</span>...

kubectl create secret docker-registry sconeapps --docker-server<span class="o">=</span>registry.scontain.com:5050 --docker-username<span class="o">=</span><span class="nv">$SCONE_HUB_USERNAME</span> --docker-password<span class="o">=</span><span class="nv">$SCONE_HUB_ACCESS_TOKEN</span> --docker-email<span class="o">=</span><span class="nv">$SCONE_HUB_EMAIL</span>
</pre></div>
<p>Start LAS:</p>
<div class="highlight"><pre><span></span>helm install las sconeapps/las  --set <span class="nv">image</span><span class="o">=</span>registry.scontain.com:5050/sconecuratedimages/kubernetes:las-scone4.2.1 --set service.hostPort<span class="o">=</span><span class="nb">true</span>
</pre></div>
<p>If you use a local cas, you can start this cas service as follows:</p>
<div class="highlight"><pre><span></span>helm install cas sconeapps/cas --set <span class="nv">image</span><span class="o">=</span>registry.scontain.com:5050/sconecuratedimages/services:cas-scone4.2.1
</pre></div>
<p>Install the SGX device plugin for Kubernetes:</p>
<div class="highlight"><pre><span></span>helm install sgxdevplugin sconeapps/sgxdevplugin
</pre></div>
<h3 id="run-the-application">Run the application</h3>
<p>Start by creating a Docker image and setting its name. Remember to specify a repository to which you are allowed to push:</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">IMAGE</span><span class="o">=</span>registry.scontain.com:5050/sconecuratedimages/application:v0.4 <span class="c1"># please change to an image that you can push</span>
./create_image.sh
<span class="nb">source</span> myenv
docker push <span class="nv">$IMAGE</span>
</pre></div>
<p>Use the Helm chart in <a href="https://github.com/scontain/flask_example/tree/master/deploy/helm"><code>deploy/helm</code></a> to deploy the application to a Kubernetes cluster.</p>
<div class="highlight"><pre><span></span>helm install api-v1 deploy/helm <span class="se">\</span>
   --set <span class="nv">image</span><span class="o">=</span><span class="nv">$IMAGE</span> <span class="se">\</span>
   --set scone.cas<span class="o">=</span><span class="nv">$SCONE_CAS_ADDR</span> <span class="se">\</span>
   --set scone.flask_session<span class="o">=</span><span class="nv">$FLASK_SESSION</span>/flask_restapi <span class="se">\</span>
   --set scone.redis_session<span class="o">=</span><span class="nv">$REDIS_SESSION</span>/redis <span class="se">\</span>
   --set service.type<span class="o">=</span>NodePort <span class="se">\</span>
   --set redis.image<span class="o">=</span>registry.scontain.com:5050/sconecuratedimages/apps:redis-6-alpine-scone4.2.1
</pre></div>
<p><strong>NOTE</strong>: Setting <code>service.type=LoadBalancer</code> will allow the application to get traffic from the internet (through a managed LoadBalancer).</p>
<h3 id="test-the-application">Test the application</h3>
<p>After all resources are <code>Running</code>, you can test the API via Helm:</p>
<div class="highlight"><pre><span></span>helm <span class="nb">test</span> api-v1
</pre></div>
<p>Helm will run a pod with a couple of pre-set queries to check if the API is working properly.</p>
<h3 id="access-the-application">Access the application</h3>
<p>If the application is exposed to the world through a service of type LoadBalancer, you can retrieve its CA certificate from CAS:</p>
<div class="highlight"><pre><span></span><span class="nb">source</span> myenv
curl -k -X GET <span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">SCONE_CAS_ADDR</span><span class="p">-cas</span><span class="si">}</span><span class="s2">:8081/v1/values/session=</span><span class="nv">$FLASK_SESSION</span><span class="s2">&quot;</span> <span class="p">|</span> jq -r .values.api_ca_cert.value &gt; cacert.pem
</pre></div>
<p>Retrieve the service public IP address:</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">SERVICE_IP</span><span class="o">=</span><span class="k">$(</span>kubectl get svc --namespace default api-v1-example --template <span class="s2">&quot;{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}&quot;</span><span class="k">)</span>
</pre></div>
<p>Since the API certificates are issued to the host name "api", we have to use it. You can rely on cURL's --resolve option to point to the actual address (you can also edit your /etc/hosts file).</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">URL</span><span class="o">=</span>https://api
</pre></div>
<p>Now you can perform queries such as:</p>
<div class="highlight"><pre><span></span>curl --cacert cacert.pem -X POST <span class="si">${</span><span class="nv">URL</span><span class="si">}</span>/patient/patient_3 -d <span class="s2">&quot;fname=Jane&amp;lname=Doe&amp;address=&#39;123 Main Street&#39;&amp;city=Richmond&amp;state=Washington&amp;ssn=123-223-2345&amp;email=nr@aaa.com&amp;dob=01/01/2010&amp;contactphone=123-234-3456&amp;drugallergies=&#39;Sulpha, Penicillin, Tree Nut&#39;&amp;preexistingconditions=&#39;diabetes, hypertension, asthma&#39;&amp;dateadmitted=01/05/2010&amp;insurancedetails=&#39;Primera Blue Cross&#39;&quot;</span> --resolve api:443:<span class="si">${</span><span class="nv">SERVICE_IP</span><span class="si">}</span>
</pre></div>
<h3 id="clean-up">Clean up</h3>
<div class="highlight"><pre><span></span>helm delete cas
helm delete las
helm delete sgxdevplugin
helm delete api-v1
kubectl delete pod api-v1-example-test-api
</pre></div>
<p>Next, we introduce the different sconified Python versions that we support.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../dapps/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Trusted DApps" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Trusted DApps
            </div>
          </div>
        </a>
      
      
        
        <a href="../Exercise-Docu/exercises/" class="md-footer__link md-footer__link--next" aria-label="Next: Assignments" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Assignments
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright Scontain &copy; 2018-2022
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.5413a266.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
      
        <script src="../css/extra.js"></script>
      
        <script src="../search/main.js"></script>
      
    
  </body>
</html>