



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Scone Documentation - Secure Containers">
      
      
        <link rel="canonical" href="https://sconedocs.github.io/Exercise-Docu/section_otp/">
      
      
        <meta name="author" content="Christof Fetzer">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching pages">
      
        <meta name="lang:search.result.one" content="1 matching page">
      
        <meta name="lang:search.result.other" content="# matching page">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/scone-favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.3">
    
    
      
        <title>Section 2 OTP - SCONE Confidential Computing</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,400,400i,700|">
        <style>body,input{font-family:"PT Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
      <link rel="stylesheet" href="../../css/tooltips.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="purple">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#section-2-otp" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://sconedocs.github.io" title="SCONE Confidential Computing" class="md-header-nav__button md-logo">
          
            <img src="../../img/logo-yellow-square.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                SCONE Confidential Computing
              </span>
              <span class="md-header-nav__topic">
                Section 2 OTP
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search this site" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching this site
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://sconedocs.github.io" title="SCONE Confidential Computing" class="md-nav__button md-logo">
      
        <img src="../../img/logo-yellow-square.png" width="48" height="48">
      
    </a>
    SCONE Confidential Computing
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="News and Overview" class="md-nav__link">
      News and Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Quick Start
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Quick Start
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../workflows/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconify_hw_k8s/" title="Example" class="md-nav__link">
      Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../azure/scone-playground/" title="SCONE Playground on Azure" class="md-nav__link">
      SCONE Playground on Azure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lean_deployment/" title="kubectl" class="md-nav__link">
      kubectl
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconify/" title="Sconify" class="md-nav__link">
      Sconify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconify_filetypes/" title="File Types" class="md-nav__link">
      File Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ee_sconify_image/" title="Sconify Image SE" class="md-nav__link">
      Sconify Image SE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../multi-stakeholder-workflow/" title="Multi-Stakeholder Example" class="md-nav__link">
      Multi-Stakeholder Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../example_policy/" title="Policy Update" class="md-nav__link">
      Policy Update
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../microservices-demo/" title="Boutique Demo" class="md-nav__link">
      Boutique Demo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../faq_sconify/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cc-telenovela/" title="CC Soap Opera" class="md-nav__link">
      CC Soap Opera
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cc-university/" title="CC University" class="md-nav__link">
      CC University
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../vm_vs_enclave/" title="Confidential Computing" class="md-nav__link">
      Confidential Computing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advantages/" title="Advantages of SCONE" class="md-nav__link">
      Advantages of SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../whyscone/" title="SCONE vs Intel SGX SDK" class="md-nav__link">
      SCONE vs Intel SGX SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../technical_summary/" title="Technical summary of SCONE" class="md-nav__link">
      Technical summary of SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../buildingApps/" title="(No) Cross-Compilation" class="md-nav__link">
      (No) Cross-Compilation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../registry/" title="Scontain Registy" class="md-nav__link">
      Scontain Registy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../curated_images/" title="Curated Images" class="md-nav__link">
      Curated Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community_version/" title="Community Version" class="md-nav__link">
      Community Version
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      DevOps Workflows
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        DevOps Workflows
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/" title="Workflows" class="md-nav__link">
      Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mitigation/" title="Attack mitigation" class="md-nav__link">
      Attack mitigation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sadvisories/" title="Security advisories" class="md-nav__link">
      Security advisories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software_updates/" title="Software updates" class="md-nav__link">
      Software updates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../scone-signer/" title="Signing of enclaves" class="md-nav__link">
      Signing of enclaves
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../scone_semantic_versioning/" title="SCONE versioning" class="md-nav__link">
      SCONE versioning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../attestation_by_client/" title="Attestation by client" class="md-nav__link">
      Attestation by client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../technotes/" title="Technotes" class="md-nav__link">
      Technotes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Kubernetes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Kubernetes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../k8s_concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../helm_sgxdevplugin/" title="Kubernetes SGX Plugin" class="md-nav__link">
      Kubernetes SGX Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../kubeapps/" title="Kubeapps" class="md-nav__link">
      Kubeapps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../k8s_dashboard/" title="Kubernetes Dashboard" class="md-nav__link">
      Kubernetes Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../helm_cas/" title="CAS Deploy & Attest" class="md-nav__link">
      CAS Deploy & Attest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../helm_las/" title="LAS Deploy & Platforms" class="md-nav__link">
      LAS Deploy & Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../helm_mariadb/" title="MariaDB Deploy & Attest" class="md-nav__link">
      MariaDB Deploy & Attest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../helm_teemon/" title="TEEMon Deployment" class="md-nav__link">
      TEEMon Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hello_world_kubernetes/" title="Hello World Kubernetes" class="md-nav__link">
      Hello World Kubernetes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../azure/scone-pyspark/" title="PySpark on Azure" class="md-nav__link">
      PySpark on Azure
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      SconeApps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        SconeApps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../helm/" title="SconeApps" class="md-nav__link">
      SconeApps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeapps_database/" title="database" class="md-nav__link">
      database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeapps_maxscale/" title="maxscale" class="md-nav__link">
      maxscale
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeapps_memcached/" title="memcached" class="md-nav__link">
      memcached
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeapps_nginx/" title="nginx" class="md-nav__link">
      nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeapps_openvino/" title="openvino" class="md-nav__link">
      openvino
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeapps_pytorch/" title="pytorch" class="md-nav__link">
      pytorch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeapps_spark/" title="spark" class="md-nav__link">
      spark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeapps_tensorflow/" title="tensorflow" class="md-nav__link">
      tensorflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeapps_tensorflowlite/" title="tensorflowlite" class="md-nav__link">
      tensorflowlite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeapps_zookeeper/" title="zookeeper" class="md-nav__link">
      zookeeper
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Azure Kubernetes Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Azure Kubernetes Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../aks/" title="Confidential AKS" class="md-nav__link">
      Confidential AKS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../aks/flask_demo/" title="Flask Demo" class="md-nav__link">
      Flask Demo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../python_images/" title="Python Images" class="md-nav__link">
      Python Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../aks_integration/" title="AKS Integration" class="md-nav__link">
      AKS Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../MicrosoftAzureIntegrations/" title="AKS Integration Tutorial" class="md-nav__link">
      AKS Integration Tutorial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../aks_charts/" title="AKS Applications" class="md-nav__link">
      AKS Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../aks_setup/" title="AKS Setup" class="md-nav__link">
      AKS Setup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Client Specific Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Client Specific Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1" type="checkbox" id="nav-8-1">
    
    <label class="md-nav__link" for="nav-8-1">
      iExec
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-1">
        iExec
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../iexec_sconify_image/" title="iExec Sconify Image" class="md-nav__link">
      iExec Sconify Image
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Configuration & Attestation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Configuration & Attestation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../CASOverview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cas_intro/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CAS_for_development/" title="Starting CAS" class="md-nav__link">
      Starting CAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CAS_config/" title="CAS Configuration" class="md-nav__link">
      CAS Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../public-CAS/" title="Public CAS" class="md-nav__link">
      Public CAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../LASIntro/" title="Starting LAS" class="md-nav__link">
      Starting LAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cas_blender_example/" title="Posting Sessions" class="md-nav__link">
      Posting Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CAS_cli-intro/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CAS_session_lang_0_2/" title="Policy Language 0.2" class="md-nav__link">
      Policy Language 0.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CAS_session_lang_0_3/" title="Policy Language 0.3" class="md-nav__link">
      Policy Language 0.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../print-arg-env/" title="Secure Arguments" class="md-nav__link">
      Secure Arguments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../otp_demo/" title="One-time Passwords" class="md-nav__link">
      One-time Passwords
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../EncryptedWordCount/" title="Encrypted Code and Input" class="md-nav__link">
      Encrypted Code and Input
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node-example/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../namespace/" title="Namespaces" class="md-nav__link">
      Namespaces
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10" checked>
    
    <label class="md-nav__link" for="nav-10">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../exercises/" title="Assignments" class="md-nav__link">
      Assignments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise0/" title="Assignment 0" class="md-nav__link">
      Assignment 0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise1/" title="Assignment 1" class="md-nav__link">
      Assignment 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise2/" title="Assignment 2" class="md-nav__link">
      Assignment 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise3/" title="Assignment 3" class="md-nav__link">
      Assignment 3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise4/" title="Assignment 4" class="md-nav__link">
      Assignment 4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise5/" title="Assignment 5" class="md-nav__link">
      Assignment 5
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Section 2 OTP
      </label>
    
    <a href="./" title="Section 2 OTP" class="md-nav__link md-nav__link--active">
      Section 2 OTP
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background-info" title="Background Info" class="md-nav__link">
    Background Info
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" title="Motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#things-to-learn-in-this-section" title="Things to learn in this section" class="md-nav__link">
    Things to learn in this section
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignments" title="Assignments" class="md-nav__link">
    Assignments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-1-confidential-qr-code-generator-program" title="Assignment 1: Confidential QR code generator program" class="md-nav__link">
    Assignment 1: Confidential QR code generator program
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-description" title="Problem description" class="md-nav__link">
    Problem description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output" title="Output" class="md-nav__link">
    Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rust-support" title="Rust Support" class="md-nav__link">
    Rust Support
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#single-execution-only" title="Single Execution Only" class="md-nav__link">
    Single Execution Only
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-2-build-a-container-image" title="Assignment 2: Build a container image" class="md-nav__link">
    Assignment 2: Build a container image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-3-generate-a-policy" title="Assignment 3: Generate a policy" class="md-nav__link">
    Assignment 3: Generate a policy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transparent-encryption-of-a-volume" title="Transparent Encryption of a Volume" class="md-nav__link">
    Transparent Encryption of a Volume
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-4-scripting" title="Assignment 4: Scripting" class="md-nav__link">
    Assignment 4: Scripting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-5-add-a-new-authenticator" title="Assignment 5: Add a new authenticator" class="md-nav__link">
    Assignment 5: Add a new authenticator
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#security" title="Security" class="md-nav__link">
    Security
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assignment-6-roll-forward" title="Assignment 6: Roll Forward" class="md-nav__link">
    Assignment 6: Roll Forward
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution" title="Solution" class="md-nav__link">
    Solution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#screencast" title="Screencast" class="md-nav__link">
    Screencast
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Use Cases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Use Cases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../usecases/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../secure_document_management/" title="Confidential Document Management" class="md-nav__link">
      Confidential Document Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../federated_machine_learning/" title="Federated Machine Learning" class="md-nav__link">
      Federated Machine Learning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../shared_source_code/" title="Confidential Code Deployment" class="md-nav__link">
      Confidential Code Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../blender/" title="Blender" class="md-nav__link">
      Blender
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pyspark/" title="PySpark" class="md-nav__link">
      PySpark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tensorflow/" title="TensorFlow" class="md-nav__link">
      TensorFlow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tensorflowlite/" title="TensorFlow Lite" class="md-nav__link">
      TensorFlow Lite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openvino/" title="OpenVino" class="md-nav__link">
      OpenVino
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../vault/" title="Vault" class="md-nav__link">
      Vault
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../scone-use-case-overview/" title="Examples" class="md-nav__link">
      Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../secure_remote_execution/" title="Secure Remote Execution" class="md-nav__link">
      Secure Remote Execution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dockerfileexample/" title="Dockerfile Example" class="md-nav__link">
      Dockerfile Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../multistagebuild/" title="Multi-stage build" class="md-nav__link">
      Multi-stage build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../groupcacheUseCase/" title="GO example" class="md-nav__link">
      GO example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../memory_dump/" title="Finding Secrets" class="md-nav__link">
      Finding Secrets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dapps/" title="Trusted DApps" class="md-nav__link">
      Trusted DApps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../flask_demo/" title="Flask Demo" class="md-nav__link">
      Flask Demo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Execution Modes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Execution Modes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../outline/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../firstcontainer/" title="Simulation Mode" class="md-nav__link">
      Simulation Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hardwaremode/" title="Hardware Mode" class="md-nav__link">
      Hardware Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hostexample/" title="Host Execution" class="md-nav__link">
      Host Execution
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/" title="Installation overview" class="md-nav__link">
      Installation overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dockerinstall/" title="Installing docker" class="md-nav__link">
      Installing docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sgxinstall/" title="Installing Intel SGX driver" class="md-nav__link">
      Installing Intel SGX driver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sconeinstall/" title="Installing SCONE" class="md-nav__link">
      Installing SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../microcode/" title="Updating CPU microcode" class="md-nav__link">
      Updating CPU microcode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../windows10/" title="Windows 10" class="md-nav__link">
      Windows 10
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Language Support
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        Language Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../C/" title="C" class="md-nav__link">
      C
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mono/" title="C#" class="md-nav__link">
      C#
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../C++/" title="C++" class="md-nav__link">
      C++
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Fortran/" title="Fortran" class="md-nav__link">
      Fortran
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../GO/" title="GO" class="md-nav__link">
      GO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Running_Java_Applications_in_Scone_with_remote_attestation/" title="Java with remote attestation" class="md-nav__link">
      Java with remote attestation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pypyscone/" title="PyPy" class="md-nav__link">
      PyPy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mono/" title="Mono" class="md-nav__link">
      Mono
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nodejs/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../R/" title="R" class="md-nav__link">
      R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Rust/" title="Rust" class="md-nav__link">
      Rust
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      IDE Integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        IDE Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../eclipse/" title="Eclipse" class="md-nav__link">
      Eclipse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../helm_vscode/" title="Visual Studio Code" class="md-nav__link">
      Visual Studio Code
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Command Line Interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Command Line Interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../CAS_cli/" title="CLI Reference" class="md-nav__link">
      CLI Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../SCONE_Fileshield/" title="scone fspf" class="md-nav__link">
      scone fspf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../binary_fs/" title="scone binary fs" class="md-nav__link">
      scone binary fs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../SCONE_ENV/" title="environment variables" class="md-nav__link">
      environment variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../MrEnclave/" title="MrEnclave" class="md-nav__link">
      MrEnclave
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../scone_affinity/" title="affinity" class="md-nav__link">
      affinity
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17">
    
    <label class="md-nav__link" for="nav-17">
      Performance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        Performance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../performance/" title="Applications" class="md-nav__link">
      Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../teemon/" title="Monitoring tool" class="md-nav__link">
      Monitoring tool
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-18" type="checkbox" id="nav-18">
    
    <label class="md-nav__link" for="nav-18">
      Background
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-18">
        Background
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../appsecurity/" title="Application-Oriented Security" class="md-nav__link">
      Application-Oriented Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../background/" title="SCONE Background" class="md-nav__link">
      SCONE Background
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../SCONE_Publications/" title="Publications" class="md-nav__link">
      Publications
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../aboutScone/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-22" type="checkbox" id="nav-22">
    
    <label class="md-nav__link" for="nav-22">
      Releases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-22">
        Releases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release5.7/" title="SCONE 5.7.0" class="md-nav__link">
      SCONE 5.7.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release5.6/" title="SCONE 5.6.0" class="md-nav__link">
      SCONE 5.6.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release5.5/" title="SCONE 5.5.0" class="md-nav__link">
      SCONE 5.5.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release5.4/" title="SCONE 5.4.0" class="md-nav__link">
      SCONE 5.4.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background-info" title="Background Info" class="md-nav__link">
    Background Info
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" title="Motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#things-to-learn-in-this-section" title="Things to learn in this section" class="md-nav__link">
    Things to learn in this section
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignments" title="Assignments" class="md-nav__link">
    Assignments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-1-confidential-qr-code-generator-program" title="Assignment 1: Confidential QR code generator program" class="md-nav__link">
    Assignment 1: Confidential QR code generator program
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-description" title="Problem description" class="md-nav__link">
    Problem description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output" title="Output" class="md-nav__link">
    Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rust-support" title="Rust Support" class="md-nav__link">
    Rust Support
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#single-execution-only" title="Single Execution Only" class="md-nav__link">
    Single Execution Only
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-2-build-a-container-image" title="Assignment 2: Build a container image" class="md-nav__link">
    Assignment 2: Build a container image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-3-generate-a-policy" title="Assignment 3: Generate a policy" class="md-nav__link">
    Assignment 3: Generate a policy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transparent-encryption-of-a-volume" title="Transparent Encryption of a Volume" class="md-nav__link">
    Transparent Encryption of a Volume
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-4-scripting" title="Assignment 4: Scripting" class="md-nav__link">
    Assignment 4: Scripting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-5-add-a-new-authenticator" title="Assignment 5: Add a new authenticator" class="md-nav__link">
    Assignment 5: Add a new authenticator
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#security" title="Security" class="md-nav__link">
    Security
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assignment-6-roll-forward" title="Assignment 6: Roll Forward" class="md-nav__link">
    Assignment 6: Roll Forward
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution" title="Solution" class="md-nav__link">
    Solution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#screencast" title="Screencast" class="md-nav__link">
    Screencast
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="section-2-otp">Section 2: OTP</h1>
<p>We address the issue of how to authorize the execution of confidential applications by a user: a user triggers the execution of a confidential program. <em>How can we ensure that the **user*</em> is authorized to do so?*</p>
<p>Of course, one uses standard mechanisms to authenticate users (e.g., <a href="https://en.wikipedia.org/wiki/Single_sign-on">SSO</a>) and authorize the start of a confidential application. Adversaries with root access might impersonate users and circumvent this standard authentication and authorization. We want to prevent an adversary with root access from starting a confidential application. We give some motivation why this might be required below.</p>
<p>We use SCONE policies to require additional authorization. In our reference solution of this section, we assume that we can set up the policies using a trusted computer. For example, we use a newly installed, on-premise computer that is only used to create or update policies. If one uses the computer for other tasks, one might want to run this code in an enclave. We come back to this in a later section.</p>
<h2 id="background-info">Background Info</h2>
<p>This section is a deep dive to learn</p>
<ul>
<li>how to authorize application starts,</li>
<li>how to automate confidential workflows, and</li>
<li>how to solve specific technical issues that appear in the automation of workflows.</li>
</ul>
<p>We also provide you with a reference solution. If you get stuck or run out of time, maybe, look at the reference solution to get some inspiration. Also, if you have some solution / adding, send us a pull request.</p>
<p>To simplify the execution of our solution inside enclaves and to use some more modern scripting (i.e., which means we exclude <code>bash</code>), we use 'rust-script' in this section for our reference solution. One can convert this code to run as compiled program.</p>
<p>If you do not want to automate the solution, you might simply use the <a href="../../CAS_cli/">Scone CLI</a> to solve the assignments. For learning how to automate confidential workflows, it should be sufficient to study the <code>rust scripts</code>. These scripts use Scone-related <code>Rust</code> crates. For a deep dive, you could study how these crates are implemented.</p>
<h2 id="motivation">Motivation</h2>
<p>We focus on using <strong>OTPs</strong> (One Time Passwords) to authorize the start of confidential applications. You can look at a <a href="../../otp_demo/">OTP demo</a> for an example of how to use OTPs in the context of SCONE.</p>
<p>To motivate the use of OTPs, let us look at a use case. We want to sign a container image with the help of private/public key pair. To protect the private key pair, we want to generate the key pair inside an enclave and keep the private key inside the enclaves.</p>
<p>The first approach would be to run a confidential <em>signer</em> program, which signs container images inside an enclave and always encrypts the private key. SCONE CAS generates the key pair. Its SCONE CAS policy grants the signer program access to the key pair: After a successful attestation, the signer can read the private key from an <em>injected file</em>.</p>
<p>Starting the confidential <em>signer</em> CLI program is limited to certain users. Note that an adversary with root access can impersonate any user. For example, sometimes using the <code>su</code> command is sufficient. Therefore, an adversary might use <em>signer</em> to sign any image. Therefore, there is no need to know the private key.</p>
<p>We cannot only rely on the operating system's access control mechanisms to restrict access to authorized users. To limit the use of <strong>signer</strong> by adversaries, we can use <strong>OTPs</strong>. Each authorized user has access to authenticators. An adversary could log the OTPs but cannot use the OTPs since it is for single use only. To generate the OTP, an authorized user can use a vanilla authenticator.</p>
<p>In this section, we will focus on authenticating users with the help of OTPs. You will see that we assume to have a trusted computer to bootstrap. For example, a laptop that you only use for performing critical tasks. If you worry about this assumption, we will generalize this solution in later sections. Later, we will address the following aspects:</p>
<ul>
<li><em>How to use this approach to protect a **signer*</em> program*:</li>
<li>we show how to protect an existing program and convert it to a confidential program,</li>
<li>that protects its keys, and</li>
<li>
<p>that provides access control via OTPs.</p>
</li>
<li>
<p><em>How to protect the <code>SCONE CLI</code></em>:</p>
</li>
<li><strong>access control</strong>: we will show how to add OTPs to access the SCONE CLI, and</li>
<li>
<p><strong>confidentiality of keys</strong>: to run the SCONE CLI inside of enclaves to protect the CLI private key,</p>
</li>
<li>
<p><em>How to add a **Role-Based Access Control*</em> (RBAC) using OTPs*:</p>
</li>
<li>
<p>RBAC can be independent of the operating system and entirely under the control of an application owner,</p>
</li>
<li>
<p><em>How to run simple scripts inside of enclaves</em>:</p>
</li>
<li>only needing to provide a single OTP to start the script</li>
<li>protecting the secrets processed by the script</li>
</ul>
<h2 id="things-to-learn-in-this-section">Things to learn in this section</h2>
<p>In the different assignments of this section, you will also learn how to solve some generic issues:</p>
<ul>
<li>
<p><strong>How to execute a command at most one time</strong>. This can easily be extended to <strong>n</strong> times and reused for other programs.</p>
</li>
<li>
<p><strong>How to create a volume that is transparently encrypted</strong>. The integrity, confidentiality, and consistency of the files stored in this volume are protected. In this example, the focus is on ensuring consistency, i.e., we always read the latest data that was written.</p>
</li>
<li>
<p><strong>How only an authorized and authenticated user can run a given program</strong>. Using an authenticator, a user can authenticate themself with an OTP.</p>
</li>
</ul>
<p>You will learn more specific things related to OTPs:</p>
<ul>
<li>
<p><strong>How to add a new authenticator</strong>. If a user wants to move to a new authenticator, the user needs to get access to the QR code for the new authenticator - using an OTP from an existing authenticator.</p>
</li>
<li>
<p><strong>rolling forward</strong>. Sometimes, users might lose access to their authenticators. For example, a user's smartphone has been lost or stolen. If the smartphone has a hardware failure, we might have set up a backup authenticator. However, if the smartphone is stolen, a user wants to register a new secret. Hence, we need to generate a new QR code to initialize a new authenticator. We need to authorize the user without having access to the old authenticator. We achieve this by falling back to the SCONE CLI.</p>
</li>
</ul>
<h2 id="assignments">Assignments</h2>
<p>We split this section into a sequence of assignments.</p>
<h2 id="assignment-1-confidential-qr-code-generator-program">Assignment 1: Confidential QR code generator program</h2>
<p>We use Time-based One Time Passwords (TOTP), which means that the one uses a secret and the current time to generate One Time Passwords (OTP). <a href="https://datatracker.ietf.org/doc/html/rfc6238">RFC6238</a> introduces TOTP.</p>
<p>TOTP passwords could be stolen as regular passwords. They are, however, only valid for at most 30 seconds. We will learn that SCONE CAS accepts an OTP only once. This means that after a user has used an OTP, neither the user nor an adversary can use this OTP anymore. Therefore, a user would get an error message that this OTP was already used if the adversary is faster than the user of sending the OTP.</p>
<p>An adversary could trick an authorized user into revealing a valid OTP using some phishing attack. We, therefore, recommend that one does not use a single secret (a.k.a. <em>account</em>) to authenticate a user. Instead, we recommend that a user allocates an account for each <em>role</em> or <em>task</em> of the user. Each account has a unique secret and hence, produces a unique sequence of OTPs.</p>
<p>In a nutshell, a user should only type in an OTP when wanting to perform a specific task. An adversary cannot use this OTP to perform a different task - since each task requires different OTPs. In practice, one still needs to balance the number of distinct OTP accounts a user needs to manage.</p>
<h3 id="problem-description">Problem description</h3>
<p>Typically, one uses an authenticator program like <code>FreeOTP</code> or <code>Microsoft Authenticator</code> running on a smartphone. The authenticator needs to learn a secret to generate valid TOTPs. The standard way is to scan a <a href="https://en.wikipedia.org/wiki/QR_code">QR code</a>.</p>
<p>The first assignment is to generate a QR code for a given OTP secret. Our objective is to create a confidential program, <code>otpqr</code>, that gets the secret via an environment variable and then writes a file that contains the QR code as a <a href="https://en.wikipedia.org/wiki/Scalable_Vector_Graphics">SVG</a>. To display the QR code, one can use an SVG viewer.</p>
<h3 id="output">Output</h3>
<p>We assume that a user has access to a computer that can - at least temporarily  - be trusted. Still, our objective is that the OTP secret nor the SVG is visible in the terminal log. Instead, it should be written to an output file.</p>
<p>To ensure that the computer is trusted, the user might use a dedicated computer, check that no other users are logged in, no other programs are running, perform a secure and measured boot, etc.</p>
<p>After scanning the QR code with their authenticator, the user deletes the file using some secure file delete function like <code>shred</code>:</p>
<div class="highlight"><pre><span></span>shred -n <span class="m">3</span> -z -u qrcode.svg
</pre></div>
<h3 id="rust-support">Rust Support</h3>
<p>Create a program - actually, a command-line utility - that generates the QR code for a given secret. In this step, we do native programming. In assignment two, we transform this native program into a confidential program that executes in an enclave.</p>
<p>Use your favorite programming language to build this program. Therefore, in our reference solution, we write this program in <code>Rust</code>. Rust provides an external crate <code>google_authenticator</code>, which permits generating SVGs - or URLs -  to add accounts to an authenticator.</p>
<p>You can pass the required parameters like the secret and the account name via command-line arguments or environment variables. In our reference solution, we pass everything via environment variables.</p>
<h3 id="single-execution-only">Single Execution Only</h3>
<p>We want to ensure that one can generate the SVG with the QR code only once. After the first time one generates the QR code, one cannot just execute the program <code>otpqr</code> a second time to regenerate the QR code again.</p>
<p>To do so, <code>otpqr</code> could first generate a file with a given path, say, <code>single_run/once</code>. If the file already exists, <code>otpqr</code> exits with an error since <code>otpqr</code> had already generated the QR code.</p>
<p>If the file <code>single_run/once</code> has not yet existed, <code>otpqr</code> generates the QR code and stores it in the output file. An adversary with root access could delete this file. However, when one uses the <em>SCONE file shield</em>, the runtime of <code>otpqr</code> would detect that file <code>single_run/once</code> was removed!</p>
<p>When running <code>otpqr</code> inside an enclave, <code>otpqr</code> might typically abort during attestation. For some more sophisticated attacks that remove the file after <code>otpqr</code> has already started, the runtime will detect this when creating the file <code>single_run/once</code>. In this case, the program aborts.</p>
<p>To enforce this <strong>consistency</strong> of the files, i.e., one reads the latest version that was written, we need to enable the SCONE file shield for file <code>single_run/once</code>. We address this in the following two assignments:</p>
<ul>
<li>Assignment 2: we need to run this program inside of an enclave, and</li>
<li>Assignment 3: we need to add a policy.</li>
</ul>
<h2 id="assignment-2-build-a-container-image">Assignment 2: Build a container image</h2>
<p>To execute Rust programs inside of enclaves, SCONE provides a <a href="https://sconedocs.github.io/Rust/">cross-compiler for Rust</a>. With the help of this image, you can build your program with <code>scone cargo</code>.</p>
<p>Build a container image containing the cross-compiled program you created in task 1. Use a <a href="https://sconedocs.github.io/multistagebuild/">multistage build</a> to generate a minimal image:</p>
<ul>
<li>in the first stage, you use the SCONE Rust cross-compiler image (<registry.scontain.com:5050/sconecuratedimages/crosscompilers:ubuntu>) to build your application with <code>cargo build --release</code>. If you use a different programming language, you might need another container image.</li>
</ul>
<p>in the second stage, you use the binary created in the first stage and copy it to a smaller container image.</p>
<ul>
<li>In the case of <code>Rust</code>, we create a <a href="https://sconedocs.github.io/SCONE_toolchain/#statically-linked-binaries">statically linked binary</a> which does not have any external dependencies. Hence, it is OK to execute in an Alpine-based container despite being built using an Ubuntu-based image.</li>
</ul>
<p>Provide a simple script, say, <code>build_image.sh</code> that builds the container image with the help of a Dockerfile.</p>
<h2 id="assignment-3-generate-a-policy">Assignment 3: Generate a policy</h2>
<p>Now that we have a container image to deploy a confidential program, the next assignment is to create a <a href="https://sconedocs.github.io/CAS_session_lang_0_3/"><em>SCONE policy</em> (a.k.a., session)</a> for SCONE to be able to attest <code>otpqr</code>.</p>
<p>To attest <code>otpqr</code>, you need to specify an attestation section that defines how to attest and verify this service. Typically, we use templates for this. In the reference solution, we use <a href="https://handlebarsjs.com/guide/#what-is-handlebars">handlebars</a> that might look like this:</p>
<div class="highlight"><pre><span></span><span class="nt">services</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">otpqr</span>
      <span class="nt">attestation</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">mrenclave</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="p p-Indicator">{{</span><span class="nv">mrenclave</span><span class="p p-Indicator">}}</span>
</pre></div>
<p>The <a href="https://sconedocs.github.io/CAS_session_lang_0_3/#attestation">attestation</a> of a service can involve multiple factors. Measurement-based attestation uses <code>MrEnclave</code>, which is the expected initial state of the enclave. One can also verify that the enclave was signed by a certain <code>MrSigner</code>.  </p>
<p>In this assignment, we want to use measurement-based attestation. Therefore, we need to determine <code>MrEnclave</code> of <code>otpqr</code>. One can achieve this by setting environment variable <a href="https://sconedocs.github.io/MrEnclave/">SCONE_HASH</a> to 1 before executing <code>otpqr</code>. The output might look like this:</p>
<div class="highlight"><pre><span></span>bb79c2851d6f205694314bc03f91e0acba4fd39ba24aaea7b34fa9a78fe6c531
</pre></div>
<h3 id="transparent-encryption-of-a-volume">Transparent Encryption of a Volume</h3>
<p>To ensure one can execute the QR code generator only once,  <code>otpqr</code> creates a file <code>/root/single_run/once</code>. While this file does not contain any secrets, we need to ensure consistency, i.e., if this file was created and then deleted by an adversary, we will detect this.</p>
<p>To ensure that <code>/root/single_run/once</code> is persistent, one typically would ensure that this file is stored in some persistent Docker or Kubernetes volume. We activate the <strong>SCONE file system shield</strong> as follows. We define a volume as part of the SCONE policy:</p>
<div class="highlight"><pre><span></span>volumes:
    - name: single_run
      export:
        - session: {{session2}}
</pre></div>
<p>This encrypted volume can be shared with other policies by exporting this volume to other policies. In this example, the volume is shared with the policy referred to by <code>{{session2}}</code>.</p>
<p>This volume can be mapped at a given path:</p>
<div class="highlight"><pre><span></span>images:
    - name: otpqr_image
      volumes:
        - name: single_run
          path: /root/single_run
</pre></div>
<p>Each service is associated with an image. In this case, we associate  <code>otpqr</code> with image <code>otpqr_image</code> as follows:</p>
<div class="highlight"><pre><span></span>services:
    - name: otpqr
      image_name: otpqr_image
</pre></div>
<p>As seen in the last section, we can create and update policies using the SCONE CLI. As part of our reference solution, we provide a Rust crate <code>scone_cli</code> to create and update policies.</p>
<h2 id="assignment-4-scripting">Assignment 4: Scripting</h2>
<p>Write a script - in your favorite scripting language - with commands:</p>
<ul>
<li><code>create</code>: to create a policy for <code>optqr</code> and upload this policy to <code>scone-cas.cf</code>,</li>
<li><code>gen_qr_code</code>to generate a QR code. This can only be executed once after a create or roll-back - even if you delete the file <code>/root/single_run/once</code>.</li>
</ul>
<p>Add an account to your favorite authenticator using the emitting QR code.</p>
<p>The reference implementation uses a <code>rust-script</code> and the above-mentioned <code>scone-cli</code> crate to execute these steps.</p>
<h2 id="assignment-5-add-a-new-authenticator">Assignment 5: Add a new authenticator</h2>
<p>Extend your script from assignment 4 by adding a new command:</p>
<ul>
<li><code>add-authenticator</code>: adds a new authenticator, i.e., issues a new QR code. This command asks you for the current OTP, and only if a valid OTP is provided a QR code is generated.</li>
</ul>
<p>To do so, we add a new option to <code>otpqr</code> that drops the check if the QR code was already generated. To do so, define an argument or an environment variable that indicates to <code>otpqr</code> that it does not need to check the file <code>/root/single_run/once</code>.</p>
<p>In our reference solution, we define an environment variable <code>OTP_RESET</code>, which is maybe a misnomer. If this is set, <code>otpqr</code> does not check the <code>/root/single_run/once</code> during this execution.</p>
<p>You need to define a policy such that <code>otpqr</code> with this option <code>OTP_RESET</code> is only defined if the correct OTP was supplied. Note that the OTP can be checked by SCONE during attestation (see <a href="https://sconedocs.github.io/CAS_session_lang_0_3/#2fa-with-time-based-one-time-passwords">2FA with TOTP</a>).</p>
<p>You need to enable this in a policy's <code>security</code> section. You can define this as follows:</p>
<div class="highlight"><pre><span></span>security:
  attestation:
    one_time_password_shared_secret: {{secret}}
</pre></div>
<p>The script itself defines the secret. In the future, we will extend the session language such that
s
- to permit a shared secret per service, and
- to use secrets generated by the CAS in the secret section.</p>
<p>Since currently, all services in a policy will need to provide a valid OTP during startup, command <code>add-authenticator</code> cannot use the same policy as <code>gen_qr_code</code> (which cannot require an OTP since no shared secret does exist yet).  </p>
<p>One appends the OTP to the <code>SCONE_CONFIG_ID</code>, i.e., to the name of the session and the service name. For example, <code>add-authenticator</code> might execute <code>otpqr</code> inside of a container as follows.</p>
<div class="highlight"><pre><span></span>docker run -it --rm -w <span class="s2">&quot;/root&quot;</span> -v <span class="s2">&quot;</span><span class="nv">$PWD</span><span class="s2">:/root&quot;</span> -e <span class="nv">SCONE_CAS_ADDR</span><span class="o">=</span>scone-cas.cf -e <span class="nv">SCONE_CONFIG_ID</span><span class="o">={{</span>session2<span class="o">}}</span>/otpqr@703357  otpqr:scone /bin/otpqr
</pre></div>
<p>If one uses the wrong OTP or it takes too long for <code>otpqr</code> - which runs in a docker container - to startup, you will get an error code like this:</p>
<div class="highlight"><pre><span></span><span class="o">[</span>SCONE<span class="p">|</span>FATAL<span class="o">]</span> src/process/init.c:476:__scone_prepare_secure_config<span class="o">()</span>: Could not initialize enclave state: Attestation failed
  Caused by: CAS sent an attestation/configuration error: Failed to retrieve service attestation configuration
  Caused by: The given One-time Password is invalid. Please try again.
Note: Connecting to CAS at scone-cas.cf <span class="o">(</span>port <span class="m">18765</span><span class="o">)</span> using service ID mjSKNz1VaDYFFHNJnBmP5/otpqr-reset/otpqr@703357
</pre></div>
<h3 id="security">Security</h3>
<p>So why does this approach prevent an adversary from getting the QR code using <code>add-authenticator</code>?</p>
<ul>
<li>
<p>First, the adversary runs <code>otpqr</code> in the session you defined for <code>add-authenticator</code>. This means that <code>otpqr</code> will only startup if a valid and unique OTP is provided. If the adversary already knows how to generate valid OTPs, there would be no need to call <code>add-authenticator</code>.</p>
</li>
<li>
<p>Second, the adversary might execute <code>gen_qr_code</code> and tries to set the argument/environment variable (<code>OTP_RESET</code>) to ignore file <code>/root/single_run/once</code>. Note that arguments are passed from the policy to <code>otpqr</code> only. Any arguments/environment variables passed by the adversary are ignored. Since we do not set <code>OTP_RESET</code> in the policy for  <code>gen_qr_code</code>, an adversary cannot get to the QR code in this way.</p>
</li>
<li>
<p>Third, the adversary might try to run <code>otpqr</code> in the context of a different policy. In this policy, the adversary might set <code>OTP_RESET</code>. However, the adversary would need to know the OTP secret to generate the correct QR code. Again, the objective of the adversary is to learn this secret.</p>
</li>
</ul>
<p>Note that we assumed that we <strong>execute the script on a trusted host</strong>. In case we want to relax this assumption, i.e., run the script on an untrusted host, there are a few exciting security issues that we address in later sections of this tutorial:</p>
<ul>
<li>the state of the script is stored in plain text,</li>
<li>the script is not confidential, i.e., an adversary could steal secrets during the execution,</li>
<li>the scone CLI is not sufficiently protected against unauthorized use, and it does not protect its secrets.</li>
</ul>
<p>To solve these open issues, one runs the script and the Scone CLI inside the enclaves. A more difficult problem is establishing trust in our script when running on a host that we do not trust?</p>
<h3 id="assignment-6-roll-forward">Assignment 6: Roll Forward</h3>
<p>The task of this assignment is to implement a <code>roll-forward</code> command. It replaces the OTP secret with a new one. After executing this command, one needs to update, i.e., remove and then add the OTP accounts previously added with the QR code generated by 'gen-qr-code' or 'add-authenticator'.</p>
<p>Command <code>roll-forward</code> addresses two issues. First, let us consider that an authenticator was lost or is inaccessible. We might not have set up a spare authenticator. Therefore, we cannot use <code>add-authenticator</code> to add a new authenticator. We need a method</p>
<ul>
<li>to invalidate the existing authenticators,</li>
<li>to create a new OTP secret, and</li>
<li>add new authenticators.</li>
</ul>
<p>Second, let us consider that somebody erased the files in the volume <code>/root/single_run/once</code>. In this case, <code>otpqr</code> will fail during startup since the volume is inconsistent. We want to be able to recover from this.</p>
<p>This assignment assumes that access to the Scone CLI is protected by only being available on a trusted host. In this case, we update the policy to</p>
<ul>
<li>define a new OTP secret, and</li>
<li>we replace the volume with a new volume that is not yet initialized</li>
</ul>
<p>Note that one could also add an option that creates a new volume without creating a new OTP secret. In this case, one might protect this by requiring an OTP to replace the volume.</p>
<p>To replace a volume with a new one, we can use handlebars in the policy templates:</p>
<div class="highlight"><pre><span></span>volumes:
    - name: single_run_{{volume_version}}
      export:
        - session: {{session2}}

images:
    - name: otpqr_image
      volumes:
        - name: single_run_{{volume_version}}
          path: /root/single_run
</pre></div>
<h2 id="solution">Solution</h2>
<p>Note the reference solution is available at <a href="https://github.com/scontain/Exercise/tree/main/Section_OTP">https://github.com/scontain/Exercise/tree/main/Section_OTP</a>.</p>
<h2 id="screencast">Screencast</h2>
<script id="asciicast-470371" src="https://asciinema.org/a/470371.js"  data-autoplay="true" data-size="big" data-loop="1" data-cols="90" async></script>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../exercise5/" title="Assignment 5" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Assignment 5
              </span>
            </div>
          </a>
        
        
          <a href="../../usecases/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Introduction
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright Scontain  2021
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.e72fd936.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
      
        <script src="../../doc_theme/extra.js"></script>
      
        <script src="../../search/main.js"></script>
      
    
    
      
    
  </body>
</html>