
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Scone Documentation - Secure Containers">
      
      
        <meta name="author" content="Christof Fetzer">
      
      
        <link rel="canonical" href="https://sconedocs.github.io/ee_sconify_image/">
      
      <link rel="icon" href="../img/scone-favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-8.2.4">
    
    
      
        <title>Sconify Image SE - Confidential Computing</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"PT Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="../css/tooltips.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sconify-container-image-standard-edition" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Confidential Computing" class="md-header__button md-logo" aria-label="Confidential Computing" data-md-component="logo">
      
  <img src="../img/SCONE-logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Confidential Computing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Sconify Image SE
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../news/" class="md-tabs__link">
        News and Overview
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../workflows/" class="md-tabs__link md-tabs__link--active">
        Quick Start
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../operations/" class="md-tabs__link">
        DevOps Workflows
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../k8s_concepts/" class="md-tabs__link">
        Kubernetes
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../helm/" class="md-tabs__link">
        SconeApps
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../aks/" class="md-tabs__link">
        Azure Kubernetes Services
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../CASOverview/" class="md-tabs__link">
        Configuration & Attestation
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../usecases/" class="md-tabs__link">
        Use Cases
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../registry/" class="md-tabs__link">
        Sign up
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../iexec_sconify_image/" class="md-tabs__link">
        More
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Confidential Computing" class="md-nav__button md-logo" aria-label="Confidential Computing" data-md-component="logo">
      
  <img src="../img/SCONE-logo-white.png" alt="logo">

    </a>
    Confidential Computing
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          News and Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="News and Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          News and Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../news/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cc-telenovela/" class="md-nav__link">
        CC Soap Opera
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cc-university/" class="md-nav__link">
        CC University
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vm_vs_enclave/" class="md-nav__link">
        Confidential Computing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../advantages/" class="md-nav__link">
        Advantages of SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../whyscone/" class="md-nav__link">
        SCONE vs Intel SGX SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../technical_summary/" class="md-nav__link">
        Technical summary of SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../buildingApps/" class="md-nav__link">
        (No) Cross-Compilation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../curated_images/" class="md-nav__link">
        Curated Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../community_version/" class="md-nav__link">
        Community Version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Quick Start
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Quick Start" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Quick Start
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflows/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify_hw_k8s/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lean_deployment/" class="md-nav__link">
        kubectl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify/" class="md-nav__link">
        Sconify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconify_filetypes/" class="md-nav__link">
        File Types
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Sconify Image SE
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Sconify Image SE
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sconify-image-workflow" class="md-nav__link">
    Sconify Image Workflow
  </a>
  
    <nav class="md-nav" aria-label="Sconify Image Workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scone-file-protection" class="md-nav__link">
    SCONE File Protection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scone-binary-file-system" class="md-nav__link">
    SCONE Binary File System
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acquiring-policy-access" class="md-nav__link">
    Acquiring Policy Access
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acquire-sconify-image-resources" class="md-nav__link">
    Acquire Sconify Image Resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cicd-workflow" class="md-nav__link">
    CI/CD Workflow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-sconifcation-options" class="md-nav__link">
    Advanced Sconifcation Options
  </a>
  
    <nav class="md-nav" aria-label="Advanced Sconifcation Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-default-sconification-behavior" class="md-nav__link">
    Disable Default Sconification Behavior
  </a>
  
    <nav class="md-nav" aria-label="Disable Default Sconification Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-binary-symlink-detection" class="md-nav__link">
    Disable Binary Symlink Detection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-copying-of-shared-object-dependencies" class="md-nav__link">
    Disable Copying of Shared Object Dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-copying-of-service-libraries" class="md-nav__link">
    Disable Copying of Service Libraries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-binary-file-system-defaults" class="md-nav__link">
    Disable Binary File System Defaults
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-replacement-of-unsconifiable-binaries" class="md-nav__link">
    Disable Replacement of Unsconifiable Binaries
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#policy-extension-options" class="md-nav__link">
    Policy Extension Options
  </a>
  
    <nav class="md-nav" aria-label="Policy Extension Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command" class="md-nav__link">
    Command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    Environment Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-directory" class="md-nav__link">
    Working Directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volumes" class="md-nav__link">
    Volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-default-session-creation-behavior" class="md-nav__link">
    Disable Default Session Creation Behavior
  </a>
  
    <nav class="md-nav" aria-label="Disable Default Session Creation Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-copying-of-environment-variables" class="md-nav__link">
    Disable Copying of Environment Variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-helm-chart-generation" class="md-nav__link">
    Automatic Helm Chart Generation
  </a>
  
    <nav class="md-nav" aria-label="Automatic Helm Chart Generation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volumes_1" class="md-nav__link">
    Volumes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signing-options" class="md-nav__link">
    Signing Options
  </a>
  
    <nav class="md-nav" aria-label="Signing Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scone-signer" class="md-nav__link">
    Scone Signer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-upload-options" class="md-nav__link">
    Session Upload Options
  </a>
  
    <nav class="md-nav" aria-label="Session Upload Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identity" class="md-nav__link">
    Identity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-default-session-upload-behavior" class="md-nav__link">
    Disable Default Session Upload Behavior
  </a>
  
    <nav class="md-nav" aria-label="Disable Default Session Upload Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-session-upload" class="md-nav__link">
    Disable Session Upload
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-attestation" class="md-nav__link">
    Disable Attestation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-session-security-attestation" class="md-nav__link">
    Disable Session Security Attestation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#all-supported-options" class="md-nav__link">
    All Supported Options
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multi-stakeholder-workflow/" class="md-nav__link">
        Multi-Stakeholder Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example_policy/" class="md-nav__link">
        Policy Update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microservices-demo/" class="md-nav__link">
        Boutique Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq_sconify/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_11" type="checkbox" id="__nav_3_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_11">
          sconectl
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="sconectl" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_11">
          <span class="md-nav__icon md-icon"></span>
          sconectl
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_mesh_tutorial/" class="md-nav__link">
        Hello World
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconectl/" class="md-nav__link">
        sconectl cli
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_12" type="checkbox" id="__nav_3_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_12">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_12">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hostexample/" class="md-nav__link">
        Host Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dockerinstall/" class="md-nav__link">
        Installing docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sgxinstall/" class="md-nav__link">
        Installing Intel SGX driver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeinstall/" class="md-nav__link">
        Installing SCONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microcode/" class="md-nav__link">
        Updating CPU microcode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../windows10/" class="md-nav__link">
        Windows 10
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_13" type="checkbox" id="__nav_3_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_13">
          Workshop
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Workshop" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_13">
          <span class="md-nav__icon md-icon"></span>
          Workshop
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/setup/" class="md-nav__link">
        getting access
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install_sconectl/" class="md-nav__link">
        install sconectl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/details/" class="md-nav__link">
        background
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/hands_on_1/" class="md-nav__link">
        hands on 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/hands_on_2/" class="md-nav__link">
        hands on 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/next_steps/" class="md-nav__link">
        next steps
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_14" type="checkbox" id="__nav_3_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_14">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorial" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_14">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercises/" class="md-nav__link">
        Assignments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise0/" class="md-nav__link">
        Assignment 0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise1/" class="md-nav__link">
        Assignment 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise2/" class="md-nav__link">
        Assignment 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise3/" class="md-nav__link">
        Assignment 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise4/" class="md-nav__link">
        Assignment 4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/exercise5/" class="md-nav__link">
        Assignment 5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-Docu/section_otp/" class="md-nav__link">
        Section 2 OTP
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_15" type="checkbox" id="__nav_3_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_15">
          SCONE Execution Modes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SCONE Execution Modes" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_15">
          <span class="md-nav__icon md-icon"></span>
          SCONE Execution Modes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../outline/" class="md-nav__link">
        Execution Modes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firstcontainer/" class="md-nav__link">
        Simulation Mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardwaremode/" class="md-nav__link">
        Hardware Mode
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          DevOps Workflows
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DevOps Workflows" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          DevOps Workflows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/" class="md-nav__link">
        Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mitigation/" class="md-nav__link">
        Attack mitigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sadvisories/" class="md-nav__link">
        Security advisories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software_updates/" class="md-nav__link">
        Software updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone-signer/" class="md-nav__link">
        Signing of enclaves
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../edmm/" class="md-nav__link">
        EDMM support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_semantic_versioning/" class="md-nav__link">
        SCONE versioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../attestation_by_client/" class="md-nav__link">
        Attestation by client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../technotes/" class="md-nav__link">
        Technotes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kubernetes" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s_concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_sgxdevplugin/" class="md-nav__link">
        Kubernetes SGX Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubeapps/" class="md-nav__link">
        Kubeapps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s_dashboard/" class="md-nav__link">
        Kubernetes Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_cas/" class="md-nav__link">
        CAS Deploy & Attest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_las/" class="md-nav__link">
        LAS Deploy & Platforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_mariadb/" class="md-nav__link">
        MariaDB Deploy & Attest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_teemon/" class="md-nav__link">
        TEEMon Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hello_world_kubernetes/" class="md-nav__link">
        Hello World Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../azure/scone-pyspark/" class="md-nav__link">
        PySpark on Azure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          SconeApps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SconeApps" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          SconeApps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/" class="md-nav__link">
        SconeApps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_database/" class="md-nav__link">
        database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_maxscale/" class="md-nav__link">
        maxscale
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_memcached/" class="md-nav__link">
        memcached
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_nginx/" class="md-nav__link">
        nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_openvino/" class="md-nav__link">
        openvino
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_pytorch/" class="md-nav__link">
        pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_spark/" class="md-nav__link">
        spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_tensorflow/" class="md-nav__link">
        tensorflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_tensorflowlite/" class="md-nav__link">
        tensorflowlite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sconeapps_zookeeper/" class="md-nav__link">
        zookeeper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Azure Kubernetes Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Azure Kubernetes Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Azure Kubernetes Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks/" class="md-nav__link">
        Confidential AKS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../azure/scone-playground/" class="md-nav__link">
        SCONE Playground on Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks/flask_demo/" class="md-nav__link">
        Flask Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_images/" class="md-nav__link">
        Python Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_integration/" class="md-nav__link">
        AKS Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MicrosoftAzureIntegrations/" class="md-nav__link">
        AKS Integration Tutorial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_charts/" class="md-nav__link">
        AKS Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aks_setup/" class="md-nav__link">
        AKS Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Configuration & Attestation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration & Attestation" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Configuration & Attestation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CASOverview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas_intro/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_for_development/" class="md-nav__link">
        Starting CAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_config/" class="md-nav__link">
        CAS Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../auditLog/" class="md-nav__link">
        Audit Log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../public-CAS/" class="md-nav__link">
        Public CAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../LASIntro/" class="md-nav__link">
        Starting LAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas_blender_example/" class="md-nav__link">
        Posting Sessions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_cli-intro/" class="md-nav__link">
        CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_session_lang_0_2/" class="md-nav__link">
        Policy Language 0.2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_session_lang_0_3/" class="md-nav__link">
        Policy Language 0.3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../print-arg-env/" class="md-nav__link">
        Secure Arguments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../host_arguments/" class="md-nav__link">
        Host Arguments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../otp_demo/" class="md-nav__link">
        One-time Passwords
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../EncryptedWordCount/" class="md-nav__link">
        Encrypted Code and Input
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node-example/" class="md-nav__link">
        Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../namespace/" class="md-nav__link">
        Namespaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network_shield/" class="md-nav__link">
        Network Shield
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_production/" class="md-nav__link">
        CAS production setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas-backup-controller/" class="md-nav__link">
        CAS Backup Controller for Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cas-backup-controller-quick-start/" class="md-nav__link">
        CAS Backup Controller Quick Start
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Use Cases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Use Cases" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Use Cases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usecases/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secure_document_management/" class="md-nav__link">
        Confidential Document Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../federated_machine_learning/" class="md-nav__link">
        Federated Machine Learning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shared_source_code/" class="md-nav__link">
        Confidential Code Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blender/" class="md-nav__link">
        Blender
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pyspark/" class="md-nav__link">
        PySpark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow/" class="md-nav__link">
        TensorFlow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflowlite/" class="md-nav__link">
        TensorFlow Lite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openvino/" class="md-nav__link">
        OpenVino
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vault/" class="md-nav__link">
        Vault
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone-use-case-overview/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secure_remote_execution/" class="md-nav__link">
        Secure Remote Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dockerfileexample/" class="md-nav__link">
        Dockerfile Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multistagebuild/" class="md-nav__link">
        Multi-stage build
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../groupcacheUseCase/" class="md-nav__link">
        GO example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../memory_dump/" class="md-nav__link">
        Finding Secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dapps/" class="md-nav__link">
        Trusted DApps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flask_demo/" class="md-nav__link">
        Flask Demo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Sign up
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Sign up" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Sign up
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../registry/" class="md-nav__link">
        Scontain Registy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          More
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="More" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          More
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_1" type="checkbox" id="__nav_11_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_1">
          Client Docu
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Client Docu" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_1">
          <span class="md-nav__icon md-icon"></span>
          Client Docu
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../iexec_sconify_image/" class="md-nav__link">
        iExec Sconify Image
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_2" type="checkbox" id="__nav_11_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_2">
          Language Support
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Language Support" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_2">
          <span class="md-nav__icon md-icon"></span>
          Language Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../C/" class="md-nav__link">
        C
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mono/" class="md-nav__link">
        C#
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../C%2B%2B/" class="md-nav__link">
        C++
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Fortran/" class="md-nav__link">
        Fortran
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../GO/" class="md-nav__link">
        GO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Java/" class="md-nav__link">
        Java
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Running_Java_Applications_in_Scone_with_remote_attestation/" class="md-nav__link">
        Java with remote attestation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Python/" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pypyscone/" class="md-nav__link">
        PyPy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mono/" class="md-nav__link">
        Mono
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Nodejs/" class="md-nav__link">
        Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/" class="md-nav__link">
        R
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Rust/" class="md-nav__link">
        Rust
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_3" type="checkbox" id="__nav_11_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_3">
          IDE Integration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IDE Integration" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_3">
          <span class="md-nav__icon md-icon"></span>
          IDE Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../eclipse/" class="md-nav__link">
        Eclipse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm_vscode/" class="md-nav__link">
        Visual Studio Code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_4" type="checkbox" id="__nav_11_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_4">
          Command Line Interface
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command Line Interface" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_4">
          <span class="md-nav__icon md-icon"></span>
          Command Line Interface
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CAS_cli/" class="md-nav__link">
        CLI Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_Fileshield/" class="md-nav__link">
        scone fspf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../binary_fs/" class="md-nav__link">
        scone binary fs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_ENV/" class="md-nav__link">
        environment variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MrEnclave/" class="md-nav__link">
        MrEnclave
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scone_affinity/" class="md-nav__link">
        affinity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_5" type="checkbox" id="__nav_11_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_5">
          Performance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Performance" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_5">
          <span class="md-nav__icon md-icon"></span>
          Performance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../teemon/" class="md-nav__link">
        Monitoring tool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_6" type="checkbox" id="__nav_11_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_6">
          Background
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Background" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_6">
          <span class="md-nav__icon md-icon"></span>
          Background
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appsecurity/" class="md-nav__link">
        Application-Oriented Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../background/" class="md-nav__link">
        SCONE Background
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SCONE_Publications/" class="md-nav__link">
        Publications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aboutScone/" class="md-nav__link">
        About
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_10" type="checkbox" id="__nav_11_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_10">
          Releases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Releases" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_10">
          <span class="md-nav__icon md-icon"></span>
          Releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.7/" class="md-nav__link">
        SCONE 5.7.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.6/" class="md-nav__link">
        SCONE 5.6.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.5/" class="md-nav__link">
        SCONE 5.5.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release5.4/" class="md-nav__link">
        SCONE 5.4.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sconify-image-workflow" class="md-nav__link">
    Sconify Image Workflow
  </a>
  
    <nav class="md-nav" aria-label="Sconify Image Workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scone-file-protection" class="md-nav__link">
    SCONE File Protection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scone-binary-file-system" class="md-nav__link">
    SCONE Binary File System
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acquiring-policy-access" class="md-nav__link">
    Acquiring Policy Access
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acquire-sconify-image-resources" class="md-nav__link">
    Acquire Sconify Image Resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cicd-workflow" class="md-nav__link">
    CI/CD Workflow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-sconifcation-options" class="md-nav__link">
    Advanced Sconifcation Options
  </a>
  
    <nav class="md-nav" aria-label="Advanced Sconifcation Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-default-sconification-behavior" class="md-nav__link">
    Disable Default Sconification Behavior
  </a>
  
    <nav class="md-nav" aria-label="Disable Default Sconification Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-binary-symlink-detection" class="md-nav__link">
    Disable Binary Symlink Detection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-copying-of-shared-object-dependencies" class="md-nav__link">
    Disable Copying of Shared Object Dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-copying-of-service-libraries" class="md-nav__link">
    Disable Copying of Service Libraries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-binary-file-system-defaults" class="md-nav__link">
    Disable Binary File System Defaults
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-replacement-of-unsconifiable-binaries" class="md-nav__link">
    Disable Replacement of Unsconifiable Binaries
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#policy-extension-options" class="md-nav__link">
    Policy Extension Options
  </a>
  
    <nav class="md-nav" aria-label="Policy Extension Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command" class="md-nav__link">
    Command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    Environment Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-directory" class="md-nav__link">
    Working Directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volumes" class="md-nav__link">
    Volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-default-session-creation-behavior" class="md-nav__link">
    Disable Default Session Creation Behavior
  </a>
  
    <nav class="md-nav" aria-label="Disable Default Session Creation Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-copying-of-environment-variables" class="md-nav__link">
    Disable Copying of Environment Variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-helm-chart-generation" class="md-nav__link">
    Automatic Helm Chart Generation
  </a>
  
    <nav class="md-nav" aria-label="Automatic Helm Chart Generation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volumes_1" class="md-nav__link">
    Volumes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signing-options" class="md-nav__link">
    Signing Options
  </a>
  
    <nav class="md-nav" aria-label="Signing Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scone-signer" class="md-nav__link">
    Scone Signer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-upload-options" class="md-nav__link">
    Session Upload Options
  </a>
  
    <nav class="md-nav" aria-label="Session Upload Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identity" class="md-nav__link">
    Identity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-default-session-upload-behavior" class="md-nav__link">
    Disable Default Session Upload Behavior
  </a>
  
    <nav class="md-nav" aria-label="Disable Default Session Upload Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-session-upload" class="md-nav__link">
    Disable Session Upload
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-attestation" class="md-nav__link">
    Disable Attestation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-session-security-attestation" class="md-nav__link">
    Disable Session Security Attestation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#all-supported-options" class="md-nav__link">
    All Supported Options
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="sconify-container-image-standard-edition">Sconify Container Image (Standard Edition)</h1>
<div class="admonition info">
<p class="admonition-title">Prerequisites</p>
<p>Please read section <a href="../sconify/">Sconify</a> to understand the general sconification workflow first.</p>
</div>
<p><code>sconify_image</code> is a command line tool within a SCONE image that enables the <em>sconification</em> of native images without detailed knowledge of the SCONE framework. <code>sconify_image</code> transforms a native container image to an encrypted SCONE-enabled image <strong>in one step</strong>. We call this transformation <em>sconification</em>. These SCONE-enabled images execute their service within an SGX enclave using the SCONE runtime. In particular, the features of <code>sconify_image</code> are:</p>
<ul>
<li>sconification of the native image binary such that the execution of the sconified binary is performed within an SGX enclave</li>
<li>encryption and integrity protection of native image files:  giving access to the sconified binary only after it is <a href="../advantages/">attested by the SCONE platform</a></li>
<li>creation of a <a href="../CAS_session_lang_0_3/">SCONE policy</a> using sensible defaults (e.g., including native image environment variables and working directory), and with options to customize to use additional features of the SCONE policy language (e.g., SCONE shared volumes, shared secrets, injected files) - ensuring only the sconified binary can access the secured resources, and</li>
<li>usage of all these features with only a single command - enabling an easy integration into existing CI/CD workflows.</li>
</ul>
<p>We continue by demonstrating the usage of Sconify Image by sconifying a Python Flask REST API image. We thereby show the two main methods of image sconification with:</p>
<ol>
<li><a href="../SCONE_Fileshield/">SCONE File Protection</a></li>
<li><a href="../binary_fs/">SCONE Binary File System</a></li>
</ol>
<p>Furthermore, we show how <code>sconify_image</code> facilitates easy modification of the SCONE policy. Finally, we give a detailed technical description of all command line options that the tool supports.</p>
<div class="admonition info">
<p class="admonition-title"><code>sconify_image</code> currently supports musl LibC and GLibC container images</p>
<p>This 1-step conversion supports native images based on Alpine Linux and debian-based images. Debian-based image support is still experimental.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Debian-based image support</p>
<p>SCONE GLibC support is only compatible with PIE (Position Independent Executable)-compiled binaries. Please ensure your binary is PIE-enabled, e.g., with <code>file &lt;binary&gt;</code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Sconify Image Processing TIme</p>
<p>The binary-fs of <code>sconify_image</code> requires a significant amount of computational and memory resources:  <code>sconify_image</code> may take several minutes to sconify an image. The next SCONE release will contain a new the binary-fs that will use only seconds instead of minutes.</p>
</div>
<h2 id="sconify-image-workflow">Sconify Image Workflow</h2>
<h3 id="scone-file-protection">SCONE File Protection</h3>
<p>Suppose we have a simple Python Flask REST API service which we wish to sconify. We present the general workflow of the <em>sconification</em> process using <strong>SCONE File Protection</strong>:</p>
<p><img alt="Sconify Image Workflow" src="../img/scone_workflow.svg#fullwidth" /></p>
<p>As shown, Sconify Image sconifies the native binary, and copies the sconified binary to the encrypted image. Further, Sconify Image encrypts the service's code and data files, and copies these encrypted files to the encrypted image as well. During the sconification of the image, Sconify Image creates a security policy containing metadata to decrypt the encrypted files and to check the files integrity. This policy also contains additional information, e.g., the native images environment and working directory. Sconify Image uploads this policy to an <a href="../attestation/">attested</a> <a href="CASOverview">SCONE CAS</a>. After Sconify Image finishes this process, we can run a confidential container from the encrypted image. Upon execution, the SCONE CAS attests the service to ensure its trustworthiness. After a successful attestation, the CAS sends the service the secrets specified in the policy, which enable the service to execute as expected.</p>
<p>We continue by showing a possible implementation of this workflow. The Dockerfile of the Flask service may look as follows:</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">alpine:3.10</span>
<span class="k">ENV</span><span class="w"> </span>LANG C.UTF-8
<span class="k">COPY</span><span class="w"> </span>rest_api.py /app/rest_api.py
<span class="k">COPY</span><span class="w"> </span>flask.key /tls/flask.key
<span class="k">COPY</span><span class="w"> </span>flask.crt /tls/flask.crt
<span class="k">COPY</span><span class="w"> </span>requirements.txt /app/requirements.txt
<span class="k">RUN</span><span class="w"> </span>apk add --no-cache openssl ca-certificates pkgconfig wget python3 python3-dev <span class="se">\</span>
    <span class="o">&amp;&amp;</span> ln -s /usr/bin/pip3 /usr/local/bin/pip <span class="se">\</span>
    <span class="o">&amp;&amp;</span> ln -s /usr/bin/pip3 /usr/bin/pip <span class="se">\</span>
    <span class="o">&amp;&amp;</span> pip3 install -r /app/requirements.txt
<span class="k">CMD</span><span class="w"> </span>python3 -B /app/rest_api.py
</code></pre></div>
<p>To then use Sconify Image, we must select resources relevant for sconification. We see that the program code is in <code>/app</code>, and the data files that the service uses are in <code>/tls</code>. Further, our service runs in Python. Upon inspection, e.g., with <code>$(which python3)</code>, we find that our binary is located at <code>/usr/bin/python3.7</code>. We specify this information:
<div class="highlight"><pre><span></span><code><span class="nv">PROTECT_DIR_1</span><span class="o">=</span><span class="s2">&quot;/app&quot;</span>
<span class="nv">PROTECT_DIR_2</span><span class="o">=</span><span class="s2">&quot;/tls&quot;</span>
<span class="nv">BINARY</span><span class="o">=</span><span class="s2">&quot;/usr/bin/python3.7&quot;</span>
</code></pre></div></p>
<p>Let us assume that the native image is named <code>my-repo/my-native-flask</code>. Further, we specify the name for the finished encrypted image for later use: <code>my-repo/my-encrypted-flask</code>.
<div class="highlight"><pre><span></span><code><span class="nv">NATIVE_IMAGE</span><span class="o">=</span><span class="s2">&quot;my-repo/my-native-flask&quot;</span>
<span class="nv">ENCRYPTED_IMAGE</span><span class="o">=</span><span class="s2">&quot;my-repo/my-encrypted-flask&quot;</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Push encrypted images automatically</p>
<p>To push the encrypted image automatically, set <code>--push-image</code>. Please make sure to name your image appropriately (e.g., <code>ENCRYPTED_IMAGE="registry/repo/tag"</code>) and to provide the correct Docker credentials to the Sconify Image container, so that it can push to the specified repository. You can do so by mounting a Docker credential file inside of the Sconify Image container through a volume: <code>-v $HOME/.docker/config.json:/root/.docker/config.json</code>.</p>
</div>
<p>We also decide on information for using the SCONE infrastructure. We select a CAS to upload our policy, in this case the <a href="../public-CAS/">public CAS</a> <code>scone-cas.cf</code>. We additionally specify the name of a <a href="../glossary/#local-attestation-service-las">LAS</a>. Further, we set a name for the session we wish to upload: <code>my-flask-session</code>, as well as a name for the flask service within the session: <code>my-flask-service</code>. And finally, we set a namespace  <a href="../namespace/">CAS namespace</a> to bundle this session with further sessions we may create in our workflow: <code>my-workflow-namespace-$RANDOM</code>.
<div class="highlight"><pre><span></span><code><span class="nv">CAS_ADDR</span><span class="o">=</span><span class="s2">&quot;scone-cas.cf&quot;</span>
<span class="nv">LAS_ADDR</span><span class="o">=</span><span class="s2">&quot;localhost:18766&quot;</span>
<span class="nv">SERVICE</span><span class="o">=</span><span class="s2">&quot;my-flask-service&quot;</span>
<span class="nv">SESSION</span><span class="o">=</span><span class="s2">&quot;my-flask-session&quot;</span>
<span class="nv">NAMESPACE</span><span class="o">=</span><span class="s2">&quot;my-workflow-namespace-</span><span class="nv">$RANDOM</span><span class="s2">&quot;</span>
</code></pre></div></p>
<p>We now require the <a href="../SCONE_ENV/">SCONE environment variables</a> with which we run our service:
<div class="highlight"><pre><span></span><code><span class="nv">SCONE_HEAP</span><span class="o">=</span><span class="s2">&quot;1G&quot;</span>
<span class="nv">SCONE_STACK</span><span class="o">=</span><span class="s2">&quot;4M&quot;</span>
<span class="nv">SCONE_ALLOW_DLOPEN</span><span class="o">=</span><span class="s2">&quot;2&quot;</span>
</code></pre></div></p>
<p>Finally, to attest the CAS and upload a policy, we need access to the SGX device. Hence, we determine the SGX device (<a href="../sgxinstall/#determine-sgx-device">see determining SGX device</a>). The SGX device allows Sconify Image to attest the SCONE CAS.
<div class="highlight"><pre><span></span><code>determine_sgx_device
</code></pre></div>
Typically, we use the <a href="../CAS_cli/">SCONE CLI</a> to attest the CAS and upload sessions. Yet, Sconify Image executes these tasks automatically.</p>
<p>With all this information, we can run the Sconify Image tool:
<div class="highlight"><pre><span></span><code>docker run --rm --device<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SGXDEVICE</span><span class="s2">&quot;</span> <span class="se">\</span>
    -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
    registry.scontain.com:5050/sconecuratedimages/sconecli:sconify-image <span class="se">\</span>
    sconify_image --from<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$NATIVE_IMAGE</span><span class="s2">&quot;</span> --to<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$ENCRYPTED_IMAGE</span><span class="s2">&quot;</span> --cas-debug <span class="se">\</span>
    --dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PROTECT_DIR_1</span><span class="s2">&quot;</span> --dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PROTECT_DIR_2</span><span class="s2">&quot;</span> <span class="se">\ </span><span class="c1"># includes all subdirs as well</span>
    --binary<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$BINARY</span><span class="s2">&quot;</span> <span class="se">\</span>
    --cas<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_ADDR</span><span class="s2">&quot;</span> --las<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$LAS_ADDR</span><span class="s2">&quot;</span> <span class="se">\</span>
    --service-name<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SERVICE</span><span class="s2">&quot;</span> --name<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SESSION</span><span class="s2">&quot;</span> --namespace<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$NAMESPACE</span><span class="s2">&quot;</span> <span class="se">\</span>
    --create-namespace <span class="se">\</span>
    --heap<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_HEAP</span><span class="s2">&quot;</span> --stack<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_STACK</span><span class="s2">&quot;</span> --dlopen<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_ALLOW_DLOPEN</span><span class="s2">&quot;</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Running in Production Mode</p>
<p>For production, we must remove <code>--cas-debug</code> to ensure the CAS runs in production mode, and sign the binary with a production key: <code>--scone-signer=PRIVATE_KEY_PATH</code></p>
</div>
<p>Upon successful execution, the tool then returns the name of the session (<code>"$NAMESPACE/$SESSION"</code>), and the encrypted image under the name <code>"$ENCRYPTED_IMAGE"</code> will have been created. The encrypted image also contains the <code>CAS_ADDR</code> and <code>LAS_ADDR</code>, as well as the <a href="../SCONE_ENV/#scone-configuration-file"><code>SCONE_CONFIG_ID</code></a>. As such, we can then simply run the service, and it will utilize existing SCONE infrastructure without the need for further specification:
<div class="highlight"><pre><span></span><code>docker run --rm --device<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SGXDEVICE</span><span class="s2">&quot;</span> <span class="nv">$ENCRYPTED_IMAGE</span>
</code></pre></div></p>
<h3 id="scone-binary-file-system">SCONE Binary File System</h3>
<p>Using the <a href="../binary_fs/">SCONE Binary File System</a> (binary-fs), we can embed the service's files into the binary. This embedding extends the protection of the SGX enclave to the binary-fs. Further, the enclave's measurement (MRENCLAVE) then reflects the file system state.
As such, the usage of binary-fs changes the process of Sconify Image sconification. The updated process is as follows:</p>
<p><img alt="Sconify Image Workflow Binary FS" src="../img/scone_workflow_binary_fs.svg#fullwidth" /></p>
<p>As pictured, we must specify <strong>all</strong> files the service may access. This includes service libraries. As we use Python, Sconify Image includes the Python library be default. Thus, we must only make minimal changes to the command from before. To enable the binary-fs sconifcation mode, we must set <code>--binary-fs</code>. To specify directories to include in the binary-fs, we select them using <code>--fs-dir</code>. This option recursively includes all subdirectories as well. We can select individual files to include as well with <code>--fs-file</code>.
We may require access to files containing system specific data, which are not avaible at the time of binary-fs creation. These files may include networking files, such as <code>/etc/resolv.conf</code> or <code>/etc/hosts</code>. To access such files which reside outside of the binary-fs on the host, we may use the <code>--host-path</code> option. Note that files included with this option are <strong>not protected</strong>. The modified Sconify Image command could look as follows:</p>
<div class="highlight"><pre><span></span><code>docker run --rm --device<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SGXDEVICE</span><span class="s2">&quot;</span> <span class="se">\</span>
    -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
    registry.scontain.com:5050/sconecuratedimages/sconecli:sconify-image <span class="se">\</span>
    sconify_image --from<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$NATIVE_IMAGE</span><span class="s2">&quot;</span> --to<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$ENCRYPTED_IMAGE</span><span class="s2">&quot;</span> --cas-debug <span class="se">\</span>
    --fs-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PROTECT_DIR_1</span><span class="s2">&quot;</span> --fs-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PROTECT_DIR_2</span><span class="s2">&quot;</span> --binary<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$BINARY</span><span class="s2">&quot;</span> <span class="se">\</span>
    --cas<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_ADDR</span><span class="s2">&quot;</span> --las<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$LAS_ADDR</span><span class="s2">&quot;</span> <span class="se">\</span>
    --host-path<span class="o">=</span><span class="s2">&quot;/etc/resolv.conf&quot;</span> --host-path<span class="o">=</span><span class="s2">&quot;/etc/hosts&quot;</span> <span class="se">\</span>
    --service-name<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SERVICE</span><span class="s2">&quot;</span> --name<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SESSION</span><span class="s2">&quot;</span> --namespace<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$NAMESPACE</span><span class="s2">&quot;</span> <span class="se">\</span>
    --create-namespace <span class="se">\</span>
    --heap<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_HEAP</span><span class="s2">&quot;</span> --stack<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_STACK</span><span class="s2">&quot;</span> --dlopen<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_ALLOW_DLOPEN</span><span class="s2">&quot;</span> <span class="se">\</span>
    --binary-fs
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Service Library Inclusion</p>
<p>For supported services, we include service libraries into the binary file system by default. To view supported service, run <code>docker run --rm registry.scontain.com:5050/sconecuratedimages/sconecli:sconify-image sconify_image --help</code></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Binary-FS only compatible with PIE compiled binaries</p>
<p>Only binaries compiled with the <code>-pie</code> are compatible with binary-fs. To check if a binary is PIE-enabled, execute: <code>file &lt;binary&gt;</code> and check if the output contains <code>pie executable</code>.</p>
</div>
<p>In both Sconification variations, Sconify Image copies shared object dependencies of the binary into the encrypted image by default. Otherwise, the image container cannot execute the binary, as the shared object dependencies can not be loaded if they do not exist in the container's host file system. With binary-fs, the shared object dependencies loaded by the binary do not have to be included in the binary-fs. To include dependencies into the host file system of the encrypted image, we can use the <code>--plain</code> options.</p>
<h3 id="acquiring-policy-access">Acquiring Policy Access</h3>
<p>Before uploading a session to the SCONE CAS, Sconify Image generates a private key. Sconify Image then generates a corresponding public key. While uploading the session to the SCONE CAS, Sconify Image sends the CAS this public key. Sconify Image can then use this public / private key pair to identify itself to the CAS. The CAS binds the public key to Sconify Image's session, such that only holders of the corresponding private key may read and update the session. We may wish to read and update our session after Sconify Image is finished with the sconification process. Thus, we can retrieve Sconify Image's private key. We achieve this extraction by using a docker volume when running Sconify Image. We thereby mount the volume to the directory where Sconify Image stores, among other CAS relevant information, the private key (<code>~/.cas/config.json</code>):
<div class="highlight"><pre><span></span><code>docker run --rm --device<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SGXDEVICE</span><span class="s2">&quot;</span> <span class="se">\</span>
    -v <span class="nv">$PWD</span>/private-sconify-image-key:/root/.cas <span class="se">\ </span><span class="c1"># PRIVATE KEY VOLUME</span>
    -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
    registry.scontain.com:5050/sconecuratedimages/sconecli:sconify-image <span class="se">\</span>
    sconify_image ...
</code></pre></div>
We can then use the <code>config.json</code> in other containers to read and update the session:
<div class="highlight"><pre><span></span><code>docker run --rm --device<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SGXDEVICE</span><span class="s2">&quot;</span> <span class="se">\</span>
  -v <span class="nv">$PWD</span>/private-sconify-image-key:/root/.cas my-scone-image
</code></pre></div></p>
<h3 id="acquire-sconify-image-resources">Acquire Sconify Image Resources</h3>
<p>During the sconification process, Sconify Image generates the encrypted image's Dockerfile and session. To collect these resources, we add a volume to Sconify Image. Sconify Image stores resources in <code>/build-resources</code>:
<div class="highlight"><pre><span></span><code>docker run --rm --device<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SGXDEVICE</span><span class="s2">&quot;</span> <span class="se">\</span>
    -v <span class="nv">$PWD</span>/sconify-image-resources:/build-resources <span class="se">\ </span><span class="c1"># RESOURCE COLLECTION VOLUME</span>
    -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
    registry.scontain.com:5050/sconecuratedimages/sconecli:sconify-image <span class="se">\</span>
    sconify_image ...
</code></pre></div>
With these resources, we may rebuild the image ourselves. These resources are invaluable for debugging images created by Sconify Image.</p>
<h3 id="cicd-workflow">CI/CD Workflow</h3>
<p>In a typical workflow, one would perform the sconification of an image as part of the CI/CD pipeline: One would test the native image first, sconify the image and test the sconified image again. After a successful test, the binary would be pushed to a container image repository.</p>
<h2 id="advanced-sconifcation-options">Advanced Sconifcation Options</h2>
<h3 id="disable-default-sconification-behavior">Disable Default Sconification Behavior</h3>
<h4 id="disable-binary-symlink-detection">Disable Binary Symlink Detection</h4>
<p>By default, Sconify Image adds a symlink for supported services to the Dockerfile. To illustrate, if the binary to sconify is a Python 3 binary, such as <code>/usr/bin/python3.7</code>, Sconify Image will add a symlink: <code>ln -s /usr/bin/python3.7 /usr/bin/python3</code>. To disable this behavior, the option <code>--disable-binary-symlink-detection</code> may be specified.</p>
<h4 id="disable-copying-of-shared-object-dependencies">Disable Copying of Shared Object Dependencies</h4>
<p>Binaries require shared object dependencies to be executed. We can view these dependencies with:
<div class="highlight"><pre><span></span><code>ldd &lt;path-to-binary&gt;
</code></pre></div>
As we copy the binary to a different image than the native image, some shared object dependencies may not be present. As such, the binary may not be executable. To prevent this, Sconify Image, by default, copies all shared object dependencies of the binary from the native image to the encrypted image. To disable this behavior, we can use the <code>--disable-copy-shared-object-dependencies</code> option. As mentioned, this option may cause the binary to not be executable. To still enable that the binary is executable, shared object dependencies not available in the BASE_IMAGE must be specified with <code>--plain-file</code>.</p>
<h4 id="disable-copying-of-service-libraries">Disable Copying of Service Libraries</h4>
<p>Some services require certain service libraries to function. To illustrate, Python 3 usually requires a service library, e.g. <code>/usr/lib/python3.7</code>. Without the service library, the execution of the service may fail. As such, for supported services, Sconify Image attempts to find the service libraries within the native image and copy them to the encrypted image. For fspf sconification, the service libraries are plainly copied to the encypted image. In binary-fs sconification, Sconify Image includes the service libraries in the binary file system. To disable this behavior, e.g., to protect the service library with fspf, we use the option <code>--disable-copy-service-libraries</code>.</p>
<h4 id="disable-binary-file-system-defaults">Disable Binary File System Defaults</h4>
<p>Some services require shared object files that are not direct dependencies of the service during execution. To ensure that such services do not fail during execution when using binary-fs, Sconify Image includes all shared object files of the native image into the binary file system. This inclusion strongly increases the sconfication duration. To disable this behavior, we may use the <code>--disable-binary-fs-defaults</code> option.</p>
<h4 id="disable-replacement-of-unsconifiable-binaries">Disable Replacement of Unsconifiable Binaries</h4>
<p>Certain binaries cannot be sconified as is. They must be entirely recompiled with the SCONE libraries. Otherwise, the execution of such binaries results in hard-to-debug errors. Sconify Image detects such unsconifiable binaries, and replaces them with pre-compiled sconified binaries from SCONE images. To check which binaries Sconify Image replaces, try: <code>sconify_image --help</code>, in the desciption of the option <code>--disable-replace-unsconifiable-binaries</code>. We can use this option, <code>--disable-replace-unsconifiable-binaries</code>, to disable this behavior.</p>
<h2 id="policy-extension-options">Policy Extension Options</h2>
<p>Sconify Image enables easy extension of the security policy created in the sconification process. Currently, Sconify Image supports following security policy extensions:</p>
<ul>
<li><a href="../CAS_session_lang_0_3/#command">command</a></li>
<li><a href="../CAS_session_lang_0_3/#environment">environment variables</a></li>
<li><a href="../CAS_session_lang_0_3/#pwd">working directory</a></li>
<li><a href="../CAS_session_lang_0_3/#volumes">volumes</a></li>
</ul>
<!-- - [secrets](CAS_session_lang_0_3.md#secrets) -->
<!-- - [injected files](CAS_session_lang_0_3.md#secret-injection-files_1) -->

<h3 id="command">Command</h3>
<p>By default, Sconify Image sets the command in the security policy as the command in the native image. The container image executes this command upon a successful attestation by the CAS. To set a custom command, we can use <code>--command=SESSION_CMD</code>.</p>
<h3 id="environment-variables">Environment Variables</h3>
<p>By default, Sconify Image copies all environment variables from the native image to the security policy. Hence, Sconify Image protects the native environment variables. We can disable this default with <code>--disable-copy-envvars</code>. To specify additional environment variables for the security policy, we can use <code>--env="KEY=VALUE"</code>.</p>
<h3 id="working-directory">Working Directory</h3>
<p>By default, Sconify Image copies the working directory of the native image into the security policy. As such, upon execution, the working directory of the service will be the working directory set in the native image. The working directory's inclusion into the policy also protects it from external entities.</p>
<h3 id="volumes">Volumes</h3>
<p>With the option <code>--volume=NAME:PATH:[[FROM_SESSION]:[TO_SESSION]]</code>, we can easily create and access SCONE volumes. We set the volume name with <code>NAME</code> and the mount path into the encrypted image with <code>PATH</code>.
To simply create a volume:
<div class="highlight"><pre><span></span><code>--volume<span class="o">=</span><span class="s2">&quot;my_vol:/vol/simple-vol&quot;</span>
</code></pre></div></p>
<p>Optionally, volumes can be <strong>either</strong> imported or exported from or to other sessions, using <code>FROM_SESSION</code> and <code>TO_SESSION</code>, respectively. To import a volume <code>my_in_vol</code> from session <code>import-session</code>, we can use:
<div class="highlight"><pre><span></span><code>--volume<span class="o">=</span><span class="s2">&quot;my_in_vol:/vol/in-vol:import-session:&quot;</span>
</code></pre></div>
To export the volume <code>my_out_vol</code> to session <code>export-session</code>, we can use:
<div class="highlight"><pre><span></span><code>--volume<span class="o">=</span><span class="s2">&quot;my_out_vol:/vol/out-vol/::export-session&quot;</span>
</code></pre></div>
Exporting to multiple sessions is also possible:
<div class="highlight"><pre><span></span><code>--volume<span class="o">=</span><span class="s2">&quot;my_many_out_vol:/vol/many-out-vol::policy-1:policy-2:policy-3&quot;</span>
</code></pre></div></p>
<!-- TODO implement and then document

### Secrets


### Injected Files

-->

<!-- TODO add resource collection with volume -->

<h3 id="disable-default-session-creation-behavior">Disable Default Session Creation Behavior</h3>
<h4 id="disable-copying-of-environment-variables">Disable Copying of Environment Variables</h4>
<p>As environment variables specified in the native image are typically used by the contained service, Sconify Image by default copies all existing environment variables of the native image to the session. As such, SCONE protects these environment variables, and only attested services may access them. To disable this behavior, we may use the <code>--disable-copy-envvars</code> option.</p>
<h2 id="automatic-helm-chart-generation">Automatic Helm Chart Generation</h2>
<!--
TODO:
- Add real example with charts.
- Services.
-->

<p><a href="https://helm.sh">Helm</a> allows developers and operators to define their application deployment to a Kubernetes cluster in a Helm <em>chart</em>, which is a collection of templates that are rendered into custom, valid manifests accepted by Kubernetes. Helm charts provide a sensible way of distributing and managing the lifecycle of applications that run on Kubernetes.</p>
<p>Sconify Image generates charts that inherit default values from the sconification process, such as the service name, the CAS address, the appropriate SCONE config ID, the encrypted image name and so on. Chart generation is enabled through the parameter <code>--k8s-helm-workload-type=[deployment|job|statefulset|daemonset]</code>, which specifies how your application should be deployed to Kubernetes. A bit more about each workload type:</p>
<ul>
<li>Deployment: the most common, intended for stateless workloads that run indefinitely (e.g., NGINX).</li>
<li>StatefulSet: intended for stateful workloads that run indefinitely (e.g., MariaDB).</li>
<li>Job: intended for workloads that run to completion (e.g., batch processors, ML pipelines).</li>
<li>DaemonSet: intended to run with exactly one replica per node in the cluster (e.g., node agents, device plugins).</li>
</ul>
<p>Extending the previous Flask service example, which should run as a Kubernetes <code>Deployment</code>, we set:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">WORKLOAD_TYPE</span><span class="o">=</span><span class="s2">&quot;deployment&quot;</span>
</code></pre></div>
<p>Generated charts are by default saved to <code>/sconify-helm</code>, so we add a volume to save the charts locally: <code>-v $PWD/charts:/sconify-helm</code>. The charts will be saved to a local directory called <code>charts</code>. The output directory can be configured through <code>--k8s-helm-output-dir=$DIR</code> option.</p>
<p>Finally, since the Kubernetes cluster needs to pull the sconified image before running it, we add <code>--push-image</code> and mount Docker credentials inside the container <code>-v $HOME/.docker/config.json:/root/.docker/config.json</code> , so <code>sconify_images</code> can push the images automatically. You can also push the images yourself after the sconification process is done.</p>
<div class="highlight"><pre><span></span><code>docker run --rm --device<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SGXDEVICE</span><span class="s2">&quot;</span> <span class="se">\</span>
    -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
    -v <span class="nv">$HOME</span>/.docker/config.json:/root/.docker/config.json <span class="se">\</span>
    -v <span class="nv">$PWD</span>/charts:/sconify-helm <span class="se">\</span>
    registry.scontain.com:5050/sconecuratedimages/sconecli:sconify-image <span class="se">\</span>
    sconify_image --from<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$NATIVE_IMAGE</span><span class="s2">&quot;</span> --to<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$ENCRYPTED_IMAGE</span><span class="s2">&quot;</span> --cas-debug <span class="se">\</span>
    --dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PROTECT_DIR_1</span><span class="s2">&quot;</span> --dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PROTECT_DIR_2</span><span class="s2">&quot;</span> --binary<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$BINARY</span><span class="s2">&quot;</span> <span class="se">\</span>
    --cas<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CAS_ADDR</span><span class="s2">&quot;</span> --las<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$LAS_ADDR</span><span class="s2">&quot;</span> <span class="se">\</span>
    --service-name<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SERVICE</span><span class="s2">&quot;</span> --name<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SESSION</span><span class="s2">&quot;</span> --namespace<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$NAMESPACE</span><span class="s2">&quot;</span> <span class="se">\</span>
    --create-namespace <span class="se">\</span>
    --heap<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_HEAP</span><span class="s2">&quot;</span> --stack<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_STACK</span><span class="s2">&quot;</span> --dlopen<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SCONE_ALLOW_DLOPEN</span><span class="s2">&quot;</span> <span class="se">\</span>
    --push-image <span class="se">\</span>
    --k8s-helm-workload-type<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$WORKLOAD_TYPE</span><span class="s2">&quot;</span>
</code></pre></div>
<p>After the sconification process is finished, the generated chart can be installed as follows (using the defaults inherited from <code>sconify_image</code>):</p>
<div class="highlight"><pre><span></span><code>helm install my-flask-api charts/<span class="nv">$SERVICE</span>
</code></pre></div>
<p>You can customize parameter values via <code>--set</code> option in <code>helm install</code>. For example, to deploy the Flask service with 5 replicas, and specifying an <a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/">imagePullSecret</a> so that Kubernetes can pull images from a private registry:</p>
<div class="highlight"><pre><span></span><code>helm install my-flask-api charts/<span class="nv">$SERVICE</span> --set <span class="nv">replicaCount</span><span class="o">=</span><span class="m">5</span> --set imagePullSecrets<span class="o">[</span><span class="m">0</span><span class="o">]</span>.name<span class="o">=</span>my-secret
</code></pre></div>
<p>Charts generated by Sconify Image also include documentation. Refer to the documentation to see the full list of parameters accepted by the chart.</p>
<div class="admonition note">
<p class="admonition-title">Kubernetes Naming Constraints</p>
<p>Due to Kubernetes naming constraints, some names in the chart might be slightly changed to be <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names">DNS-1123-compliant</a>.</p>
</div>
<h3 id="volumes_1">Volumes</h3>
<p>If you configure encrypted volumes (through <code>--volume</code> option in <code>sconify_image</code>), they will also be translated to the Helm chart. Sconify Image will create templates for a Kubernetes <code>volume</code> and a <code>volumeMount</code> to bind it to your container. They will have the same mountpoint as specified in sconification, but might have a slightly different name because of Kubernetes naming constraints.</p>
<p>Each volume can be independently configured with respect to its persistence in Kubernetes. It's possible to disable persistence (using an <a href="https://kubernetes.io/docs/concepts/storage/volumes/#emptydir"><code>emptyDir: {}</code></a> volume), or to have <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/"><code>PersistentVolumes</code></a> attached to your application, either manually (by specifying an existing <code>PersistentVolumeClaim</code>) or dynamically, by setting <a href="https://kubernetes.io/docs/concepts/storage/storage-classes/"><code>Storage Classes</code></a>.</p>
<h2 id="signing-options">Signing Options</h2>
<h3 id="scone-signer">Scone Signer</h3>
<p>Sconify Image can also sign binaries of images during sconification, using the <a href="../scone-signer/">scone signer</a>. Only signed binaries may run in production mode. Signing binaries requires an Intel verified private key. To use the scone signer, add the option <code>--scone-signer=PRIVATE_KEY_PATH</code>, whereby the <code>PRIVATE_KEY_PATH</code> is the patch to the private key <strong>accessible by the container</strong>. We give the container access with a volume. A corresponding command can look as follows:
<div class="highlight"><pre><span></span><code>docker run --rm --device<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SGXDEVICE</span><span class="s2">&quot;</span> <span class="se">\</span>
    -v <span class="nv">$PWD</span>/my-private-key.pem:/my-private-key.pem <span class="se">\ </span><span class="c1"># SUPPLY CONTAINER THE KEY</span>
    -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
    registry.scontain.com:5050/sconecuratedimages/sconecli:sconify-image <span class="se">\</span>
    sconify_image ... --scone-signer<span class="o">=</span>/my-private-key.pem
</code></pre></div></p>
<p>We squash the image after building, such that the Docker build history does not expose information of the key. The key itself is never <code>COPY</code>ed into the image. We use it with the <code>DOCKER_BUILDKIT</code> <code>--secret</code> option.</p>
<!--### Docker Trust Sign
TODO fix Docker Trust Sign -> https://scone.cf/scone/subtree-scone/-/issues/1095
Sconify Image also supports signing images with Content trust in Docker.-->

<h2 id="session-upload-options">Session Upload Options</h2>
<h3 id="identity">Identity</h3>
<p>Sconify Image can also use <strong>identity files</strong> to create and access namespaces and sessions. An identity file must contain a PEM-encoded PKCS#8 private key followed by a X.509v3 certificate. These identity files serve as <a href="../CAS_session_lang_0_3/#access-control">access control</a>.</p>
<p>We can either generate an identity file with:
<div class="highlight"><pre><span></span><code>openssl genpkey -out identity-private-key.pem -algorithm EC -pkeyopt ec_paramgen_curve:P-256
openssl req -x509 -key <span class="s2">&quot;identity-private-key.pem&quot;</span> -out <span class="s2">&quot;identity.crt.pem&quot;</span> -days <span class="m">31</span> -nodes -sha256 -subj <span class="s2">&quot;/CN=Generated Test Certificate&quot;</span> -reqexts SAN -extensions SAN -config &lt;<span class="o">(</span>cat /etc/ssl/openssl.cnf &lt;<span class="o">(</span><span class="nb">printf</span> <span class="s1">&#39;[SAN]\nsubjectAltName=DNS:www.scontain.com,DNS:localhost&#39;</span><span class="o">))</span>
cat identity-private-key.pem &gt; identity.pem
cat identity.crt.pem &gt;&gt; identity.pem
</code></pre></div></p>
<p>Or we can extract it from a scone client which already uploaded a session, to acquire its identity and access rights:
<div class="highlight"><pre><span></span><code><span class="c1"># within client container</span>
<span class="nb">printf</span> <span class="s1">&#39;%b&#39;</span> <span class="s2">&quot;</span><span class="k">$(</span>cat <span class="nv">$HOME</span>/.cas/config.json <span class="p">|</span> jq .identity<span class="k">)</span><span class="s2">&quot;</span> &gt; identity.pem
</code></pre></div></p>
<p>We can then use this identity file in Sconify Image, to upload our session to e.g. a preexisting namespace, created by another client. We use the <code>--identity=FILE</code> option for this:
<div class="highlight"><pre><span></span><code>docker run --rm --device<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SGXDEVICE</span><span class="s2">&quot;</span> <span class="se">\</span>
    -v <span class="nv">$PWD</span>/identity.pem:/identity.pem <span class="se">\ </span><span class="c1"># SUPPLY THE IDENTITY TO CONTAINER</span>
    -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
    registry.scontain.com:5050/sconecuratedimages/sconecli:sconify-image <span class="se">\</span>
    sconify_image ... --identity<span class="o">=</span>identity.pem
</code></pre></div></p>
<h3 id="disable-default-session-upload-behavior">Disable Default Session Upload Behavior</h3>
<h4 id="disable-session-upload">Disable Session Upload</h4>
<p>By default, Sconify Image uploads the session it generates. To disable any session uploading and CAS attestation, we can use the option <code>--disable-session-upload</code>. Sconify Image thereby still generates a session in <code>/build-resources</code>, yet does not upload it to any CAS. As such, Sconify Image does not require a CAS or LAS connection in this mode.</p>
<h4 id="disable-attestation">Disable Attestation</h4>
<p>By default, Sconify Image attempts to attest the CAS that it will upload the session to. For attestation, it requires the Intel SGX Device. To upload sessions to the CAS without attestation and without requiring an SGX device, we can use the option <code>--disable-attestation</code>. This option is not secure.</p>
<h4 id="disable-session-security-attestation">Disable Session Security Attestation</h4>
<p>By default, sessions uploaded by Sconify Image requires the service that wishes to utilize them to be attested by the CAS. This attestation requires the presence of a LAS. To enable a session to be usable by any service, we can disable the services attesation with <code>--disable-session-security-attestation</code>. This option is not secure, as it allows the session to be used by any service. This usability may expose secrets and secure configuration.</p>
<h2 id="all-supported-options">All Supported Options</h2>
<div class="highlight"><pre><span></span><code>The following options are supported:

  -h, --help               display this help and exit

REQUIRED:
  --from=NATIVE_IMAGE      name of the native image (which this script encrypts)
  --to=TO_IMAGE            name of encrypted image (image output of this script)
  --binary=BINARY          binary of the native image (which is to be sconified)

OPTIONAL:
  --name=SESSION           name of the CAS policy session (default: TO_IMAGE \ &#39;/&#39;)
  --base=BASE_IMAGE        set the base image used to generate the encrypted
                             image (default=alpine:3.10)
  --command=SESSION_CMD    set the command in the session to be securely
                             executed, e.g., 
                             &#39;/my-app/my-binary /my-app/secret-foo.txt&#39;. 
                             (default: ENTRYPOINT + CMD of native image)
  --env=&quot;KEY=VALUE&quot;    set additional env variables to include in the 
                             session, in addition to env vars from native image
  --cli=CLI_IMAGE          set the SCONE CLI image (default=registry.scontain.com:5050/sconecuratedimages/sconecli:sconify-image)
  --service-name=SERVICE_NAME      set the name of the service within the
                              SESSION (default: service). Is used for
                              SCONE_CONFIG_ID=SESSION/service
  --dir=DIRECTORY          add directory to encrypt; add one option per 
                             directory. Will be added to the BASE_IMAGE file
                             system. NOT compatible with `--binary-fs`
  --plain=DIRECTORY        copy directories that are not encrypted to the 
                             TO_IMAGE file system
  --plain-file=FILE        copy files that are not encrypted to the TO_IMAGE
                             file system
  --host-path=PATH         add a host path, served directly from the host file
                             system, WIHOUT any protection through SCONE.
                             Used for e.g. files containing system specific data,
                             such as networking configurations (`/etc/hosts`,
                             `/etc/resolv.conf`), or special device files.
                             The plain file must be present on the final image.
                             A convenient way to access plain files from the native
                             image is to use `--plain` or `--plain-file` in
                             addition to `--host-path`.
  --volume=NAME:PATH[:[FROM_SESSION][:TO_SESSION_1]:...[:TO_SESSION_N]] 
                           set a volume with name NAME at path PATH in the
                             session
                             (see sconedocs.github.io/CAS_session_lang_0_3/#volumes).
                             Optionally EITHER import volume from FROM_SESSION
                             OR export to TO_SESSION. Multiple export volumes
                             may be specified. If FROM_SESSION empty, only
                             TO_SESSION will be used (e.g. name:path::to_session)
  --cas=CAS_ADDR           set the name of the CAS_ADDR (default=scone-cas.cf)
  --las=LAS_ADDR           set the name of the LAS service (default=localhost:18766)
  --template=TEMPLATE_FILE file containing policy template
                             (default=/src/session-template.yml)
  --session=SESSION_FILE   file that will contain the session
                             (default=/build-resources/session.yml)
  --secrets=FILE           policy section that defines secrets 
                             (see sconedocs.github.io/CAS_session_lang_0_3/#secrets)
                             MUST BE MAPPED TO CONTAINER WITH VOLUME (-v).
  --injectedfiles=FILE     policy section that defines the injected files
                             (see sconedocs.github.io/CAS_session_lang_0_3/#secret-injection-files)
                             MUST BE MAPPED TO CONTAINER WITH VOLUME (-v).
  --namespace=NAMESPACE    namespace of this session (default=RANDOM)
  --create-namespace       create namespace (instead of using existing namespace).
                             Issues a warning if namespace already exists.
  --identity=FILE          Identity file to use during session creation.
                             If omitted, the automatically generated CLI identity
                             will be used. An identity file must contain a PEM-encoded
                             PKCS#8 private key. MUST BE MAPPED TO CONTAINER WITH
                             VOLUME (-v).
  --push-image             push the sconified Docker image (&#39;--to&#39;).
                             Please note that a valid Docker credentials file MUST be provided in its
                             default location (~/.docker/config.json). For example, you can mount it to
                             the sconify container with a volume (-v):
                                -v /root/.docker/config.json:/root/.docker/config.json
  --dry-run                no transformation will be performed, only command will be printed
  --generate-sconefile     generates sconefile suitabile from scone build, implies --dry-run

ATTESTATION:
  --allow-tcb-vulnerabilities  Sets default hardware vulnerability tolerations
                             in the generated session. Thereby allows sconified service
                             to run on platforms with an insecure Trusted Computing Base (TCB).
                             Allows for `tolerate`: hyperthreading, insecure-igpu,
                             outdated-tcb, software-hardening-needed, insecure-configuration.
                             For `ignore_advisories`: &quot;*&quot; (all)
                             See https://sconedocs.github.io/CAS_session_lang_0_3/#tolerating-hardware-attestation-issues.
  --allow-debug-mode       Sets the `debug-mode` toleration in the generated
                             session. Thereby allows the sconified service to run on
                             platforms without enclave protection. Allows the extraction
                             of secrets.
                             See https://sconedocs.github.io/CAS_session_lang_0_3/#tolerating-hardware-attestation-issues.
  --cas-debug              Permits the CAS to be in debug mode. CAS thereby does NOT PROTECT
                             SECRETS.

ADVANCED:
DISABLE DEFAULTS:
  --disable-binary-symlink-detection   for supported services, disables the
                             automatic addition of a symlink to the BINARY in
                             the TO_IMAGE
  --disable-copy-shared-object-dependencies    disables default inclusion of
                             shared object dependencies of the BINARY on the
                             TO_IMAGE host file system
  --disable-copy-service-libraries for supported services, copy the service
                             libraries to the TO_IMAGE
  --disable-copy-envvars   disables default inclusion of NATIVE_IMAGE
                             environment variables in session
  --disable-session-upload disable session uploading and CAS attestation
  --disable-attestation    disables SCONE CAS attestation. Enables session
                             uploading without using Intel SGX. IS INSECURE.
  --disable-session-security-attestation disables attestation of the session.
                             Allows anyone to use the session; MRENCLAVE is NOT
                             verified. NO SERVICE AUTHENTICATION IS PERFORMED UPON
                             SESSION USAGE.
                             (see sconedocs.github.io/CAS_session_lang_0_3/#disabling-attestation)
  --disable-replace-unsconifiable-binaries   for binaries node
                             Sconify Image replaces these binaries with a pre-
                             sconified binary instead of sconifying it, as the
                             binary must be compiled differently to work with
                             SCONE. This option disables this feature.
  --disable-update-session-if-exists if a session exists, sconify image by default
                             will attempt to update that session. Setting this option
                             causes this tool to fail if the specified session
                             exists.
  --disable-ld-library-path-in-session   If no LD_LIBRARY_PATH env var is in the native
                             image or set via `--env`, an LD_LIBRARY_PATH is generated
                             and included in the generated session.
                             Sconified services may then load required dependencies,
                             which may otherwise be unreachable when using the default
                             LD_LIBRARY_PATH. Setting this option disables this behavior.

BINARY FILE SYSTEM (binary fs):
  --binary-fs              use the SCONE binary file system to embed the file 
                             system into the binary; ONLY SUPPORTS PIE COMPILED
                             BINARIES (see sconedocs.github.io/binary_fs/)
  --fs-dir=DIRECTORY       add a directory to the binary-fs; one option per dir
  --fs-file=FILE           specify certain files to include in the binary fs. 
                             Useful if including the file&#39;s directory makes the
                             binary fs too large.
  --crosscompiler=CROSSCOMPILER_IMAGE    scone crosscompiler image for compiling
                             binary-fs of executable. Only used when binary-fs
                             is enabled.
                             (default=registry.scontain.com:5050/sconecuratedimages/sconecli:sconify-image)
  --disable-binary-fs-defaults     disables default inclusion of shared object
                             libraries and service related libraries in the binary fs

SIGNING:
  --scone-signer=PRIVATE_KEY_PATH  sign the binary for production mode
                             (uses other arguments from environment).
                             (see sconedocs.github.io/scone-signer/)
                             MUST BE MAPPED TO CONTAINER WITH VOLUME (-v).

KUBERNETES:
  --k8s-helm-workload-type=[deployment|statefulset|daemonset|job] generate a Helm chart to deploy
                                      the sconified application to a Kubernetes cluster as the specified
                                      resource.
  --k8s-helm-expose=PORT            set PORT to be exposed in the generated charts via a Kubernetes Service.
  --k8s-helm-output-dir=DIRECTORY   save generated charts to DIRECTORY.
                                      (default=/sconify-helm)
  --k8s-helm-volume=NAME:PATH       define an extra volume for the generated Helm chart. The resource name in
                                      the chart might be slightly different due to Kubernetes naming constraints,
                                      please check the generated chart documentation. THIS VOLUME WILL NOT
                                      BE ENCRYPTED OR INTEGRITY-PROTECTED BY SCONE. For encrypted volumes, use
                                      --volume instead.
  --k8s-helm-manifests=PATH         render Kubernetes manifests from the generated Helm chart and save them to PATH.
  --k8s-helm-set=&quot;PARAM=VALUE&quot;    set default values in generated chart parameters. Parameter &quot;PARAM&quot; (must be a valid
                                      YAML path) will be assigned the default value &quot;VALUE&quot; (must be a valid string).
                                      Refer to the generated documentation to see all supported parameters.

AZURE INTEGRATION:
  --azure-attestation=MAA_URL  set attestation mode to maa and use a Microsoft Azure Attestation provider.
                                 The enclave MUST comply with both policies (MAA and SCONE) to be attested.
                                 This attestation mode only works for services that run on Azure. Please note
                                 that the TCB verification is done solely by Microsoft (see
                                 https://sconedocs.github.io/CAS_session_lang_0_3/#microsoft-azure-attestation)

SCONE ENV VARS:
  --heap=INT               heap size (default=1G)[SCONE_HEAP]
  --stack=INT              stack size (default=1M) [SCONE_STACK]
  --dlopen=[0|1|2]         dlopen: 0 - disable, 
                             1 - enable and require authentication (default),
                             2 - debug only [SCONE_ALLOW_DLOPEN]
  --fork=[0|1]             enable fork (default=0) [SCONE_FORK]
  --log=[trace|info|warning|error|fatal]   sets SCONE_LOG level
                           (default: log level of SCONE runtime)

DEBUG:
  -x, --debug              enables &#39;set -x&#39; (commands are printed)
  -v, --verbose            prints created build artifacts (Dockerfile, session)
  --no-color               disable colored output (useful for execution in scripts)
</code></pre></div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../sconify_filetypes/" class="md-footer__link md-footer__link--prev" aria-label="Previous: File Types" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              File Types
            </div>
          </div>
        </a>
      
      
        
        <a href="../multi-stakeholder-workflow/" class="md-footer__link md-footer__link--next" aria-label="Next: Multi-Stakeholder Example" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Multi-Stakeholder Example
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright Scontain &copy; 2018-2022
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.5413a266.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
      
        <script src="../css/extra.js"></script>
      
        <script src="../search/main.js"></script>
      
    
  </body>
</html>